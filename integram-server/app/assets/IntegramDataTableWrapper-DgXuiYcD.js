const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DSwq2M__.js","assets/index-qS_NbCi9.css","assets/jspdf.es.min-_anAD1HF.js"])))=>i.map(i=>d[i]);
import{$ as e,au as t,c as n,o as a,a as l,m as i,B as o,R as r,av as s,l as d,x as u,aw as c,ai as p,I as v,H as h,ax as f,p as m,ay as b,az as y,aj as g,aA as w,ac as k,ao as I,z as x,aB as C,Q as S,aC as D,a9 as M,aD as T,am as V,al as $,ab as O,ak as E,ae as L,an as F,y as P,u as A,h as _,b as R,i as B,A as U,n as K,g as H,k as N,F as z,w as j,T as q,d as Y,j as W,v as G,t as Z,f as X,V as J,aE as Q,s as ee,aF as te,aG as ne,aH as ae,aI as le,aJ as ie,aK as oe,a5 as re,aL as se,aa as de,aM as ue,q as ce,aN as pe,aO as ve,ad as he,aP as fe,ag as me,aQ as be,r as ye,U as ge,C as we,G as ke,aR as Ie,aS as xe,J as Ce,K as Se,as as De,aT as Me,Y as Te,aU as Ve,N as $e,D as Oe,aq as Ee,L as Le,P as Fe,aV as Pe}from"./index-DSwq2M__.js";import{u as Ae}from"./useIntegramSession-XyreUhfh.js";import{i as _e}from"./integramApiClient-BsYdo77J.js";import{l as Re}from"./logger-DLAyPY85.js";import{s as Be,a as Ue}from"./index-Dyhmuyxc.js";import{s as Ke}from"./index-DtDfQu8-.js";import{M as He,a as Ne}from"./MentionDisplay-B0iaZpe_.js";import{_ as ze}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{u as je}from"./useGrants-BMHWZf1v.js";import{I as qe}from"./IntegramBreadcrumb-YrezANl5.js";import{R as Ye}from"./ReferenceField-Bw7fzoYo.js";import"./index-CcrxTH1M.js";import"./unifiedAuthService-6fZILgG8.js";import"./useTimer-CGH5EF2D.js";const We=[{value:2,label:"HTML",icon:"fa-code"},{value:3,label:"Короткая строка",icon:"fa-text-width"},{value:4,label:"Дата и время",icon:"fa-clock"},{value:6,label:"Пароль",icon:"fa-key"},{value:7,label:"Кнопка",icon:"fa-mouse-pointer"},{value:8,label:"Строка",icon:"fa-font"},{value:9,label:"Дата",icon:"fa-calendar-alt"},{value:10,label:"Файл",icon:"fa-file"},{value:11,label:"Логическое значение",icon:"fa-check-circle"},{value:12,label:"Многострочный текст",icon:"fa-align-left"},{value:13,label:"Целое число",icon:"fa-hashtag"},{value:14,label:"Число с десятичной частью",icon:"fa-calculator"},{value:15,label:"Вычисляемое поле",icon:"fa-function"},{value:17,label:"Путь к файлу",icon:"fa-folder-open"}];let Ge=!1,Ze=null;const Xe=e=>{const t=parseInt(e)||0;return 0===t?"badge-empty":t<=3?"badge-few":t<=10?"badge-some":"badge-many"},Je=(e,t)=>{const n=parseInt(e)||0;return t&&t.length<=12?t:(e=>{const t=Math.abs(e)%100,n=t%10;return t>10&&t<20?"записей":n>1&&n<5?"записи":1===n?"запись":"записей"})(n)};var Qe={name:"CalendarIcon",extends:t};function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}Qe.render=function(e,t,o,r,s,d){return a(),n("svg",i({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),function(e){if(Array.isArray(e))return et(e)}(u=t[0]||(t[0]=[l("path",{d:"M10.7838 1.51351H9.83783V0.567568C9.83783 0.417039 9.77804 0.272676 9.6716 0.166237C9.56516 0.0597971 9.42079 0 9.27027 0C9.11974 0 8.97538 0.0597971 8.86894 0.166237C8.7625 0.272676 8.7027 0.417039 8.7027 0.567568V1.51351H5.29729V0.567568C5.29729 0.417039 5.2375 0.272676 5.13106 0.166237C5.02462 0.0597971 4.88025 0 4.72973 0C4.5792 0 4.43484 0.0597971 4.3284 0.166237C4.22196 0.272676 4.16216 0.417039 4.16216 0.567568V1.51351H3.21621C2.66428 1.51351 2.13494 1.73277 1.74467 2.12305C1.35439 2.51333 1.13513 3.04266 1.13513 3.59459V11.9189C1.13513 12.4709 1.35439 13.0002 1.74467 13.3905C2.13494 13.7807 2.66428 14 3.21621 14H10.7838C11.3357 14 11.865 13.7807 12.2553 13.3905C12.6456 13.0002 12.8649 12.4709 12.8649 11.9189V3.59459C12.8649 3.04266 12.6456 2.51333 12.2553 2.12305C11.865 1.73277 11.3357 1.51351 10.7838 1.51351ZM3.21621 2.64865H4.16216V3.59459C4.16216 3.74512 4.22196 3.88949 4.3284 3.99593C4.43484 4.10237 4.5792 4.16216 4.72973 4.16216C4.88025 4.16216 5.02462 4.10237 5.13106 3.99593C5.2375 3.88949 5.29729 3.74512 5.29729 3.59459V2.64865H8.7027V3.59459C8.7027 3.74512 8.7625 3.88949 8.86894 3.99593C8.97538 4.10237 9.11974 4.16216 9.27027 4.16216C9.42079 4.16216 9.56516 4.10237 9.6716 3.99593C9.77804 3.88949 9.83783 3.74512 9.83783 3.59459V2.64865H10.7838C11.0347 2.64865 11.2753 2.74831 11.4527 2.92571C11.6301 3.10311 11.7297 3.34371 11.7297 3.59459V5.67568H2.27027V3.59459C2.27027 3.34371 2.36993 3.10311 2.54733 2.92571C2.72473 2.74831 2.96533 2.64865 3.21621 2.64865ZM10.7838 12.8649H3.21621C2.96533 12.8649 2.72473 12.7652 2.54733 12.5878C2.36993 12.4104 2.27027 12.1698 2.27027 11.9189V6.81081H11.7297V11.9189C11.7297 12.1698 11.6301 12.4104 11.4527 12.5878C11.2753 12.7652 11.0347 12.8649 10.7838 12.8649Z",fill:"currentColor"},null,-1)]))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(u)||function(e,t){if(e){if("string"==typeof e)return et(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?et(e,t):void 0}}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),16);var u};var tt=o.extend({name:"datepicker",style:"\n    .p-datepicker {\n        display: inline-flex;\n        max-width: 100%;\n    }\n\n    .p-datepicker:has(.p-datepicker-dropdown) .p-datepicker-input {\n        border-start-end-radius: 0;\n        border-end-end-radius: 0;\n    }\n\n    .p-datepicker-dropdown {\n        cursor: pointer;\n        display: inline-flex;\n        user-select: none;\n        align-items: center;\n        justify-content: center;\n        overflow: hidden;\n        position: relative;\n        width: dt('datepicker.dropdown.width');\n        border-start-end-radius: dt('datepicker.dropdown.border.radius');\n        border-end-end-radius: dt('datepicker.dropdown.border.radius');\n        background: dt('datepicker.dropdown.background');\n        border: 1px solid dt('datepicker.dropdown.border.color');\n        border-inline-start: 0 none;\n        color: dt('datepicker.dropdown.color');\n        transition:\n            background dt('datepicker.transition.duration'),\n            color dt('datepicker.transition.duration'),\n            border-color dt('datepicker.transition.duration'),\n            outline-color dt('datepicker.transition.duration');\n        outline-color: transparent;\n    }\n\n    .p-datepicker-dropdown:not(:disabled):hover {\n        background: dt('datepicker.dropdown.hover.background');\n        border-color: dt('datepicker.dropdown.hover.border.color');\n        color: dt('datepicker.dropdown.hover.color');\n    }\n\n    .p-datepicker-dropdown:not(:disabled):active {\n        background: dt('datepicker.dropdown.active.background');\n        border-color: dt('datepicker.dropdown.active.border.color');\n        color: dt('datepicker.dropdown.active.color');\n    }\n\n    .p-datepicker-dropdown:focus-visible {\n        box-shadow: dt('datepicker.dropdown.focus.ring.shadow');\n        outline: dt('datepicker.dropdown.focus.ring.width') dt('datepicker.dropdown.focus.ring.style') dt('datepicker.dropdown.focus.ring.color');\n        outline-offset: dt('datepicker.dropdown.focus.ring.offset');\n    }\n\n    .p-datepicker:has(.p-datepicker-input-icon-container) {\n        position: relative;\n    }\n\n    .p-datepicker:has(.p-datepicker-input-icon-container) .p-datepicker-input {\n        padding-inline-end: calc((dt('form.field.padding.x') * 2) + dt('icon.size'));\n    }\n\n    .p-datepicker-input-icon-container {\n        cursor: pointer;\n        position: absolute;\n        top: 50%;\n        inset-inline-end: dt('form.field.padding.x');\n        margin-block-start: calc(-1 * (dt('icon.size') / 2));\n        color: dt('datepicker.input.icon.color');\n        line-height: 1;\n        z-index: 1;\n    }\n\n    .p-datepicker:has(.p-datepicker-input:disabled) .p-datepicker-input-icon-container {\n        cursor: default;\n    }\n\n    .p-datepicker-fluid {\n        display: flex;\n    }\n\n    .p-datepicker-fluid:has(.p-datepicker-dropdown) .p-datepicker-input {\n        flex: 1 1 auto;\n        width: 1%;\n    }\n\n    .p-datepicker .p-datepicker-panel {\n        min-width: 100%;\n    }\n\n    .p-datepicker-panel {\n        width: auto;\n        padding: dt('datepicker.panel.padding');\n        background: dt('datepicker.panel.background');\n        color: dt('datepicker.panel.color');\n        border: 1px solid dt('datepicker.panel.border.color');\n        border-radius: dt('datepicker.panel.border.radius');\n        box-shadow: dt('datepicker.panel.shadow');\n    }\n\n    .p-datepicker-panel-inline {\n        display: inline-block;\n        overflow-x: auto;\n        box-shadow: none;\n    }\n\n    .p-datepicker-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: dt('datepicker.header.padding');\n        background: dt('datepicker.header.background');\n        color: dt('datepicker.header.color');\n        border-block-end: 1px solid dt('datepicker.header.border.color');\n    }\n\n    .p-datepicker-next-button:dir(rtl) {\n        order: -1;\n    }\n\n    .p-datepicker-prev-button:dir(rtl) {\n        order: 1;\n    }\n\n    .p-datepicker-title {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        gap: dt('datepicker.title.gap');\n        font-weight: dt('datepicker.title.font.weight');\n    }\n\n    .p-datepicker-select-year,\n    .p-datepicker-select-month {\n        border: none;\n        background: transparent;\n        margin: 0;\n        cursor: pointer;\n        font-weight: inherit;\n        transition:\n            background dt('datepicker.transition.duration'),\n            color dt('datepicker.transition.duration'),\n            border-color dt('datepicker.transition.duration'),\n            outline-color dt('datepicker.transition.duration'),\n            box-shadow dt('datepicker.transition.duration');\n    }\n\n    .p-datepicker-select-month {\n        padding: dt('datepicker.select.month.padding');\n        color: dt('datepicker.select.month.color');\n        border-radius: dt('datepicker.select.month.border.radius');\n    }\n\n    .p-datepicker-select-year {\n        padding: dt('datepicker.select.year.padding');\n        color: dt('datepicker.select.year.color');\n        border-radius: dt('datepicker.select.year.border.radius');\n    }\n\n    .p-datepicker-select-month:enabled:hover {\n        background: dt('datepicker.select.month.hover.background');\n        color: dt('datepicker.select.month.hover.color');\n    }\n\n    .p-datepicker-select-year:enabled:hover {\n        background: dt('datepicker.select.year.hover.background');\n        color: dt('datepicker.select.year.hover.color');\n    }\n\n    .p-datepicker-select-month:focus-visible,\n    .p-datepicker-select-year:focus-visible {\n        box-shadow: dt('datepicker.date.focus.ring.shadow');\n        outline: dt('datepicker.date.focus.ring.width') dt('datepicker.date.focus.ring.style') dt('datepicker.date.focus.ring.color');\n        outline-offset: dt('datepicker.date.focus.ring.offset');\n    }\n\n    .p-datepicker-calendar-container {\n        display: flex;\n    }\n\n    .p-datepicker-calendar-container .p-datepicker-calendar {\n        flex: 1 1 auto;\n        border-inline-start: 1px solid dt('datepicker.group.border.color');\n        padding-inline-end: dt('datepicker.group.gap');\n        padding-inline-start: dt('datepicker.group.gap');\n    }\n\n    .p-datepicker-calendar-container .p-datepicker-calendar:first-child {\n        padding-inline-start: 0;\n        border-inline-start: 0 none;\n    }\n\n    .p-datepicker-calendar-container .p-datepicker-calendar:last-child {\n        padding-inline-end: 0;\n    }\n\n    .p-datepicker-day-view {\n        width: 100%;\n        border-collapse: collapse;\n        font-size: 1rem;\n        margin: dt('datepicker.day.view.margin');\n    }\n\n    .p-datepicker-weekday-cell {\n        padding: dt('datepicker.week.day.padding');\n    }\n\n    .p-datepicker-weekday {\n        font-weight: dt('datepicker.week.day.font.weight');\n        color: dt('datepicker.week.day.color');\n    }\n\n    .p-datepicker-day-cell {\n        padding: dt('datepicker.date.padding');\n    }\n\n    .p-datepicker-day {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        cursor: pointer;\n        margin: 0 auto;\n        overflow: hidden;\n        position: relative;\n        width: dt('datepicker.date.width');\n        height: dt('datepicker.date.height');\n        border-radius: dt('datepicker.date.border.radius');\n        transition:\n            background dt('datepicker.transition.duration'),\n            color dt('datepicker.transition.duration'),\n            border-color dt('datepicker.transition.duration'),\n            box-shadow dt('datepicker.transition.duration'),\n            outline-color dt('datepicker.transition.duration');\n        border: 1px solid transparent;\n        outline-color: transparent;\n        color: dt('datepicker.date.color');\n    }\n\n    .p-datepicker-day:not(.p-datepicker-day-selected):not(.p-disabled):hover {\n        background: dt('datepicker.date.hover.background');\n        color: dt('datepicker.date.hover.color');\n    }\n\n    .p-datepicker-day:focus-visible {\n        box-shadow: dt('datepicker.date.focus.ring.shadow');\n        outline: dt('datepicker.date.focus.ring.width') dt('datepicker.date.focus.ring.style') dt('datepicker.date.focus.ring.color');\n        outline-offset: dt('datepicker.date.focus.ring.offset');\n    }\n\n    .p-datepicker-day-selected {\n        background: dt('datepicker.date.selected.background');\n        color: dt('datepicker.date.selected.color');\n    }\n\n    .p-datepicker-day-selected-range {\n        background: dt('datepicker.date.range.selected.background');\n        color: dt('datepicker.date.range.selected.color');\n    }\n\n    .p-datepicker-today > .p-datepicker-day {\n        background: dt('datepicker.today.background');\n        color: dt('datepicker.today.color');\n    }\n\n    .p-datepicker-today > .p-datepicker-day-selected {\n        background: dt('datepicker.date.selected.background');\n        color: dt('datepicker.date.selected.color');\n    }\n\n    .p-datepicker-today > .p-datepicker-day-selected-range {\n        background: dt('datepicker.date.range.selected.background');\n        color: dt('datepicker.date.range.selected.color');\n    }\n\n    .p-datepicker-weeknumber {\n        text-align: center;\n    }\n\n    .p-datepicker-month-view {\n        margin: dt('datepicker.month.view.margin');\n    }\n\n    .p-datepicker-month {\n        width: 33.3%;\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        cursor: pointer;\n        overflow: hidden;\n        position: relative;\n        padding: dt('datepicker.month.padding');\n        transition:\n            background dt('datepicker.transition.duration'),\n            color dt('datepicker.transition.duration'),\n            border-color dt('datepicker.transition.duration'),\n            box-shadow dt('datepicker.transition.duration'),\n            outline-color dt('datepicker.transition.duration');\n        border-radius: dt('datepicker.month.border.radius');\n        outline-color: transparent;\n        color: dt('datepicker.date.color');\n    }\n\n    .p-datepicker-month:not(.p-disabled):not(.p-datepicker-month-selected):hover {\n        color: dt('datepicker.date.hover.color');\n        background: dt('datepicker.date.hover.background');\n    }\n\n    .p-datepicker-month-selected {\n        color: dt('datepicker.date.selected.color');\n        background: dt('datepicker.date.selected.background');\n    }\n\n    .p-datepicker-month:not(.p-disabled):focus-visible {\n        box-shadow: dt('datepicker.date.focus.ring.shadow');\n        outline: dt('datepicker.date.focus.ring.width') dt('datepicker.date.focus.ring.style') dt('datepicker.date.focus.ring.color');\n        outline-offset: dt('datepicker.date.focus.ring.offset');\n    }\n\n    .p-datepicker-year-view {\n        margin: dt('datepicker.year.view.margin');\n    }\n\n    .p-datepicker-year {\n        width: 50%;\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        cursor: pointer;\n        overflow: hidden;\n        position: relative;\n        padding: dt('datepicker.year.padding');\n        transition:\n            background dt('datepicker.transition.duration'),\n            color dt('datepicker.transition.duration'),\n            border-color dt('datepicker.transition.duration'),\n            box-shadow dt('datepicker.transition.duration'),\n            outline-color dt('datepicker.transition.duration');\n        border-radius: dt('datepicker.year.border.radius');\n        outline-color: transparent;\n        color: dt('datepicker.date.color');\n    }\n\n    .p-datepicker-year:not(.p-disabled):not(.p-datepicker-year-selected):hover {\n        color: dt('datepicker.date.hover.color');\n        background: dt('datepicker.date.hover.background');\n    }\n\n    .p-datepicker-year-selected {\n        color: dt('datepicker.date.selected.color');\n        background: dt('datepicker.date.selected.background');\n    }\n\n    .p-datepicker-year:not(.p-disabled):focus-visible {\n        box-shadow: dt('datepicker.date.focus.ring.shadow');\n        outline: dt('datepicker.date.focus.ring.width') dt('datepicker.date.focus.ring.style') dt('datepicker.date.focus.ring.color');\n        outline-offset: dt('datepicker.date.focus.ring.offset');\n    }\n\n    .p-datepicker-buttonbar {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: dt('datepicker.buttonbar.padding');\n        border-block-start: 1px solid dt('datepicker.buttonbar.border.color');\n    }\n\n    .p-datepicker-buttonbar .p-button {\n        width: auto;\n    }\n\n    .p-datepicker-time-picker {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        border-block-start: 1px solid dt('datepicker.time.picker.border.color');\n        padding: 0;\n        gap: dt('datepicker.time.picker.gap');\n    }\n\n    .p-datepicker-calendar-container + .p-datepicker-time-picker {\n        padding: dt('datepicker.time.picker.padding');\n    }\n\n    .p-datepicker-time-picker > div {\n        display: flex;\n        align-items: center;\n        flex-direction: column;\n        gap: dt('datepicker.time.picker.button.gap');\n    }\n\n    .p-datepicker-time-picker span {\n        font-size: 1rem;\n    }\n\n    .p-datepicker-timeonly .p-datepicker-time-picker {\n        border-block-start: 0 none;\n    }\n\n    .p-datepicker-time-picker:dir(rtl) {\n        flex-direction: row-reverse;\n    }\n\n    .p-datepicker:has(.p-inputtext-sm) .p-datepicker-dropdown {\n        width: dt('datepicker.dropdown.sm.width');\n    }\n\n    .p-datepicker:has(.p-inputtext-sm) .p-datepicker-dropdown .p-icon,\n    .p-datepicker:has(.p-inputtext-sm) .p-datepicker-input-icon {\n        font-size: dt('form.field.sm.font.size');\n        width: dt('form.field.sm.font.size');\n        height: dt('form.field.sm.font.size');\n    }\n\n    .p-datepicker:has(.p-inputtext-lg) .p-datepicker-dropdown {\n        width: dt('datepicker.dropdown.lg.width');\n    }\n\n    .p-datepicker:has(.p-inputtext-lg) .p-datepicker-dropdown .p-icon,\n    .p-datepicker:has(.p-inputtext-lg) .p-datepicker-input-icon {\n        font-size: dt('form.field.lg.font.size');\n        width: dt('form.field.lg.font.size');\n        height: dt('form.field.lg.font.size');\n    }\n\n    .p-datepicker-clear-icon {\n        position: absolute;\n        top: 50%;\n        margin-top: -0.5rem;\n        cursor: pointer;\n        color: dt('form.field.icon.color');\n        inset-inline-end: dt('form.field.padding.x');\n    }\n\n    .p-datepicker:has(.p-datepicker-dropdown) .p-datepicker-clear-icon {\n        inset-inline-end: calc(dt('datepicker.dropdown.width') + dt('form.field.padding.x'));\n    }\n\n    .p-datepicker:has(.p-datepicker-input-icon-container) .p-datepicker-clear-icon {\n        inset-inline-end: calc((dt('form.field.padding.x') * 2) + dt('icon.size'));\n    }\n\n    .p-datepicker:has(.p-datepicker-clear-icon) .p-datepicker-input {\n        padding-inline-end: calc((dt('form.field.padding.x') * 2) + dt('icon.size'));\n    }\n\n    .p-datepicker:has(.p-datepicker-input-icon-container):has(.p-datepicker-clear-icon) .p-datepicker-input {\n        padding-inline-end: calc((dt('form.field.padding.x') * 3) + calc(dt('icon.size') * 2));\n    }\n\n    .p-inputgroup .p-datepicker-dropdown {\n        border-radius: 0;\n    }\n\n    .p-inputgroup > .p-datepicker:last-child:has(.p-datepicker-dropdown) > .p-datepicker-input {\n        border-start-end-radius: 0;\n        border-end-end-radius: 0;\n    }\n\n    .p-inputgroup > .p-datepicker:last-child .p-datepicker-dropdown {\n        border-start-end-radius: dt('datepicker.dropdown.border.radius');\n        border-end-end-radius: dt('datepicker.dropdown.border.radius');\n    }\n",classes:{root:function(e){var t=e.instance,n=e.state;return["p-datepicker p-component p-inputwrapper",{"p-invalid":t.$invalid,"p-inputwrapper-filled":t.$filled,"p-inputwrapper-focus":n.focused||n.overlayVisible,"p-focus":n.focused||n.overlayVisible,"p-datepicker-fluid":t.$fluid}]},pcInputText:"p-datepicker-input",clearIcon:"p-datepicker-clear-icon",dropdown:"p-datepicker-dropdown",inputIconContainer:"p-datepicker-input-icon-container",inputIcon:"p-datepicker-input-icon",panel:function(e){var t=e.props;return["p-datepicker-panel p-component",{"p-datepicker-panel-inline":t.inline,"p-disabled":t.disabled,"p-datepicker-timeonly":t.timeOnly}]},calendarContainer:"p-datepicker-calendar-container",calendar:"p-datepicker-calendar",header:"p-datepicker-header",pcPrevButton:"p-datepicker-prev-button",title:"p-datepicker-title",selectMonth:"p-datepicker-select-month",selectYear:"p-datepicker-select-year",decade:"p-datepicker-decade",pcNextButton:"p-datepicker-next-button",dayView:"p-datepicker-day-view",weekHeader:"p-datepicker-weekheader p-disabled",weekNumber:"p-datepicker-weeknumber",weekLabelContainer:"p-datepicker-weeklabel-container p-disabled",weekDayCell:"p-datepicker-weekday-cell",weekDay:"p-datepicker-weekday",dayCell:function(e){var t=e.date;return["p-datepicker-day-cell",{"p-datepicker-other-month":t.otherMonth,"p-datepicker-today":t.today}]},day:function(e){var t=e.instance,n=e.props,a=e.state,l=e.date,i="";if(t.isRangeSelection()&&t.isSelected(l)&&l.selectable){var o="string"==typeof a.rawValue[0]?t.parseValue(a.rawValue[0])[0]:a.rawValue[0],r="string"==typeof a.rawValue[1]?t.parseValue(a.rawValue[1])[0]:a.rawValue[1];i=t.isDateEquals(o,l)||t.isDateEquals(r,l)?"p-datepicker-day-selected":"p-datepicker-day-selected-range"}return["p-datepicker-day",{"p-datepicker-day-selected":!t.isRangeSelection()&&t.isSelected(l)&&l.selectable,"p-disabled":n.disabled||!l.selectable},i]},monthView:"p-datepicker-month-view",month:function(e){var t=e.instance,n=e.props,a=e.month,l=e.index;return["p-datepicker-month",{"p-datepicker-month-selected":t.isMonthSelected(l),"p-disabled":n.disabled||!a.selectable}]},yearView:"p-datepicker-year-view",year:function(e){var t=e.instance,n=e.props,a=e.year;return["p-datepicker-year",{"p-datepicker-year-selected":t.isYearSelected(a.value),"p-disabled":n.disabled||!a.selectable}]},timePicker:"p-datepicker-time-picker",hourPicker:"p-datepicker-hour-picker",pcIncrementButton:"p-datepicker-increment-button",pcDecrementButton:"p-datepicker-decrement-button",separator:"p-datepicker-separator",minutePicker:"p-datepicker-minute-picker",secondPicker:"p-datepicker-second-picker",ampmPicker:"p-datepicker-ampm-picker",buttonbar:"p-datepicker-buttonbar",pcTodayButton:"p-datepicker-today-button",pcClearButton:"p-datepicker-clear-button"},inlineStyles:{root:function(e){var t=e.props;return{position:"self"===t.appendTo||t.showClear?"relative":void 0}}}});function nt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=at(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=at(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==at(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lt(e){return function(e){if(Array.isArray(e))return rt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ot(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ot(e))||t){n&&(e=n);var a=0,l=function(){};return{s:l,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,r=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){r=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(r)throw i}}}}function ot(e,t){if(e){if("string"==typeof e)return rt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rt(e,t):void 0}}function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var st={name:"DatePicker",extends:{name:"BaseDatePicker",extends:f,props:{selectionMode:{type:String,default:"single"},dateFormat:{type:String,default:null},updateModelType:{type:String,default:"date"},inline:{type:Boolean,default:!1},showOtherMonths:{type:Boolean,default:!0},selectOtherMonths:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!1},iconDisplay:{type:String,default:"button"},icon:{type:String,default:void 0},prevIcon:{type:String,default:void 0},nextIcon:{type:String,default:void 0},incrementIcon:{type:String,default:void 0},decrementIcon:{type:String,default:void 0},numberOfMonths:{type:Number,default:1},responsiveOptions:Array,breakpoint:{type:String,default:"769px"},view:{type:String,default:"date"},minDate:{type:Date,value:null},maxDate:{type:Date,value:null},disabledDates:{type:Array,value:null},disabledDays:{type:Array,value:null},maxDateCount:{type:Number,value:null},showOnFocus:{type:Boolean,default:!0},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},showButtonBar:{type:Boolean,default:!1},shortYearCutoff:{type:String,default:"+10"},showTime:{type:Boolean,default:!1},timeOnly:{type:Boolean,default:!1},hourFormat:{type:String,default:"24"},stepHour:{type:Number,default:1},stepMinute:{type:Number,default:1},stepSecond:{type:Number,default:1},showSeconds:{type:Boolean,default:!1},hideOnDateTimeSelect:{type:Boolean,default:!1},hideOnRangeSelection:{type:Boolean,default:!1},timeSeparator:{type:String,default:":"},showWeek:{type:Boolean,default:!1},manualInput:{type:Boolean,default:!0},showClear:{type:Boolean,default:!1},appendTo:{type:[String,Object],default:"body"},readonly:{type:Boolean,default:!1},placeholder:{type:String,default:null},required:{type:Boolean,default:null},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},panelClass:{type:[String,Object],default:null},panelStyle:{type:Object,default:null},todayButtonProps:{type:Object,default:function(){return{severity:"secondary",text:!0,size:"small"}}},clearButtonProps:{type:Object,default:function(){return{severity:"secondary",text:!0,size:"small"}}},navigatorButtonProps:{type:Object,default:function(){return{severity:"secondary",text:!0,rounded:!0}}},timepickerButtonProps:{type:Object,default:function(){return{severity:"secondary",text:!0,rounded:!0}}},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:tt,provide:function(){return{$pcDatePicker:this,$parentInstance:this}}},inheritAttrs:!1,emits:["show","hide","input","month-change","year-change","date-select","today-click","clear-click","focus","blur","keydown"],inject:{$pcFluid:{default:null}},navigationState:null,timePickerChange:!1,scrollHandler:null,outsideClickListener:null,resizeListener:null,matchMediaListener:null,matchMediaOrientationListener:null,overlay:null,input:null,previousButton:null,nextButton:null,timePickerTimer:null,preventFocus:!1,typeUpdate:!1,data:function(){return{currentMonth:null,currentYear:null,currentHour:null,currentMinute:null,currentSecond:null,pm:null,focused:!1,overlayVisible:!1,currentView:this.view,query:null,queryMatches:!1,queryOrientation:null,focusedDateIndex:0,rawValue:null}},watch:{modelValue:{immediate:!0,handler:function(e){var t;this.updateCurrentMetaData(),this.rawValue="string"==typeof e?this.parseValue(e):e,this.typeUpdate||this.inline||!this.input||(this.input.value=this.formatValue(this.rawValue)),this.typeUpdate=!1,null!==(t=this.$refs.clearIcon)&&void 0!==t&&null!==(t=t.$el)&&void 0!==t&&t.style&&(this.$refs.clearIcon.$el.style.display=k(e)?"none":"block")}},showTime:function(){this.updateCurrentMetaData()},minDate:function(){this.updateCurrentMetaData()},maxDate:function(){this.updateCurrentMetaData()},months:function(){this.overlay&&(this.focused||(this.inline&&(this.preventFocus=!0),setTimeout(this.updateFocus,0)))},numberOfMonths:function(){this.destroyResponsiveStyleElement(),this.createResponsiveStyle()},responsiveOptions:function(){this.destroyResponsiveStyleElement(),this.createResponsiveStyle()},currentView:function(){var e=this;Promise.resolve(null).then(function(){return e.alignOverlay()})},view:function(e){this.currentView=e}},created:function(){this.updateCurrentMetaData()},mounted:function(){var e;this.createResponsiveStyle(),this.bindMatchMediaListener(),this.bindMatchMediaOrientationListener(),this.inline?this.disabled||(this.preventFocus=!0,this.initFocusableCell()):(this.input.value=this.inputFieldValue,null!==(e=this.$refs.clearIcon)&&void 0!==e&&null!==(e=e.$el)&&void 0!==e&&e.style&&(this.$refs.clearIcon.$el.style.display=this.$filled?"block":"none"))},updated:function(){this.overlay&&(this.preventFocus=!0,setTimeout(this.updateFocus,0)),this.input&&null!=this.selectionStart&&null!=this.selectionEnd&&(this.input.selectionStart=this.selectionStart,this.input.selectionEnd=this.selectionEnd,this.selectionStart=null,this.selectionEnd=null)},beforeUnmount:function(){this.timePickerTimer&&clearTimeout(this.timePickerTimer),this.destroyResponsiveStyleElement(),this.unbindOutsideClickListener(),this.unbindResizeListener(),this.unbindMatchMediaListener(),this.unbindMatchMediaOrientationListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&this.autoZIndex&&L.clear(this.overlay),this.overlay=null},methods:{isSelected:function(e){if(this.rawValue){if(this.isSingleSelection())return this.isDateEquals(this.parseValueForComparison(this.rawValue),e);if(this.isMultipleSelection()){var t,n=!1,a=it(this.rawValue);try{for(a.s();!(t=a.n()).done;){var l=t.value;if(n=this.isDateEquals(this.parseValueForComparison(l),e))break}}catch(r){a.e(r)}finally{a.f()}return n}if(this.isRangeSelection()){var i=this.parseValueForComparison(this.rawValue[0]);if(this.rawValue[1]){var o=this.parseValueForComparison(this.rawValue[1]);return this.isDateEquals(i,e)||this.isDateEquals(o,e)||this.isDateBetween(i,o,e)}return this.isDateEquals(i,e)}}return!1},isMonthSelected:function(e){var t,n,a,l=this;if(this.isMultipleSelection())return null===(t=this.rawValue)||void 0===t?void 0:t.some(function(t){var n=l.parseValueForComparison(t);return n.getMonth()===e&&n.getFullYear()===l.currentYear});if(this.isRangeSelection()){var i,o,r=null!==(i=this.rawValue)&&void 0!==i&&i[0]?this.parseValueForComparison(this.rawValue[0]):null,s=null!==(o=this.rawValue)&&void 0!==o&&o[1]?this.parseValueForComparison(this.rawValue[1]):null;if(s){var d=new Date(this.currentYear,e,1),u=new Date(r.getFullYear(),r.getMonth(),1),c=new Date(s.getFullYear(),s.getMonth(),1);return d>=u&&d<=c}return(null==r?void 0:r.getFullYear())===this.currentYear&&(null==r?void 0:r.getMonth())===e}return(null===(n=this.rawValue)||void 0===n?void 0:n.getMonth())===e&&(null===(a=this.rawValue)||void 0===a?void 0:a.getFullYear())===this.currentYear},isYearSelected:function(e){var t,n,a=this;if(this.isMultipleSelection())return null===(t=this.rawValue)||void 0===t?void 0:t.some(function(t){return a.parseValueForComparison(t).getFullYear()===e});if(this.isRangeSelection()){var l,i,o=null!==(l=this.rawValue)&&void 0!==l&&l[0]?this.parseValueForComparison(this.rawValue[0]):null,r=null!==(i=this.rawValue)&&void 0!==i&&i[1]?this.parseValueForComparison(this.rawValue[1]):null,s=o?o.getFullYear():null,d=r?r.getFullYear():null;return s===e||d===e||s<e&&d>e}return(null===(n=this.rawValue)||void 0===n?void 0:n.getFullYear())===e},isDateEquals:function(e,t){return!!e&&e.getDate()===t.day&&e.getMonth()===t.month&&e.getFullYear()===t.year},isDateBetween:function(e,t,n){var a=this.parseValueForComparison(e),l=this.parseValueForComparison(t);if(a&&l){var i=new Date(n.year,n.month,n.day);return a.getTime()<=i.getTime()&&l.getTime()>=i.getTime()}return!1},getFirstDayOfMonthIndex:function(e,t){var n=new Date;n.setDate(1),n.setMonth(e),n.setFullYear(t);var a=n.getDay()+this.sundayIndex;return a>=7?a-7:a},getDaysCountInMonth:function(e,t){return 32-this.daylightSavingAdjust(new Date(t,e,32)).getDate()},getDaysCountInPrevMonth:function(e,t){var n=this.getPreviousMonthAndYear(e,t);return this.getDaysCountInMonth(n.month,n.year)},getPreviousMonthAndYear:function(e,t){var n,a;return 0===e?(n=11,a=t-1):(n=e-1,a=t),{month:n,year:a}},getNextMonthAndYear:function(e,t){var n,a;return 11===e?(n=0,a=t+1):(n=e+1,a=t),{month:n,year:a}},daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},isToday:function(e,t,n,a){return e.getDate()===t&&e.getMonth()===n&&e.getFullYear()===a},isSelectable:function(e,t,n,a){var l=!0,i=!0,o=!0,r=!0;return!(a&&!this.selectOtherMonths)&&(this.minDate&&(this.minDate.getFullYear()>n||this.minDate.getFullYear()===n&&(this.minDate.getMonth()>t||this.minDate.getMonth()===t&&this.minDate.getDate()>e))&&(l=!1),this.maxDate&&(this.maxDate.getFullYear()<n||this.maxDate.getFullYear()===n&&(this.maxDate.getMonth()<t||this.maxDate.getMonth()===t&&this.maxDate.getDate()<e))&&(i=!1),this.disabledDates&&(o=!this.isDateDisabled(e,t,n)),this.disabledDays&&(r=!this.isDayDisabled(e,t,n)),l&&i&&o&&r)},onOverlayEnter:function(e){var t=this.inline?void 0:{position:"absolute",top:"0"};F(e,t),this.autoZIndex&&L.set("overlay",e,this.baseZIndex||this.$primevue.config.zIndex.overlay),this.$attrSelector&&e.setAttribute(this.$attrSelector,""),this.alignOverlay(),this.$emit("show")},onOverlayEnterComplete:function(){this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener()},onOverlayAfterLeave:function(e){this.autoZIndex&&L.clear(e)},onOverlayLeave:function(){this.currentView=this.view,this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.$emit("hide"),this.overlay=null},onPrevButtonClick:function(e){this.navigationState={backward:!0,button:!0},this.navBackward(e)},onNextButtonClick:function(e){this.navigationState={backward:!1,button:!0},this.navForward(e)},navBackward:function(e){e.preventDefault(),this.isEnabled()&&("month"===this.currentView?(this.decrementYear(),this.$emit("year-change",{month:this.currentMonth,year:this.currentYear})):"year"===this.currentView?this.decrementDecade():e.shiftKey?this.decrementYear():(0===this.currentMonth?(this.currentMonth=11,this.decrementYear()):this.currentMonth--,this.$emit("month-change",{month:this.currentMonth+1,year:this.currentYear})))},navForward:function(e){e.preventDefault(),this.isEnabled()&&("month"===this.currentView?(this.incrementYear(),this.$emit("year-change",{month:this.currentMonth,year:this.currentYear})):"year"===this.currentView?this.incrementDecade():e.shiftKey?this.incrementYear():(11===this.currentMonth?(this.currentMonth=0,this.incrementYear()):this.currentMonth++,this.$emit("month-change",{month:this.currentMonth+1,year:this.currentYear})))},decrementYear:function(){this.currentYear--},decrementDecade:function(){this.currentYear=this.currentYear-10},incrementYear:function(){this.currentYear++},incrementDecade:function(){this.currentYear=this.currentYear+10},switchToMonthView:function(e){this.currentView="month",setTimeout(this.updateFocus,0),e.preventDefault()},switchToYearView:function(e){this.currentView="year",setTimeout(this.updateFocus,0),e.preventDefault()},isEnabled:function(){return!this.disabled&&!this.readonly},updateCurrentTimeMeta:function(e){var t=e.getHours();"12"===this.hourFormat&&(this.pm=t>11,t>=12&&(t=12==t?12:t-12)),this.currentHour=Math.floor(t/this.stepHour)*this.stepHour,this.currentMinute=Math.floor(e.getMinutes()/this.stepMinute)*this.stepMinute,this.currentSecond=Math.floor(e.getSeconds()/this.stepSecond)*this.stepSecond},bindOutsideClickListener:function(){var e=this;this.outsideClickListener||(this.outsideClickListener=function(t){e.overlayVisible&&e.isOutsideClicked(t)&&(e.overlayVisible=!1)},document.addEventListener("mousedown",this.outsideClickListener))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("mousedown",this.outsideClickListener),this.outsideClickListener=null)},bindScrollListener:function(){var e=this;this.scrollHandler||(this.scrollHandler=new E(this.$refs.container,function(){e.overlayVisible&&(e.overlayVisible=!1)})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var e=this;this.resizeListener||(this.resizeListener=function(){e.overlayVisible&&!O()&&(e.overlayVisible=!1)},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},bindMatchMediaListener:function(){var e=this;if(!this.matchMediaListener){var t=matchMedia("(max-width: ".concat(this.breakpoint,")"));this.query=t,this.queryMatches=t.matches,this.matchMediaListener=function(){e.queryMatches=t.matches,e.mobileActive=!1},this.query.addEventListener("change",this.matchMediaListener)}},unbindMatchMediaListener:function(){this.matchMediaListener&&(this.query.removeEventListener("change",this.matchMediaListener),this.matchMediaListener=null)},bindMatchMediaOrientationListener:function(){var e=this;if(!this.matchMediaOrientationListener){var t=matchMedia("(orientation: portrait)");this.queryOrientation=t,this.matchMediaOrientationListener=function(){e.alignOverlay()},this.queryOrientation.addEventListener("change",this.matchMediaOrientationListener)}},unbindMatchMediaOrientationListener:function(){this.matchMediaOrientationListener&&(this.queryOrientation.removeEventListener("change",this.matchMediaOrientationListener),this.queryOrientation=null,this.matchMediaOrientationListener=null)},isOutsideClicked:function(e){var t=e.composedPath();return!(this.$el.isSameNode(e.target)||this.isNavIconClicked(e)||t.includes(this.$el)||t.includes(this.overlay))},isNavIconClicked:function(e){return this.previousButton&&(this.previousButton.isSameNode(e.target)||this.previousButton.contains(e.target))||this.nextButton&&(this.nextButton.isSameNode(e.target)||this.nextButton.contains(e.target))},alignOverlay:function(){this.overlay&&("self"===this.appendTo||this.inline?T(this.overlay,this.$el):("date"===this.view?(this.overlay.style.width=V(this.overlay)+"px",this.overlay.style.minWidth=V(this.$el)+"px"):this.overlay.style.width=V(this.$el)+"px",$(this.overlay,this.$el)))},onButtonClick:function(){this.isEnabled()&&(this.overlayVisible?this.overlayVisible=!1:(this.input.focus(),this.overlayVisible=!0))},isDateDisabled:function(e,t,n){if(this.disabledDates){var a,l=it(this.disabledDates);try{for(l.s();!(a=l.n()).done;){var i=a.value;if(i.getFullYear()===n&&i.getMonth()===t&&i.getDate()===e)return!0}}catch(o){l.e(o)}finally{l.f()}}return!1},isDayDisabled:function(e,t,n){if(this.disabledDays){var a=new Date(n,t,e).getDay();return-1!==this.disabledDays.indexOf(a)}return!1},onMonthDropdownChange:function(e){this.currentMonth=parseInt(e),this.$emit("month-change",{month:this.currentMonth+1,year:this.currentYear})},onYearDropdownChange:function(e){this.currentYear=parseInt(e),this.$emit("year-change",{month:this.currentMonth+1,year:this.currentYear})},onDateSelect:function(e,t){var n=this;if(!this.disabled&&t.selectable){if(I(this.overlay,'table td span:not([data-p-disabled="true"])').forEach(function(e){return e.tabIndex=-1}),e&&e.currentTarget.focus(),this.isMultipleSelection()&&this.isSelected(t)){var a=this.rawValue.filter(function(e){return!n.isDateEquals(n.parseValueForComparison(e),t)});this.updateModel(a)}else this.shouldSelectDate(t)&&(t.otherMonth?(this.currentMonth=t.month,this.currentYear=t.year,this.selectDate(t)):this.selectDate(t));!this.isSingleSelection()||this.showTime&&!this.hideOnDateTimeSelect||(this.input&&this.input.focus(),setTimeout(function(){n.overlayVisible=!1},150))}},selectDate:function(e){var t=this,n=new Date(e.year,e.month,e.day);this.showTime&&("12"===this.hourFormat&&12!==this.currentHour&&this.pm?n.setHours(this.currentHour+12):n.setHours(this.currentHour),n.setMinutes(this.currentMinute),n.setSeconds(this.showSeconds?this.currentSecond:0)),this.minDate&&this.minDate>n&&(n=this.minDate,this.currentHour=n.getHours(),this.currentMinute=n.getMinutes(),this.currentSecond=n.getSeconds()),this.maxDate&&this.maxDate<n&&(n=this.maxDate,this.currentHour=n.getHours(),this.currentMinute=n.getMinutes(),this.currentSecond=n.getSeconds());var a=null;if(this.isSingleSelection())a=n;else if(this.isMultipleSelection())a=this.rawValue?[].concat(lt(this.rawValue),[n]):[n];else if(this.isRangeSelection())if(this.rawValue&&this.rawValue.length){var l=this.parseValueForComparison(this.rawValue[0]),i=this.rawValue[1];!i&&n.getTime()>=l.getTime()?(i=n,this.focusedDateIndex=1):(l=n,i=null,this.focusedDateIndex=0),a=[l,i]}else a=[n,null],this.focusedDateIndex=0;null!==a&&this.updateModel(a),this.isRangeSelection()&&this.hideOnRangeSelection&&null!==a[1]&&setTimeout(function(){t.overlayVisible=!1},150),this.$emit("date-select",n)},updateModel:function(e){var t=this;if(this.rawValue=e,"date"===this.updateModelType)if(this.isSingleSelection())this.writeValue(e);else{var n=null;Array.isArray(e)&&(n=e.map(function(e){return t.parseValueForComparison(e)})),this.writeValue(n)}else if("string"==this.updateModelType)if(this.isSingleSelection())this.writeValue(this.formatDateTime(e));else if(this.isMultipleSelection()){var a=null;Array.isArray(e)&&(a=e.map(function(e){return t.formatDateTime(e)})),this.writeValue(a)}else if(this.isRangeSelection()){var l=null;Array.isArray(e)&&(l=e.map(function(e){return null==e?null:"string"==typeof e?e:t.formatDateTime(e)})),this.writeValue(l)}},shouldSelectDate:function(){return!this.isMultipleSelection()||null==this.maxDateCount||this.maxDateCount>(this.rawValue?this.rawValue.length:0)},isSingleSelection:function(){return"single"===this.selectionMode},isRangeSelection:function(){return"range"===this.selectionMode},isMultipleSelection:function(){return"multiple"===this.selectionMode},formatValue:function(e){if("string"==typeof e)return this.dateFormat?isNaN(new Date(e))?e:this.formatDate(new Date(e),this.dateFormat):e;var t="";if(e)try{if(this.isSingleSelection())t=this.formatDateTime(e);else if(this.isMultipleSelection())for(var n=0;n<e.length;n++)t+="string"==typeof e[n]?this.formatDateTime(this.parseValueForComparison(e[n])):this.formatDateTime(e[n]),n!==e.length-1&&(t+=", ");else if(this.isRangeSelection()&&e&&e.length){var a=this.parseValueForComparison(e[0]),l=this.parseValueForComparison(e[1]);t=this.formatDateTime(a),l&&(t+=" - "+this.formatDateTime(l))}}catch(i){t=e}return t},formatDateTime:function(e){var t=null;return D(e)&&M(e)?this.timeOnly?t=this.formatTime(e):(t=this.formatDate(e,this.datePattern),this.showTime&&(t+=" "+this.formatTime(e))):"string"===this.updateModelType&&(t=e),t},formatDate:function(e,t){if(!e)return"";var n,a=function(e){var a=n+1<t.length&&t.charAt(n+1)===e;return a&&n++,a},l=function(e,t,n){var l=""+t;if(a(e))for(;l.length<n;)l="0"+l;return l},i=function(e,t,n,l){return a(e)?l[t]:n[t]},o="",r=!1;if(e)for(n=0;n<t.length;n++)if(r)"'"!==t.charAt(n)||a("'")?o+=t.charAt(n):r=!1;else switch(t.charAt(n)){case"d":o+=l("d",e.getDate(),2);break;case"D":o+=i("D",e.getDay(),this.$primevue.config.locale.dayNamesShort,this.$primevue.config.locale.dayNames);break;case"o":o+=l("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":o+=l("m",e.getMonth()+1,2);break;case"M":o+=i("M",e.getMonth(),this.$primevue.config.locale.monthNamesShort,this.$primevue.config.locale.monthNames);break;case"y":o+=a("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":o+=e.getTime();break;case"!":o+=1e4*e.getTime()+this.ticksTo1970;break;case"'":a("'")?o+="'":r=!0;break;default:o+=t.charAt(n)}return o},formatTime:function(e){if(!e)return"";var t="",n=e.getHours(),a=e.getMinutes(),l=e.getSeconds();return"12"===this.hourFormat&&n>11&&12!==n&&(n-=12),"12"===this.hourFormat?t+=0===n?12:n<10?"0"+n:n:t+=n<10?"0"+n:n,t+=":",t+=a<10?"0"+a:a,this.showSeconds&&(t+=":",t+=l<10?"0"+l:l),"12"===this.hourFormat&&(t+=e.getHours()>11?" ".concat(this.$primevue.config.locale.pm):" ".concat(this.$primevue.config.locale.am)),t},onTodayButtonClick:function(e){var t=new Date,n={day:t.getDate(),month:t.getMonth(),year:t.getFullYear(),otherMonth:t.getMonth()!==this.currentMonth||t.getFullYear()!==this.currentYear,today:!0,selectable:!0};this.onDateSelect(null,n),this.$emit("today-click",t),e.preventDefault()},onClearButtonClick:function(e){this.updateModel(null),this.overlayVisible=!1,this.$emit("clear-click",e),e.preventDefault()},onTimePickerElementMouseDown:function(e,t,n){this.isEnabled()&&(this.repeat(e,null,t,n),e.preventDefault())},onTimePickerElementMouseUp:function(e){this.isEnabled()&&(this.clearTimePickerTimer(),this.updateModelTime(),e.preventDefault())},onTimePickerElementMouseLeave:function(){this.clearTimePickerTimer()},onTimePickerElementKeyDown:function(e,t,n){switch(e.code){case"Enter":case"NumpadEnter":case"Space":this.isEnabled()&&(this.repeat(e,null,t,n),e.preventDefault())}},onTimePickerElementKeyUp:function(e){switch(e.code){case"Enter":case"NumpadEnter":case"Space":this.isEnabled()&&(this.clearTimePickerTimer(),this.updateModelTime(),e.preventDefault())}},repeat:function(e,t,n,a){var l=this,i=t||500;switch(this.clearTimePickerTimer(),this.timePickerTimer=setTimeout(function(){l.repeat(e,100,n,a)},i),n){case 0:1===a?this.incrementHour(e):this.decrementHour(e);break;case 1:1===a?this.incrementMinute(e):this.decrementMinute(e);break;case 2:1===a?this.incrementSecond(e):this.decrementSecond(e)}},convertTo24Hour:function(e,t){return"12"==this.hourFormat?12===e?t?12:0:t?e+12:e:e},validateTime:function(e,t,n,a){var l=this.viewDate,i=this.convertTo24Hour(e,a);this.isRangeSelection()&&(l=this.rawValue[1]||this.rawValue[0]),this.isMultipleSelection()&&(l=this.rawValue[this.rawValue.length-1]);var o=l?l.toDateString():null;if(this.minDate&&o&&this.minDate.toDateString()===o){if(this.minDate.getHours()>i)return!1;if(this.minDate.getHours()===i){if(this.minDate.getMinutes()>t)return!1;if(this.minDate.getMinutes()===t&&this.minDate.getSeconds()>n)return!1}}if(this.maxDate&&o&&this.maxDate.toDateString()===o){if(this.maxDate.getHours()<i)return!1;if(this.maxDate.getHours()===i){if(this.maxDate.getMinutes()<t)return!1;if(this.maxDate.getMinutes()===t&&this.maxDate.getSeconds()<n)return!1}}return!0},incrementHour:function(e){var t=this.currentHour,n=this.currentHour+Number(this.stepHour),a=this.pm;"24"==this.hourFormat?n=n>=24?n-24:n:"12"==this.hourFormat&&(t<12&&n>11&&(a=!this.pm),n=n>=13?n-12:n),this.validateTime(n,this.currentMinute,this.currentSecond,a)&&(this.currentHour=n,this.pm=a),e.preventDefault()},decrementHour:function(e){var t=this.currentHour-this.stepHour,n=this.pm;"24"==this.hourFormat?t=t<0?24+t:t:"12"==this.hourFormat&&(12===this.currentHour&&(n=!this.pm),t=t<=0?12+t:t),this.validateTime(t,this.currentMinute,this.currentSecond,n)&&(this.currentHour=t,this.pm=n),e.preventDefault()},incrementMinute:function(e){var t=this.currentMinute+Number(this.stepMinute);this.validateTime(this.currentHour,t,this.currentSecond,this.pm)&&(this.currentMinute=t>59?t-60:t),e.preventDefault()},decrementMinute:function(e){var t=this.currentMinute-this.stepMinute;t=t<0?60+t:t,this.validateTime(this.currentHour,t,this.currentSecond,this.pm)&&(this.currentMinute=t),e.preventDefault()},incrementSecond:function(e){var t=this.currentSecond+Number(this.stepSecond);this.validateTime(this.currentHour,this.currentMinute,t,this.pm)&&(this.currentSecond=t>59?t-60:t),e.preventDefault()},decrementSecond:function(e){var t=this.currentSecond-this.stepSecond;t=t<0?60+t:t,this.validateTime(this.currentHour,this.currentMinute,t,this.pm)&&(this.currentSecond=t),e.preventDefault()},updateModelTime:function(){var e=this;this.timePickerChange=!0;var t=this.viewDate;this.isRangeSelection()&&(t=this.rawValue[this.focusedDateIndex]||this.rawValue[0]),this.isMultipleSelection()&&(t=this.rawValue[this.rawValue.length-1]),t=t?new Date(t.getTime()):new Date,"12"==this.hourFormat?12===this.currentHour?t.setHours(this.pm?12:0):t.setHours(this.pm?this.currentHour+12:this.currentHour):t.setHours(this.currentHour),t.setMinutes(this.currentMinute),t.setSeconds(this.currentSecond),this.isRangeSelection()&&(t=1===this.focusedDateIndex&&this.rawValue[1]?[this.rawValue[0],t]:0===this.focusedDateIndex?[t,this.rawValue[1]]:[t,null]),this.isMultipleSelection()&&(t=[].concat(lt(this.rawValue.slice(0,-1)),[t])),this.updateModel(t),this.$emit("date-select",t),setTimeout(function(){return e.timePickerChange=!1},0)},toggleAMPM:function(e){(this.validateTime(this.currentHour,this.currentMinute,this.currentSecond,!this.pm)||!this.maxDate&&!this.minDate)&&(this.pm=!this.pm,this.updateModelTime(),e.preventDefault())},clearTimePickerTimer:function(){this.timePickerTimer&&clearInterval(this.timePickerTimer)},onMonthSelect:function(e,t){t.month;var n=t.index;"month"===this.view?this.onDateSelect(e,{year:this.currentYear,month:n,day:1,selectable:!0}):(this.currentMonth=n,this.currentView="date",this.$emit("month-change",{month:this.currentMonth+1,year:this.currentYear})),setTimeout(this.updateFocus,0)},onYearSelect:function(e,t){"year"===this.view?this.onDateSelect(e,{year:t.value,month:0,day:1,selectable:!0}):(this.currentYear=t.value,this.currentView="month",this.$emit("year-change",{month:this.currentMonth+1,year:this.currentYear})),setTimeout(this.updateFocus,0)},updateCurrentMetaData:function(){var e=this.viewDate;if(this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),this.showTime||this.timeOnly){var t=e;this.isRangeSelection()&&this.rawValue&&this.rawValue[this.focusedDateIndex]&&(t=this.rawValue[this.focusedDateIndex]),this.updateCurrentTimeMeta(t)}},isValidSelection:function(e){var t=this;if(null==e)return!0;var n=!0;return this.isSingleSelection()?this.isSelectable(e.getDate(),e.getMonth(),e.getFullYear(),!1)||(n=!1):e.every(function(e){return t.isSelectable(e.getDate(),e.getMonth(),e.getFullYear(),!1)})&&this.isRangeSelection()&&(n=e.length>1&&e[1]>=e[0]),n},parseValue:function(e){if(!e||0===e.trim().length)return null;var t;if(this.isSingleSelection())t=this.parseDateTime(e);else if(this.isMultipleSelection()){t=[];var n,a=it(e.split(","));try{for(a.s();!(n=a.n()).done;){var l=n.value;t.push(this.parseDateTime(l.trim()))}}catch(r){a.e(r)}finally{a.f()}}else if(this.isRangeSelection()){var i=e.split(" - ");t=[];for(var o=0;o<i.length;o++)t[o]=this.parseDateTime(i[o].trim())}return t},parseValueForComparison:function(e){if("string"==typeof e){var t=this.parseValue(e);return this.isSingleSelection()?t:t[0]}return e},parseDateTime:function(e){var t,n=e.match(/(?:(.+?) )?(\d{2}:\d{2}(?::\d{2})?)(?: (am|pm))?/);if(this.timeOnly)t=new Date,this.populateTime(t,n[2],n[3]);else{var a=this.datePattern;this.showTime?(t=this.parseDate(n[1],a),this.populateTime(t,n[2],n[3])):t=this.parseDate(e,a)}return t},populateTime:function(e,t,n){if("12"==this.hourFormat&&!n)throw"Invalid Time";this.pm=n===this.$primevue.config.locale.pm||n===this.$primevue.config.locale.pm.toLowerCase();var a=this.parseTime(t);e.setHours(a.hour),e.setMinutes(a.minute),e.setSeconds(a.second)},parseTime:function(e){var t=e.split(":"),n=this.showSeconds?3:2,a=/^[0-9][0-9]$/;if(t.length!==n||!t[0].match(a)||!t[1].match(a)||this.showSeconds&&!t[2].match(a))throw"Invalid time";var l=parseInt(t[0]),i=parseInt(t[1]),o=this.showSeconds?parseInt(t[2]):null;if(isNaN(l)||isNaN(i)||l>23||i>59||"12"==this.hourFormat&&l>12||this.showSeconds&&(isNaN(o)||o>59))throw"Invalid time";return"12"==this.hourFormat&&12!==l&&this.pm?l+=12:"12"!=this.hourFormat||12!=l||this.pm||(l=0),{hour:l,minute:i,second:o}},parseDate:function(e,t){if(null==t||null==e)throw"Invalid arguments";if(""===(e="object"===at(e)?e.toString():e+""))return null;var n,a,l,i,o=0,r="string"!=typeof this.shortYearCutoff?this.shortYearCutoff:(new Date).getFullYear()%100+parseInt(this.shortYearCutoff,10),s=-1,d=-1,u=-1,c=-1,p=!1,v=function(e){var a=n+1<t.length&&t.charAt(n+1)===e;return a&&n++,a},h=function(t){var n=v(t),a="@"===t?14:"!"===t?20:"y"===t&&n?4:"o"===t?3:2,l=new RegExp("^\\d{"+("y"===t?a:1)+","+a+"}"),i=e.substring(o).match(l);if(!i)throw"Missing number at position "+o;return o+=i[0].length,parseInt(i[0],10)},f=function(t,n,a){for(var l=-1,i=v(t)?a:n,r=[],s=0;s<i.length;s++)r.push([s,i[s]]);r.sort(function(e,t){return-(e[1].length-t[1].length)});for(var d=0;d<r.length;d++){var u=r[d][1];if(e.substr(o,u.length).toLowerCase()===u.toLowerCase()){l=r[d][0],o+=u.length;break}}if(-1!==l)return l+1;throw"Unknown name at position "+o},m=function(){if(e.charAt(o)!==t.charAt(n))throw"Unexpected literal at position "+o;o++};for("month"===this.currentView&&(u=1),"year"===this.currentView&&(u=1,d=1),n=0;n<t.length;n++)if(p)"'"!==t.charAt(n)||v("'")?m():p=!1;else switch(t.charAt(n)){case"d":u=h("d");break;case"D":f("D",this.$primevue.config.locale.dayNamesShort,this.$primevue.config.locale.dayNames);break;case"o":c=h("o");break;case"m":d=h("m");break;case"M":d=f("M",this.$primevue.config.locale.monthNamesShort,this.$primevue.config.locale.monthNames);break;case"y":s=h("y");break;case"@":s=(i=new Date(h("@"))).getFullYear(),d=i.getMonth()+1,u=i.getDate();break;case"!":s=(i=new Date((h("!")-this.ticksTo1970)/1e4)).getFullYear(),d=i.getMonth()+1,u=i.getDate();break;case"'":v("'")?m():p=!0;break;default:m()}if(o<e.length&&(l=e.substr(o),!/^\s+/.test(l)))throw"Extra/unparsed characters found in date: "+l;if(-1===s?s=(new Date).getFullYear():s<100&&(s+=(new Date).getFullYear()-(new Date).getFullYear()%100+(s<=r?0:-100)),c>-1)for(d=1,u=c;!(u<=(a=this.getDaysCountInMonth(d-1,s)));)d++,u-=a;if((i=this.daylightSavingAdjust(new Date(s,d-1,u))).getFullYear()!==s||i.getMonth()+1!==d||i.getDate()!==u)throw"Invalid date";return i},getWeekNumber:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t.getTime())/864e5)/7)+1},onDateCellKeydown:function(e,t,n){e.preventDefault();var a=e.currentTarget,l=a.parentElement,i=C(l);switch(e.code){case"ArrowDown":if(a.tabIndex="-1",l.parentElement.nextElementSibling){var o=C(l.parentElement),r=Array.from(l.parentElement.parentElement.children).slice(o+1).find(function(e){var t=e.children[i].children[0];return!S(t,"data-p-disabled")});if(r){var s=r.children[i].children[0];s.tabIndex="0",s.focus()}else this.navigationState={backward:!1},this.navForward(e)}else this.navigationState={backward:!1},this.navForward(e);e.preventDefault();break;case"ArrowUp":if(a.tabIndex="-1",e.altKey)this.overlayVisible=!1,this.focused=!0;else if(l.parentElement.previousElementSibling){var d=C(l.parentElement),u=Array.from(l.parentElement.parentElement.children).slice(0,d).reverse().find(function(e){var t=e.children[i].children[0];return!S(t,"data-p-disabled")});if(u){var c=u.children[i].children[0];c.tabIndex="0",c.focus()}else this.navigationState={backward:!0},this.navBackward(e)}else this.navigationState={backward:!0},this.navBackward(e);e.preventDefault();break;case"ArrowLeft":if(a.tabIndex="-1",l.previousElementSibling){var p=Array.from(l.parentElement.children).slice(0,i).reverse().find(function(e){var t=e.children[0];return!S(t,"data-p-disabled")});if(p){var v=p.children[0];v.tabIndex="0",v.focus()}else this.navigateToMonth(e,!0,n)}else this.navigateToMonth(e,!0,n);e.preventDefault();break;case"ArrowRight":if(a.tabIndex="-1",l.nextElementSibling){var h=Array.from(l.parentElement.children).slice(i+1).find(function(e){var t=e.children[0];return!S(t,"data-p-disabled")});if(h){var f=h.children[0];f.tabIndex="0",f.focus()}else this.navigateToMonth(e,!1,n)}else this.navigateToMonth(e,!1,n);e.preventDefault();break;case"Enter":case"NumpadEnter":case"Space":this.onDateSelect(e,t),e.preventDefault();break;case"Escape":this.overlayVisible=!1,e.preventDefault();break;case"Tab":this.inline||this.trapFocus(e);break;case"Home":a.tabIndex="-1";var m=l.parentElement.children[0].children[0];S(m,"data-p-disabled")?this.navigateToMonth(e,!0,n):(m.tabIndex="0",m.focus()),e.preventDefault();break;case"End":a.tabIndex="-1";var b=l.parentElement,y=b.children[b.children.length-1].children[0];S(y,"data-p-disabled")?this.navigateToMonth(e,!1,n):(y.tabIndex="0",y.focus()),e.preventDefault();break;case"PageUp":a.tabIndex="-1",e.shiftKey?(this.navigationState={backward:!0},this.navBackward(e)):this.navigateToMonth(e,!0,n),e.preventDefault();break;case"PageDown":a.tabIndex="-1",e.shiftKey?(this.navigationState={backward:!1},this.navForward(e)):this.navigateToMonth(e,!1,n),e.preventDefault()}},navigateToMonth:function(e,t,n){if(t)if(1===this.numberOfMonths||0===n)this.navigationState={backward:!0},this.navBackward(e);else{var a=this.overlay.children[n-1],l=I(a,'table td span:not([data-p-disabled="true"]):not([data-p-ink="true"])'),i=l[l.length-1];i.tabIndex="0",i.focus()}else if(1===this.numberOfMonths||n===this.numberOfMonths-1)this.navigationState={backward:!1},this.navForward(e);else{var o=this.overlay.children[n+1],r=x(o,'table td span:not([data-p-disabled="true"]):not([data-p-ink="true"])');r.tabIndex="0",r.focus()}},onMonthCellKeydown:function(e,t){var n=e.currentTarget;switch(e.code){case"ArrowUp":case"ArrowDown":n.tabIndex="-1";var a=n.parentElement.children,l=C(n),i=a["ArrowDown"===e.code?l+3:l-3];i&&(i.tabIndex="0",i.focus()),e.preventDefault();break;case"ArrowLeft":n.tabIndex="-1";var o=n.previousElementSibling;o?(o.tabIndex="0",o.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break;case"ArrowRight":n.tabIndex="-1";var r=n.nextElementSibling;r?(r.tabIndex="0",r.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break;case"PageUp":if(e.shiftKey)return;this.navigationState={backward:!0},this.navBackward(e);break;case"PageDown":if(e.shiftKey)return;this.navigationState={backward:!1},this.navForward(e);break;case"Enter":case"NumpadEnter":case"Space":this.onMonthSelect(e,t),e.preventDefault();break;case"Escape":this.overlayVisible=!1,e.preventDefault();break;case"Tab":this.trapFocus(e)}},onYearCellKeydown:function(e,t){var n=e.currentTarget;switch(e.code){case"ArrowUp":case"ArrowDown":n.tabIndex="-1";var a=n.parentElement.children,l=C(n),i=a["ArrowDown"===e.code?l+2:l-2];i&&(i.tabIndex="0",i.focus()),e.preventDefault();break;case"ArrowLeft":n.tabIndex="-1";var o=n.previousElementSibling;o?(o.tabIndex="0",o.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break;case"ArrowRight":n.tabIndex="-1";var r=n.nextElementSibling;r?(r.tabIndex="0",r.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break;case"PageUp":if(e.shiftKey)return;this.navigationState={backward:!0},this.navBackward(e);break;case"PageDown":if(e.shiftKey)return;this.navigationState={backward:!1},this.navForward(e);break;case"Enter":case"NumpadEnter":case"Space":this.onYearSelect(e,t),e.preventDefault();break;case"Escape":this.overlayVisible=!1,e.preventDefault();break;case"Tab":this.trapFocus(e)}},updateFocus:function(){var e;if(this.navigationState){var t;if(this.navigationState.button)this.initFocusableCell(),this.navigationState.backward?this.previousButton&&this.previousButton.focus():this.nextButton&&this.nextButton.focus();else this.navigationState.backward?(t="month"===this.currentView?I(this.overlay,'[data-pc-section="monthview"] [data-pc-section="month"]:not([data-p-disabled="true"])'):"year"===this.currentView?I(this.overlay,'[data-pc-section="yearview"] [data-pc-section="year"]:not([data-p-disabled="true"])'):I(this.overlay,'table td span:not([data-p-disabled="true"]):not([data-p-ink="true"])'))&&t.length>0&&(e=t[t.length-1]):e="month"===this.currentView?x(this.overlay,'[data-pc-section="monthview"] [data-pc-section="month"]:not([data-p-disabled="true"])'):"year"===this.currentView?x(this.overlay,'[data-pc-section="yearview"] [data-pc-section="year"]:not([data-p-disabled="true"])'):x(this.overlay,'table td span:not([data-p-disabled="true"]):not([data-p-ink="true"])'),e&&(e.tabIndex="0",e.focus());this.navigationState=null}else this.initFocusableCell()},initFocusableCell:function(){var e;if("month"===this.currentView){var t=I(this.overlay,'[data-pc-section="monthview"] [data-pc-section="month"]'),n=x(this.overlay,'[data-pc-section="monthview"] [data-pc-section="month"][data-p-selected="true"]');t.forEach(function(e){return e.tabIndex=-1}),e=n||t[0]}else if("year"===this.currentView){var a=I(this.overlay,'[data-pc-section="yearview"] [data-pc-section="year"]'),l=x(this.overlay,'[data-pc-section="yearview"] [data-pc-section="year"][data-p-selected="true"]');a.forEach(function(e){return e.tabIndex=-1}),e=l||a[0]}else if(!(e=x(this.overlay,'span[data-p-selected="true"]'))){e=x(this.overlay,'td[data-p-today="true"] span:not([data-p-disabled="true"]):not([data-p-ink="true"])')||x(this.overlay,'.p-datepicker-calendar td span:not([data-p-disabled="true"]):not([data-p-ink="true"])')}e&&(e.tabIndex="0",this.preventFocus=!1)},trapFocus:function(e){e.preventDefault();var t=w(this.overlay);if(t&&t.length>0)if(document.activeElement){var n=t.indexOf(document.activeElement);if(e.shiftKey)-1===n||0===n?t[t.length-1].focus():t[n-1].focus();else if(-1===n)if(this.timeOnly)t[0].focus();else{var a=t.findIndex(function(e){return"SPAN"===e.tagName});-1===a&&(a=t.findIndex(function(e){return"BUTTON"===e.tagName})),-1!==a?t[a].focus():t[0].focus()}else n===t.length-1?t[0].focus():t[n+1].focus()}else t[0].focus()},onContainerButtonKeydown:function(e){switch(e.code){case"Tab":this.trapFocus(e);break;case"Escape":this.overlayVisible=!1,e.preventDefault()}this.$emit("keydown",e)},onInput:function(e){try{var t;this.selectionStart=this.input.selectionStart,this.selectionEnd=this.input.selectionEnd,null!==(t=this.$refs.clearIcon)&&void 0!==t&&null!==(t=t.$el)&&void 0!==t&&t.style&&(this.$refs.clearIcon.$el.style.display=k(e.target.value)?"none":"block");var n=this.parseValue(e.target.value);this.isValidSelection(n)&&(this.typeUpdate=!0,this.updateModel("string"===this.updateModelType?this.formatValue(n):n),this.updateCurrentMetaData())}catch(a){}this.$emit("input",e)},onInputClick:function(){this.showOnFocus&&this.isEnabled()&&!this.overlayVisible&&(this.overlayVisible=!0)},onFocus:function(e){this.showOnFocus&&this.isEnabled()&&(this.overlayVisible=!0),this.focused=!0,this.$emit("focus",e)},onBlur:function(e){var t,n,a;this.$emit("blur",{originalEvent:e,value:e.target.value}),null===(t=(n=this.formField).onBlur)||void 0===t||t.call(n),this.focused=!1,e.target.value=this.formatValue(this.rawValue),null!==(a=this.$refs.clearIcon)&&void 0!==a&&null!==(a=a.$el)&&void 0!==a&&a.style&&(this.$refs.clearIcon.$el.style.display=k(e.target.value)?"none":"block")},onKeyDown:function(e){if("ArrowDown"===e.code&&this.overlay)this.trapFocus(e);else if("ArrowDown"!==e.code||this.overlay){if("Escape"===e.code)this.overlayVisible&&(this.overlayVisible=!1,e.preventDefault(),e.stopPropagation());else if("Tab"===e.code)this.overlay&&w(this.overlay).forEach(function(e){return e.tabIndex="-1"}),this.overlayVisible&&(this.overlayVisible=!1);else if("Enter"===e.code){var t;if(this.manualInput&&null!==e.target.value&&""!==(null===(t=e.target.value)||void 0===t?void 0:t.trim()))try{var n=this.parseValue(e.target.value);this.isValidSelection(n)&&(this.overlayVisible=!1)}catch(a){}this.$emit("keydown",e)}}else this.overlayVisible=!0},overlayRef:function(e){this.overlay=e},inputRef:function(e){this.input=e?e.$el:void 0},previousButtonRef:function(e){this.previousButton=e?e.$el:void 0},nextButtonRef:function(e){this.nextButton=e?e.$el:void 0},getMonthName:function(e){return this.$primevue.config.locale.monthNames[e]},getYear:function(e){return"month"===this.currentView?this.currentYear:e.year},onClearClick:function(){this.updateModel(null),this.overlayVisible=!1},onOverlayClick:function(e){e.stopPropagation(),this.inline||g.emit("overlay-click",{originalEvent:e,target:this.$el})},onOverlayKeyDown:function(e){"Escape"===e.code&&(this.inline||(this.input.focus(),this.overlayVisible=!1,e.stopPropagation()))},onOverlayMouseUp:function(e){this.onOverlayClick(e)},createResponsiveStyle:function(){if(this.numberOfMonths>1&&this.responsiveOptions&&!this.isUnstyled){var e;this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",b(this.responsiveStyleElement,"nonce",null===(e=this.$primevue)||void 0===e||null===(e=e.config)||void 0===e||null===(e=e.csp)||void 0===e?void 0:e.nonce),document.body.appendChild(this.responsiveStyleElement));var t="";if(this.responsiveOptions)for(var n=y(),a=lt(this.responsiveOptions).filter(function(e){return!(!e.breakpoint||!e.numMonths)}).sort(function(e,t){return-1*n(e.breakpoint,t.breakpoint)}),l=0;l<a.length;l++){for(var i=a[l],o=i.breakpoint,r=i.numMonths,s="\n                            .p-datepicker-panel[".concat(this.$attrSelector,"] .p-datepicker-calendar:nth-child(").concat(r,") .p-datepicker-next-button {\n                                display: inline-flex;\n                            }\n                        "),d=r;d<this.numberOfMonths;d++)s+="\n                                .p-datepicker-panel[".concat(this.$attrSelector,"] .p-datepicker-calendar:nth-child(").concat(d+1,") {\n                                    display: none;\n                                }\n                            ");t+="\n                            @media screen and (max-width: ".concat(o,") {\n                                ").concat(s,"\n                            }\n                        ")}this.responsiveStyleElement.innerHTML=t}},destroyResponsiveStyleElement:function(){this.responsiveStyleElement&&(this.responsiveStyleElement.remove(),this.responsiveStyleElement=null)},dayDataP:function(e){return m({today:e.today,"other-month":e.otherMonth,selected:this.isSelected(e),disabled:!e.selectable})}},computed:{viewDate:function(){var e=this.rawValue;if(e&&Array.isArray(e))if(this.isRangeSelection())if(0===e.length)e=null;else if(1===e.length)e=e[0];else{var t=this.parseValueForComparison(e[0]),n=new Date(t.getFullYear(),t.getMonth()+this.numberOfMonths,1);if(e[1]<n)e=e[0];else{var a=this.parseValueForComparison(e[1]);e=new Date(a.getFullYear(),a.getMonth()-this.numberOfMonths+1,1)}}else this.isMultipleSelection()&&(e=e[e.length-1]);if(e&&"string"!=typeof e)return e;var l=new Date;return this.maxDate&&this.maxDate<l?this.maxDate:this.minDate&&this.minDate>l?this.minDate:l},inputFieldValue:function(){return this.formatValue(this.rawValue)},months:function(){for(var e=[],t=0;t<this.numberOfMonths;t++){var n=this.currentMonth+t,a=this.currentYear;n>11&&(n=n%11-1,a+=1);for(var l=[],i=this.getFirstDayOfMonthIndex(n,a),o=this.getDaysCountInMonth(n,a),r=this.getDaysCountInPrevMonth(n,a),s=1,d=new Date,u=[],c=Math.ceil((o+i)/7),p=0;p<c;p++){var v=[];if(0==p){for(var h=r-i+1;h<=r;h++){var f=this.getPreviousMonthAndYear(n,a);v.push({day:h,month:f.month,year:f.year,otherMonth:!0,today:this.isToday(d,h,f.month,f.year),selectable:this.isSelectable(h,f.month,f.year,!0)})}for(var m=7-v.length,b=0;b<m;b++)v.push({day:s,month:n,year:a,today:this.isToday(d,s,n,a),selectable:this.isSelectable(s,n,a,!1)}),s++}else for(var y=0;y<7;y++){if(s>o){var g=this.getNextMonthAndYear(n,a);v.push({day:s-o,month:g.month,year:g.year,otherMonth:!0,today:this.isToday(d,s-o,g.month,g.year),selectable:this.isSelectable(s-o,g.month,g.year,!0)})}else v.push({day:s,month:n,year:a,today:this.isToday(d,s,n,a),selectable:this.isSelectable(s,n,a,!1)});s++}this.showWeek&&u.push(this.getWeekNumber(new Date(v[0].year,v[0].month,v[0].day))),l.push(v)}e.push({month:n,year:a,dates:l,weekNumbers:u})}return e},weekDays:function(){for(var e=[],t=this.$primevue.config.locale.firstDayOfWeek,n=0;n<7;n++)e.push(this.$primevue.config.locale.dayNamesMin[t]),t=6==t?0:++t;return e},ticksTo1970:function(){return 24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7},sundayIndex:function(){return this.$primevue.config.locale.firstDayOfWeek>0?7-this.$primevue.config.locale.firstDayOfWeek:0},datePattern:function(){return this.dateFormat||this.$primevue.config.locale.dateFormat},monthPickerValues:function(){for(var e=this,t=[],n=function(t){if(e.minDate){var n=e.minDate.getMonth(),a=e.minDate.getFullYear();if(e.currentYear<a||e.currentYear===a&&t<n)return!1}if(e.maxDate){var l=e.maxDate.getMonth(),i=e.maxDate.getFullYear();if(e.currentYear>i||e.currentYear===i&&t>l)return!1}return!0},a=0;a<=11;a++)t.push({value:this.$primevue.config.locale.monthNamesShort[a],selectable:n(a)});return t},yearPickerValues:function(){for(var e=this,t=[],n=this.currentYear-this.currentYear%10,a=function(t){return!(e.minDate&&e.minDate.getFullYear()>t||e.maxDate&&e.maxDate.getFullYear()<t)},l=0;l<10;l++)t.push({value:n+l,selectable:a(n+l)});return t},formattedCurrentHour:function(){return 0==this.currentHour&&"12"==this.hourFormat?this.currentHour+12:this.currentHour<10?"0"+this.currentHour:this.currentHour},formattedCurrentMinute:function(){return this.currentMinute<10?"0"+this.currentMinute:this.currentMinute},formattedCurrentSecond:function(){return this.currentSecond<10?"0"+this.currentSecond:this.currentSecond},todayLabel:function(){return this.$primevue.config.locale.today},clearLabel:function(){return this.$primevue.config.locale.clear},weekHeaderLabel:function(){return this.$primevue.config.locale.weekHeader},monthNames:function(){return this.$primevue.config.locale.monthNames},switchViewButtonDisabled:function(){return this.numberOfMonths>1||this.disabled},isClearIconVisible:function(){return this.showClear&&null!=this.rawValue&&!this.disabled},panelId:function(){return this.$id+"_panel"},containerDataP:function(){return m({fluid:this.$fluid})},panelDataP:function(){return m(nt({inline:this.inline},"portal-"+this.appendTo,"portal-"+this.appendTo))},inputIconDataP:function(){return m(nt({},this.size,this.size))},timePickerDataP:function(){return m({"time-only":this.timeOnly})},hourIncrementCallbacks:function(){var e=this;return{mousedown:function(t){return e.onTimePickerElementMouseDown(t,0,1)},mouseup:function(t){return e.onTimePickerElementMouseUp(t)},mouseleave:function(){return e.onTimePickerElementMouseLeave()},keydown:function(t){return e.onTimePickerElementKeyDown(t,0,1)},keyup:function(t){return e.onTimePickerElementKeyUp(t)}}},hourDecrementCallbacks:function(){var e=this;return{mousedown:function(t){return e.onTimePickerElementMouseDown(t,0,-1)},mouseup:function(t){return e.onTimePickerElementMouseUp(t)},mouseleave:function(){return e.onTimePickerElementMouseLeave()},keydown:function(t){return e.onTimePickerElementKeyDown(t,0,-1)},keyup:function(t){return e.onTimePickerElementKeyUp(t)}}},minuteIncrementCallbacks:function(){var e=this;return{mousedown:function(t){return e.onTimePickerElementMouseDown(t,1,1)},mouseup:function(t){return e.onTimePickerElementMouseUp(t)},mouseleave:function(){return e.onTimePickerElementMouseLeave()},keydown:function(t){return e.onTimePickerElementKeyDown(t,1,1)},keyup:function(t){return e.onTimePickerElementKeyUp(t)}}},minuteDecrementCallbacks:function(){var e=this;return{mousedown:function(t){return e.onTimePickerElementMouseDown(t,1,-1)},mouseup:function(t){return e.onTimePickerElementMouseUp(t)},mouseleave:function(){return e.onTimePickerElementMouseLeave()},keydown:function(t){return e.onTimePickerElementKeyDown(t,1,-1)},keyup:function(t){return e.onTimePickerElementKeyUp(t)}}},secondIncrementCallbacks:function(){var e=this;return{mousedown:function(t){return e.onTimePickerElementMouseDown(t,2,1)},mouseup:function(t){return e.onTimePickerElementMouseUp(t)},mouseleave:function(){return e.onTimePickerElementMouseLeave()},keydown:function(t){return e.onTimePickerElementKeyDown(t,2,1)},keyup:function(t){return e.onTimePickerElementKeyUp(t)}}},secondDecrementCallbacks:function(){var e=this;return{mousedown:function(t){return e.onTimePickerElementMouseDown(t,2,-1)},mouseup:function(t){return e.onTimePickerElementMouseUp(t)},mouseleave:function(){return e.onTimePickerElementMouseLeave()},keydown:function(t){return e.onTimePickerElementKeyDown(t,2,-1)},keyup:function(t){return e.onTimePickerElementKeyUp(t)}}}},components:{InputText:h,Button:v,Portal:p,CalendarIcon:Qe,ChevronLeftIcon:c,ChevronRightIcon:u,ChevronUpIcon:Be,ChevronDownIcon:d,TimesIcon:s},directives:{ripple:r}},dt=["id","data-p"],ut=["disabled","aria-label","aria-expanded","aria-controls"],ct=["data-p"],pt=["id","role","aria-modal","aria-label","data-p"],vt=["disabled","aria-label"],ht=["disabled","aria-label"],ft=["disabled","aria-label"],mt=["disabled","aria-label"],bt=["data-p-disabled"],yt=["abbr"],gt=["data-p-disabled"],wt=["aria-label","data-p-today","data-p-other-month"],kt=["onClick","onKeydown","aria-selected","aria-disabled","data-p"],It=["onClick","onKeydown","data-p-disabled","data-p-selected"],xt=["onClick","onKeydown","data-p-disabled","data-p-selected"],Ct=["data-p"];st.render=function(e,t,o,r,s,d){var u=P("InputText"),c=P("TimesIcon"),p=P("Button"),v=P("Portal"),h=A("ripple");return a(),n("span",i({ref:"container",id:e.$id,class:e.cx("root"),style:e.sx("root"),"data-p":d.containerDataP},e.ptmi("root")),[e.inline?R("",!0):(a(),_(u,{key:0,ref:d.inputRef,id:e.inputId,role:"combobox",class:H([e.inputClass,e.cx("pcInputText")]),style:K(e.inputStyle),defaultValue:d.inputFieldValue,placeholder:e.placeholder,name:e.name,size:e.size,invalid:e.invalid,variant:e.variant,fluid:e.fluid,required:e.required,unstyled:e.unstyled,autocomplete:"off","aria-autocomplete":"none","aria-haspopup":"dialog","aria-expanded":s.overlayVisible,"aria-controls":s.overlayVisible?d.panelId:void 0,"aria-labelledby":e.ariaLabelledby,"aria-label":e.ariaLabel,inputmode:"none",disabled:e.disabled,readonly:!e.manualInput||e.readonly,tabindex:0,onInput:d.onInput,onClick:d.onInputClick,onFocus:d.onFocus,onBlur:d.onBlur,onKeydown:d.onKeyDown,"data-p-has-dropdown":e.showIcon&&"button"===e.iconDisplay&&!e.inline,"data-p-has-e-icon":e.showIcon&&"input"===e.iconDisplay&&!e.inline,pt:e.ptm("pcInputText")},null,8,["id","class","style","defaultValue","placeholder","name","size","invalid","variant","fluid","required","unstyled","aria-expanded","aria-controls","aria-labelledby","aria-label","disabled","readonly","onInput","onClick","onFocus","onBlur","onKeydown","data-p-has-dropdown","data-p-has-e-icon","pt"])),e.showClear&&!e.inline?B(e.$slots,"clearicon",{key:1,class:H(e.cx("clearIcon")),clearCallback:d.onClearClick},function(){return[U(c,i({ref:"clearIcon",class:[e.cx("clearIcon")],onClick:d.onClearClick},e.ptm("clearIcon")),null,16,["class","onClick"])]}):R("",!0),e.showIcon&&"button"===e.iconDisplay&&!e.inline?B(e.$slots,"dropdownbutton",{key:2,toggleCallback:d.onButtonClick},function(){return[l("button",i({class:e.cx("dropdown"),disabled:e.disabled,onClick:t[0]||(t[0]=function(){return d.onButtonClick&&d.onButtonClick.apply(d,arguments)}),type:"button","aria-label":e.$primevue.config.locale.chooseDate,"aria-haspopup":"dialog","aria-expanded":s.overlayVisible,"aria-controls":d.panelId},e.ptm("dropdown")),[B(e.$slots,"dropdownicon",{class:H(e.icon)},function(){return[(a(),_(N(e.icon?"span":"CalendarIcon"),i({class:e.icon},e.ptm("dropdownIcon")),null,16,["class"]))]})],16,ut)]}):e.showIcon&&"input"===e.iconDisplay&&!e.inline?(a(),n(z,{key:3},[e.$slots.inputicon||e.showIcon?(a(),n("span",i({key:0,class:e.cx("inputIconContainer"),"data-p":d.inputIconDataP},e.ptm("inputIconContainer")),[B(e.$slots,"inputicon",{class:H(e.cx("inputIcon")),clickCallback:d.onButtonClick},function(){return[(a(),_(N(e.icon?"i":"CalendarIcon"),i({class:[e.icon,e.cx("inputIcon")],onClick:d.onButtonClick},e.ptm("inputicon")),null,16,["class","onClick"]))]})],16,ct)):R("",!0)],64)):R("",!0),U(v,{appendTo:e.appendTo,disabled:e.inline},{default:j(function(){return[U(q,i({name:"p-anchored-overlay",onEnter:t[58]||(t[58]=function(e){return d.onOverlayEnter(e)}),onAfterEnter:d.onOverlayEnterComplete,onAfterLeave:d.onOverlayAfterLeave,onLeave:d.onOverlayLeave},e.ptm("transition")),{default:j(function(){return[e.inline||s.overlayVisible?(a(),n("div",i({key:0,ref:d.overlayRef,id:d.panelId,class:[e.cx("panel"),e.panelClass],style:e.panelStyle,role:e.inline?null:"dialog","aria-modal":e.inline?null:"true","aria-label":e.$primevue.config.locale.chooseDate,onClick:t[55]||(t[55]=function(){return d.onOverlayClick&&d.onOverlayClick.apply(d,arguments)}),onKeydown:t[56]||(t[56]=function(){return d.onOverlayKeyDown&&d.onOverlayKeyDown.apply(d,arguments)}),onMouseup:t[57]||(t[57]=function(){return d.onOverlayMouseUp&&d.onOverlayMouseUp.apply(d,arguments)}),"data-p":d.panelDataP},e.ptm("panel")),[e.timeOnly?R("",!0):(a(),n(z,{key:0},[l("div",i({class:e.cx("calendarContainer")},e.ptm("calendarContainer")),[(a(!0),n(z,null,Y(d.months,function(o,r){return a(),n("div",i({key:o.month+o.year,class:e.cx("calendar")},{ref_for:!0},e.ptm("calendar")),[l("div",i({class:e.cx("header")},{ref_for:!0},e.ptm("header")),[B(e.$slots,"header"),B(e.$slots,"prevbutton",{actionCallback:function(e){return d.onPrevButtonClick(e)},keydownCallback:function(e){return d.onContainerButtonKeydown(e)}},function(){return[W(U(p,i({ref_for:!0,ref:d.previousButtonRef,class:e.cx("pcPrevButton"),disabled:e.disabled,"aria-label":"year"===s.currentView?e.$primevue.config.locale.prevDecade:"month"===s.currentView?e.$primevue.config.locale.prevYear:e.$primevue.config.locale.prevMonth,unstyled:e.unstyled,onClick:d.onPrevButtonClick,onKeydown:d.onContainerButtonKeydown},{ref_for:!0},e.navigatorButtonProps,{pt:e.ptm("pcPrevButton"),"data-pc-group-section":"navigator"}),{icon:j(function(t){return[B(e.$slots,"previcon",{},function(){return[(a(),_(N(e.prevIcon?"span":"ChevronLeftIcon"),i({class:[e.prevIcon,t.class]},{ref_for:!0},e.ptm("pcPrevButton").icon),null,16,["class"]))]})]}),_:3},16,["class","disabled","aria-label","unstyled","onClick","onKeydown","pt"]),[[G,0===r]])]}),l("div",i({class:e.cx("title")},{ref_for:!0},e.ptm("title")),[e.$primevue.config.locale.showMonthAfterYear?(a(),n(z,{key:0},["year"!==s.currentView?(a(),n("button",i({key:0,type:"button",onClick:t[1]||(t[1]=function(){return d.switchToYearView&&d.switchToYearView.apply(d,arguments)}),onKeydown:t[2]||(t[2]=function(){return d.onContainerButtonKeydown&&d.onContainerButtonKeydown.apply(d,arguments)}),class:e.cx("selectYear"),disabled:d.switchViewButtonDisabled,"aria-label":e.$primevue.config.locale.chooseYear},{ref_for:!0},e.ptm("selectYear"),{"data-pc-group-section":"view"}),Z(d.getYear(o)),17,vt)):R("",!0),"date"===s.currentView?(a(),n("button",i({key:1,type:"button",onClick:t[3]||(t[3]=function(){return d.switchToMonthView&&d.switchToMonthView.apply(d,arguments)}),onKeydown:t[4]||(t[4]=function(){return d.onContainerButtonKeydown&&d.onContainerButtonKeydown.apply(d,arguments)}),class:e.cx("selectMonth"),disabled:d.switchViewButtonDisabled,"aria-label":e.$primevue.config.locale.chooseMonth},{ref_for:!0},e.ptm("selectMonth"),{"data-pc-group-section":"view"}),Z(d.getMonthName(o.month)),17,ht)):R("",!0)],64)):(a(),n(z,{key:1},["date"===s.currentView?(a(),n("button",i({key:0,type:"button",onClick:t[5]||(t[5]=function(){return d.switchToMonthView&&d.switchToMonthView.apply(d,arguments)}),onKeydown:t[6]||(t[6]=function(){return d.onContainerButtonKeydown&&d.onContainerButtonKeydown.apply(d,arguments)}),class:e.cx("selectMonth"),disabled:d.switchViewButtonDisabled,"aria-label":e.$primevue.config.locale.chooseMonth},{ref_for:!0},e.ptm("selectMonth"),{"data-pc-group-section":"view"}),Z(d.getMonthName(o.month)),17,ft)):R("",!0),"year"!==s.currentView?(a(),n("button",i({key:1,type:"button",onClick:t[7]||(t[7]=function(){return d.switchToYearView&&d.switchToYearView.apply(d,arguments)}),onKeydown:t[8]||(t[8]=function(){return d.onContainerButtonKeydown&&d.onContainerButtonKeydown.apply(d,arguments)}),class:e.cx("selectYear"),disabled:d.switchViewButtonDisabled,"aria-label":e.$primevue.config.locale.chooseYear},{ref_for:!0},e.ptm("selectYear"),{"data-pc-group-section":"view"}),Z(d.getYear(o)),17,mt)):R("",!0)],64)),"year"===s.currentView?(a(),n("span",i({key:2,class:e.cx("decade")},{ref_for:!0},e.ptm("decade")),[B(e.$slots,"decade",{years:d.yearPickerValues},function(){return[X(Z(d.yearPickerValues[0].value)+" - "+Z(d.yearPickerValues[d.yearPickerValues.length-1].value),1)]})],16)):R("",!0)],16),B(e.$slots,"nextbutton",{actionCallback:function(e){return d.onNextButtonClick(e)},keydownCallback:function(e){return d.onContainerButtonKeydown(e)}},function(){return[W(U(p,i({ref_for:!0,ref:d.nextButtonRef,class:e.cx("pcNextButton"),disabled:e.disabled,"aria-label":"year"===s.currentView?e.$primevue.config.locale.nextDecade:"month"===s.currentView?e.$primevue.config.locale.nextYear:e.$primevue.config.locale.nextMonth,unstyled:e.unstyled,onClick:d.onNextButtonClick,onKeydown:d.onContainerButtonKeydown},{ref_for:!0},e.navigatorButtonProps,{pt:e.ptm("pcNextButton"),"data-pc-group-section":"navigator"}),{icon:j(function(t){return[B(e.$slots,"nexticon",{},function(){return[(a(),_(N(e.nextIcon?"span":"ChevronRightIcon"),i({class:[e.nextIcon,t.class]},{ref_for:!0},e.ptm("pcNextButton").icon),null,16,["class"]))]})]}),_:3},16,["class","disabled","aria-label","unstyled","onClick","onKeydown","pt"]),[[G,1===e.numberOfMonths||r===e.numberOfMonths-1]])]})],16),"date"===s.currentView?(a(),n("table",i({key:0,class:e.cx("dayView"),role:"grid"},{ref_for:!0},e.ptm("dayView")),[l("thead",i({ref_for:!0},e.ptm("tableHeader")),[l("tr",i({ref_for:!0},e.ptm("tableHeaderRow")),[e.showWeek?(a(),n("th",i({key:0,scope:"col",class:e.cx("weekHeader")},{ref_for:!0},e.ptm("weekHeader",{context:{disabled:e.showWeek}}),{"data-p-disabled":e.showWeek,"data-pc-group-section":"tableheadercell"}),[B(e.$slots,"weekheaderlabel",{},function(){return[l("span",i({ref_for:!0},e.ptm("weekHeaderLabel",{context:{disabled:e.showWeek}}),{"data-pc-group-section":"tableheadercelllabel"}),Z(d.weekHeaderLabel),17)]})],16,bt)):R("",!0),(a(!0),n(z,null,Y(d.weekDays,function(t){return a(),n("th",i({key:t,scope:"col",abbr:t},{ref_for:!0},e.ptm("tableHeaderCell"),{"data-pc-group-section":"tableheadercell",class:e.cx("weekDayCell")}),[l("span",i({class:e.cx("weekDay")},{ref_for:!0},e.ptm("weekDay"),{"data-pc-group-section":"tableheadercelllabel"}),Z(t),17)],16,yt)}),128))],16)],16),l("tbody",i({ref_for:!0},e.ptm("tableBody")),[(a(!0),n(z,null,Y(o.dates,function(t,s){return a(),n("tr",i({key:t[0].day+""+t[0].month},{ref_for:!0},e.ptm("tableBodyRow")),[e.showWeek?(a(),n("td",i({key:0,class:e.cx("weekNumber")},{ref_for:!0},e.ptm("weekNumber"),{"data-pc-group-section":"tablebodycell"}),[l("span",i({class:e.cx("weekLabelContainer")},{ref_for:!0},e.ptm("weekLabelContainer",{context:{disabled:e.showWeek}}),{"data-p-disabled":e.showWeek,"data-pc-group-section":"tablebodycelllabel"}),[B(e.$slots,"weeklabel",{weekNumber:o.weekNumbers[s]},function(){return[o.weekNumbers[s]<10?(a(),n("span",i({key:0,style:{visibility:"hidden"}},{ref_for:!0},e.ptm("weekLabel")),"0",16)):R("",!0),X(" "+Z(o.weekNumbers[s]),1)]})],16,gt)],16)):R("",!0),(a(!0),n(z,null,Y(t,function(t){return a(),n("td",i({key:t.day+""+t.month,"aria-label":t.day,class:e.cx("dayCell",{date:t})},{ref_for:!0},e.ptm("dayCell",{context:{date:t,today:t.today,otherMonth:t.otherMonth,selected:d.isSelected(t),disabled:!t.selectable}}),{"data-p-today":t.today,"data-p-other-month":t.otherMonth,"data-pc-group-section":"tablebodycell"}),[e.showOtherMonths||!t.otherMonth?W((a(),n("span",i({key:0,class:e.cx("day",{date:t}),onClick:function(e){return d.onDateSelect(e,t)},draggable:"false",onKeydown:function(e){return d.onDateCellKeydown(e,t,r)},"aria-selected":d.isSelected(t),"aria-disabled":!t.selectable},{ref_for:!0},e.ptm("day",{context:{date:t,today:t.today,otherMonth:t.otherMonth,selected:d.isSelected(t),disabled:!t.selectable}}),{"data-p":d.dayDataP(t),"data-pc-group-section":"tablebodycelllabel"}),[B(e.$slots,"date",{date:t},function(){return[X(Z(t.day),1)]})],16,kt)),[[h]]):R("",!0),d.isSelected(t)?(a(),n("div",i({key:1,class:"p-hidden-accessible","aria-live":"polite"},{ref_for:!0},e.ptm("hiddenSelectedDay"),{"data-p-hidden-accessible":!0}),Z(t.day),17)):R("",!0)],16,wt)}),128))],16)}),128))],16)],16)):R("",!0)],16)}),128))],16),"month"===s.currentView?(a(),n("div",i({key:0,class:e.cx("monthView")},e.ptm("monthView")),[(a(!0),n(z,null,Y(d.monthPickerValues,function(t,l){return W((a(),n("span",i({key:t,onClick:function(e){return d.onMonthSelect(e,{month:t,index:l})},onKeydown:function(e){return d.onMonthCellKeydown(e,{month:t,index:l})},class:e.cx("month",{month:t,index:l})},{ref_for:!0},e.ptm("month",{context:{month:t,monthIndex:l,selected:d.isMonthSelected(l),disabled:!t.selectable}}),{"data-p-disabled":!t.selectable,"data-p-selected":d.isMonthSelected(l)}),[X(Z(t.value)+" ",1),d.isMonthSelected(l)?(a(),n("div",i({key:0,class:"p-hidden-accessible","aria-live":"polite"},{ref_for:!0},e.ptm("hiddenMonth"),{"data-p-hidden-accessible":!0}),Z(t.value),17)):R("",!0)],16,It)),[[h]])}),128))],16)):R("",!0),"year"===s.currentView?(a(),n("div",i({key:1,class:e.cx("yearView")},e.ptm("yearView")),[(a(!0),n(z,null,Y(d.yearPickerValues,function(t){return W((a(),n("span",i({key:t.value,onClick:function(e){return d.onYearSelect(e,t)},onKeydown:function(e){return d.onYearCellKeydown(e,t)},class:e.cx("year",{year:t})},{ref_for:!0},e.ptm("year",{context:{year:t,selected:d.isYearSelected(t.value),disabled:!t.selectable}}),{"data-p-disabled":!t.selectable,"data-p-selected":d.isYearSelected(t.value)}),[X(Z(t.value)+" ",1),d.isYearSelected(t.value)?(a(),n("div",i({key:0,class:"p-hidden-accessible","aria-live":"polite"},{ref_for:!0},e.ptm("hiddenYear"),{"data-p-hidden-accessible":!0}),Z(t.value),17)):R("",!0)],16,xt)),[[h]])}),128))],16)):R("",!0)],64)),(e.showTime||e.timeOnly)&&"date"===s.currentView?(a(),n("div",i({key:1,class:e.cx("timePicker"),"data-p":d.timePickerDataP},e.ptm("timePicker")),[l("div",i({class:e.cx("hourPicker")},e.ptm("hourPicker"),{"data-pc-group-section":"timepickerContainer"}),[B(e.$slots,"hourincrementbutton",{callbacks:d.hourIncrementCallbacks},function(){return[U(p,i({class:e.cx("pcIncrementButton"),"aria-label":e.$primevue.config.locale.nextHour,unstyled:e.unstyled,onMousedown:t[9]||(t[9]=function(e){return d.onTimePickerElementMouseDown(e,0,1)}),onMouseup:t[10]||(t[10]=function(e){return d.onTimePickerElementMouseUp(e)}),onKeydown:[d.onContainerButtonKeydown,t[12]||(t[12]=J(function(e){return d.onTimePickerElementMouseDown(e,0,1)},["enter"])),t[13]||(t[13]=J(function(e){return d.onTimePickerElementMouseDown(e,0,1)},["space"]))],onMouseleave:t[11]||(t[11]=function(e){return d.onTimePickerElementMouseLeave()}),onKeyup:[t[14]||(t[14]=J(function(e){return d.onTimePickerElementMouseUp(e)},["enter"])),t[15]||(t[15]=J(function(e){return d.onTimePickerElementMouseUp(e)},["space"]))]},e.timepickerButtonProps,{pt:e.ptm("pcIncrementButton"),"data-pc-group-section":"timepickerbutton"}),{icon:j(function(t){return[B(e.$slots,"incrementicon",{},function(){return[(a(),_(N(e.incrementIcon?"span":"ChevronUpIcon"),i({class:[e.incrementIcon,t.class]},e.ptm("pcIncrementButton").icon,{"data-pc-group-section":"timepickerlabel"}),null,16,["class"]))]})]}),_:3},16,["class","aria-label","unstyled","onKeydown","pt"])]}),l("span",i(e.ptm("hour"),{"data-pc-group-section":"timepickerlabel"}),Z(d.formattedCurrentHour),17),B(e.$slots,"hourdecrementbutton",{callbacks:d.hourDecrementCallbacks},function(){return[U(p,i({class:e.cx("pcDecrementButton"),"aria-label":e.$primevue.config.locale.prevHour,unstyled:e.unstyled,onMousedown:t[16]||(t[16]=function(e){return d.onTimePickerElementMouseDown(e,0,-1)}),onMouseup:t[17]||(t[17]=function(e){return d.onTimePickerElementMouseUp(e)}),onKeydown:[d.onContainerButtonKeydown,t[19]||(t[19]=J(function(e){return d.onTimePickerElementMouseDown(e,0,-1)},["enter"])),t[20]||(t[20]=J(function(e){return d.onTimePickerElementMouseDown(e,0,-1)},["space"]))],onMouseleave:t[18]||(t[18]=function(e){return d.onTimePickerElementMouseLeave()}),onKeyup:[t[21]||(t[21]=J(function(e){return d.onTimePickerElementMouseUp(e)},["enter"])),t[22]||(t[22]=J(function(e){return d.onTimePickerElementMouseUp(e)},["space"]))]},e.timepickerButtonProps,{pt:e.ptm("pcDecrementButton"),"data-pc-group-section":"timepickerbutton"}),{icon:j(function(t){return[B(e.$slots,"decrementicon",{},function(){return[(a(),_(N(e.decrementIcon?"span":"ChevronDownIcon"),i({class:[e.decrementIcon,t.class]},e.ptm("pcDecrementButton").icon,{"data-pc-group-section":"timepickerlabel"}),null,16,["class"]))]})]}),_:3},16,["class","aria-label","unstyled","onKeydown","pt"])]})],16),l("div",i(e.ptm("separatorContainer"),{"data-pc-group-section":"timepickerContainer"}),[l("span",i(e.ptm("separator"),{"data-pc-group-section":"timepickerlabel"}),Z(e.timeSeparator),17)],16),l("div",i({class:e.cx("minutePicker")},e.ptm("minutePicker"),{"data-pc-group-section":"timepickerContainer"}),[B(e.$slots,"minuteincrementbutton",{callbacks:d.minuteIncrementCallbacks},function(){return[U(p,i({class:e.cx("pcIncrementButton"),"aria-label":e.$primevue.config.locale.nextMinute,disabled:e.disabled,unstyled:e.unstyled,onMousedown:t[23]||(t[23]=function(e){return d.onTimePickerElementMouseDown(e,1,1)}),onMouseup:t[24]||(t[24]=function(e){return d.onTimePickerElementMouseUp(e)}),onKeydown:[d.onContainerButtonKeydown,t[26]||(t[26]=J(function(e){return d.onTimePickerElementMouseDown(e,1,1)},["enter"])),t[27]||(t[27]=J(function(e){return d.onTimePickerElementMouseDown(e,1,1)},["space"]))],onMouseleave:t[25]||(t[25]=function(e){return d.onTimePickerElementMouseLeave()}),onKeyup:[t[28]||(t[28]=J(function(e){return d.onTimePickerElementMouseUp(e)},["enter"])),t[29]||(t[29]=J(function(e){return d.onTimePickerElementMouseUp(e)},["space"]))]},e.timepickerButtonProps,{pt:e.ptm("pcIncrementButton"),"data-pc-group-section":"timepickerbutton"}),{icon:j(function(t){return[B(e.$slots,"incrementicon",{},function(){return[(a(),_(N(e.incrementIcon?"span":"ChevronUpIcon"),i({class:[e.incrementIcon,t.class]},e.ptm("pcIncrementButton").icon,{"data-pc-group-section":"timepickerlabel"}),null,16,["class"]))]})]}),_:3},16,["class","aria-label","disabled","unstyled","onKeydown","pt"])]}),l("span",i(e.ptm("minute"),{"data-pc-group-section":"timepickerlabel"}),Z(d.formattedCurrentMinute),17),B(e.$slots,"minutedecrementbutton",{callbacks:d.minuteDecrementCallbacks},function(){return[U(p,i({class:e.cx("pcDecrementButton"),"aria-label":e.$primevue.config.locale.prevMinute,disabled:e.disabled,unstyled:e.unstyled,onMousedown:t[30]||(t[30]=function(e){return d.onTimePickerElementMouseDown(e,1,-1)}),onMouseup:t[31]||(t[31]=function(e){return d.onTimePickerElementMouseUp(e)}),onKeydown:[d.onContainerButtonKeydown,t[33]||(t[33]=J(function(e){return d.onTimePickerElementMouseDown(e,1,-1)},["enter"])),t[34]||(t[34]=J(function(e){return d.onTimePickerElementMouseDown(e,1,-1)},["space"]))],onMouseleave:t[32]||(t[32]=function(e){return d.onTimePickerElementMouseLeave()}),onKeyup:[t[35]||(t[35]=J(function(e){return d.onTimePickerElementMouseUp(e)},["enter"])),t[36]||(t[36]=J(function(e){return d.onTimePickerElementMouseUp(e)},["space"]))]},e.timepickerButtonProps,{pt:e.ptm("pcDecrementButton"),"data-pc-group-section":"timepickerbutton"}),{icon:j(function(t){return[B(e.$slots,"decrementicon",{},function(){return[(a(),_(N(e.decrementIcon?"span":"ChevronDownIcon"),i({class:[e.decrementIcon,t.class]},e.ptm("pcDecrementButton").icon,{"data-pc-group-section":"timepickerlabel"}),null,16,["class"]))]})]}),_:3},16,["class","aria-label","disabled","unstyled","onKeydown","pt"])]})],16),e.showSeconds?(a(),n("div",i({key:0,class:e.cx("separatorContainer")},e.ptm("separatorContainer"),{"data-pc-group-section":"timepickerContainer"}),[l("span",i(e.ptm("separator"),{"data-pc-group-section":"timepickerlabel"}),Z(e.timeSeparator),17)],16)):R("",!0),e.showSeconds?(a(),n("div",i({key:1,class:e.cx("secondPicker")},e.ptm("secondPicker"),{"data-pc-group-section":"timepickerContainer"}),[B(e.$slots,"secondincrementbutton",{callbacks:d.secondIncrementCallbacks},function(){return[U(p,i({class:e.cx("pcIncrementButton"),"aria-label":e.$primevue.config.locale.nextSecond,disabled:e.disabled,unstyled:e.unstyled,onMousedown:t[37]||(t[37]=function(e){return d.onTimePickerElementMouseDown(e,2,1)}),onMouseup:t[38]||(t[38]=function(e){return d.onTimePickerElementMouseUp(e)}),onKeydown:[d.onContainerButtonKeydown,t[40]||(t[40]=J(function(e){return d.onTimePickerElementMouseDown(e,2,1)},["enter"])),t[41]||(t[41]=J(function(e){return d.onTimePickerElementMouseDown(e,2,1)},["space"]))],onMouseleave:t[39]||(t[39]=function(e){return d.onTimePickerElementMouseLeave()}),onKeyup:[t[42]||(t[42]=J(function(e){return d.onTimePickerElementMouseUp(e)},["enter"])),t[43]||(t[43]=J(function(e){return d.onTimePickerElementMouseUp(e)},["space"]))]},e.timepickerButtonProps,{pt:e.ptm("pcIncrementButton"),"data-pc-group-section":"timepickerbutton"}),{icon:j(function(t){return[B(e.$slots,"incrementicon",{},function(){return[(a(),_(N(e.incrementIcon?"span":"ChevronUpIcon"),i({class:[e.incrementIcon,t.class]},e.ptm("pcIncrementButton").icon,{"data-pc-group-section":"timepickerlabel"}),null,16,["class"]))]})]}),_:3},16,["class","aria-label","disabled","unstyled","onKeydown","pt"])]}),l("span",i(e.ptm("second"),{"data-pc-group-section":"timepickerlabel"}),Z(d.formattedCurrentSecond),17),B(e.$slots,"seconddecrementbutton",{callbacks:d.secondDecrementCallbacks},function(){return[U(p,i({class:e.cx("pcDecrementButton"),"aria-label":e.$primevue.config.locale.prevSecond,disabled:e.disabled,unstyled:e.unstyled,onMousedown:t[44]||(t[44]=function(e){return d.onTimePickerElementMouseDown(e,2,-1)}),onMouseup:t[45]||(t[45]=function(e){return d.onTimePickerElementMouseUp(e)}),onKeydown:[d.onContainerButtonKeydown,t[47]||(t[47]=J(function(e){return d.onTimePickerElementMouseDown(e,2,-1)},["enter"])),t[48]||(t[48]=J(function(e){return d.onTimePickerElementMouseDown(e,2,-1)},["space"]))],onMouseleave:t[46]||(t[46]=function(e){return d.onTimePickerElementMouseLeave()}),onKeyup:[t[49]||(t[49]=J(function(e){return d.onTimePickerElementMouseUp(e)},["enter"])),t[50]||(t[50]=J(function(e){return d.onTimePickerElementMouseUp(e)},["space"]))]},e.timepickerButtonProps,{pt:e.ptm("pcDecrementButton"),"data-pc-group-section":"timepickerbutton"}),{icon:j(function(t){return[B(e.$slots,"decrementicon",{},function(){return[(a(),_(N(e.decrementIcon?"span":"ChevronDownIcon"),i({class:[e.decrementIcon,t.class]},e.ptm("pcDecrementButton").icon,{"data-pc-group-section":"timepickerlabel"}),null,16,["class"]))]})]}),_:3},16,["class","aria-label","disabled","unstyled","onKeydown","pt"])]})],16)):R("",!0),"12"==e.hourFormat?(a(),n("div",i({key:2,class:e.cx("separatorContainer")},e.ptm("separatorContainer"),{"data-pc-group-section":"timepickerContainer"}),[l("span",i(e.ptm("separator"),{"data-pc-group-section":"timepickerlabel"}),Z(e.timeSeparator),17)],16)):R("",!0),"12"==e.hourFormat?(a(),n("div",i({key:3,class:e.cx("ampmPicker")},e.ptm("ampmPicker")),[B(e.$slots,"ampmincrementbutton",{toggleCallback:function(e){return d.toggleAMPM(e)},keydownCallback:function(e){return d.onContainerButtonKeydown(e)}},function(){return[U(p,i({class:e.cx("pcIncrementButton"),"aria-label":e.$primevue.config.locale.am,disabled:e.disabled,unstyled:e.unstyled,onClick:t[51]||(t[51]=function(e){return d.toggleAMPM(e)}),onKeydown:d.onContainerButtonKeydown},e.timepickerButtonProps,{pt:e.ptm("pcIncrementButton"),"data-pc-group-section":"timepickerbutton"}),{icon:j(function(t){return[B(e.$slots,"incrementicon",{class:H(e.cx("incrementIcon"))},function(){return[(a(),_(N(e.incrementIcon?"span":"ChevronUpIcon"),i({class:[e.cx("incrementIcon"),t.class]},e.ptm("pcIncrementButton").icon,{"data-pc-group-section":"timepickerlabel"}),null,16,["class"]))]})]}),_:3},16,["class","aria-label","disabled","unstyled","onKeydown","pt"])]}),l("span",i(e.ptm("ampm"),{"data-pc-group-section":"timepickerlabel"}),Z(s.pm?e.$primevue.config.locale.pm:e.$primevue.config.locale.am),17),B(e.$slots,"ampmdecrementbutton",{toggleCallback:function(e){return d.toggleAMPM(e)},keydownCallback:function(e){return d.onContainerButtonKeydown(e)}},function(){return[U(p,i({class:e.cx("pcDecrementButton"),"aria-label":e.$primevue.config.locale.pm,disabled:e.disabled,onClick:t[52]||(t[52]=function(e){return d.toggleAMPM(e)}),onKeydown:d.onContainerButtonKeydown},e.timepickerButtonProps,{pt:e.ptm("pcDecrementButton"),"data-pc-group-section":"timepickerbutton"}),{icon:j(function(t){return[B(e.$slots,"decrementicon",{class:H(e.cx("decrementIcon"))},function(){return[(a(),_(N(e.decrementIcon?"span":"ChevronDownIcon"),i({class:[e.cx("decrementIcon"),t.class]},e.ptm("pcDecrementButton").icon,{"data-pc-group-section":"timepickerlabel"}),null,16,["class"]))]})]}),_:3},16,["class","aria-label","disabled","onKeydown","pt"])]})],16)):R("",!0)],16,Ct)):R("",!0),e.showButtonBar?(a(),n("div",i({key:2,class:e.cx("buttonbar")},e.ptm("buttonbar")),[B(e.$slots,"buttonbar",{todayCallback:function(e){return d.onTodayButtonClick(e)},clearCallback:function(e){return d.onClearButtonClick(e)}},function(){return[B(e.$slots,"todaybutton",{actionCallback:function(e){return d.onTodayButtonClick(e)},keydownCallback:function(e){return d.onContainerButtonKeydown(e)}},function(){return[U(p,i({label:d.todayLabel,onClick:t[53]||(t[53]=function(e){return d.onTodayButtonClick(e)}),class:e.cx("pcTodayButton"),unstyled:e.unstyled,onKeydown:d.onContainerButtonKeydown},e.todayButtonProps,{pt:e.ptm("pcTodayButton"),"data-pc-group-section":"button"}),null,16,["label","class","unstyled","onKeydown","pt"])]}),B(e.$slots,"clearbutton",{actionCallback:function(e){return d.onClearButtonClick(e)},keydownCallback:function(e){return d.onContainerButtonKeydown(e)}},function(){return[U(p,i({label:d.clearLabel,onClick:t[54]||(t[54]=function(e){return d.onClearButtonClick(e)}),class:e.cx("pcClearButton"),unstyled:e.unstyled,onKeydown:d.onContainerButtonKeydown},e.clearButtonProps,{pt:e.ptm("pcClearButton"),"data-pc-group-section":"button"}),null,16,["label","class","unstyled","onKeydown","pt"])]})]})],16)):R("",!0),B(e.$slots,"footer")],16,pt)):R("",!0)]}),_:3},16,["onAfterEnter","onAfterLeave","onLeave"])]}),_:3},8,["appendTo","disabled"])],16,dt)};var St={name:"Calendar",extends:st,mounted:function(){}},Dt=o.extend({name:"chip",style:"\n    .p-chip {\n        display: inline-flex;\n        align-items: center;\n        background: dt('chip.background');\n        color: dt('chip.color');\n        border-radius: dt('chip.border.radius');\n        padding-block: dt('chip.padding.y');\n        padding-inline: dt('chip.padding.x');\n        gap: dt('chip.gap');\n    }\n\n    .p-chip-icon {\n        color: dt('chip.icon.color');\n        font-size: dt('chip.icon.font.size');\n        width: dt('chip.icon.size');\n        height: dt('chip.icon.size');\n    }\n\n    .p-chip-image {\n        border-radius: 50%;\n        width: dt('chip.image.width');\n        height: dt('chip.image.height');\n        margin-inline-start: calc(-1 * dt('chip.padding.y'));\n    }\n\n    .p-chip:has(.p-chip-remove-icon) {\n        padding-inline-end: dt('chip.padding.y');\n    }\n\n    .p-chip:has(.p-chip-image) {\n        padding-block-start: calc(dt('chip.padding.y') / 2);\n        padding-block-end: calc(dt('chip.padding.y') / 2);\n    }\n\n    .p-chip-remove-icon {\n        cursor: pointer;\n        font-size: dt('chip.remove.icon.size');\n        width: dt('chip.remove.icon.size');\n        height: dt('chip.remove.icon.size');\n        color: dt('chip.remove.icon.color');\n        border-radius: 50%;\n        transition:\n            outline-color dt('chip.transition.duration'),\n            box-shadow dt('chip.transition.duration');\n        outline-color: transparent;\n    }\n\n    .p-chip-remove-icon:focus-visible {\n        box-shadow: dt('chip.remove.icon.focus.ring.shadow');\n        outline: dt('chip.remove.icon.focus.ring.width') dt('chip.remove.icon.focus.ring.style') dt('chip.remove.icon.focus.ring.color');\n        outline-offset: dt('chip.remove.icon.focus.ring.offset');\n    }\n",classes:{root:"p-chip p-component",image:"p-chip-image",icon:"p-chip-icon",label:"p-chip-label",removeIcon:"p-chip-remove-icon"}}),Mt={name:"Chip",extends:{name:"BaseChip",extends:ee,props:{label:{type:[String,Number],default:null},icon:{type:String,default:null},image:{type:String,default:null},removable:{type:Boolean,default:!1},removeIcon:{type:String,default:void 0}},style:Dt,provide:function(){return{$pcChip:this,$parentInstance:this}}},inheritAttrs:!1,emits:["remove"],data:function(){return{visible:!0}},methods:{onKeydown:function(e){"Enter"!==e.key&&"Backspace"!==e.key||this.close(e)},close:function(e){this.visible=!1,this.$emit("remove",e)}},computed:{dataP:function(){return m({removable:this.removable})}},components:{TimesCircleIcon:Q}},Tt=["aria-label","data-p"],Vt=["src"];Mt.render=function(e,t,l,o,r,s){return r.visible?(a(),n("div",i({key:0,class:e.cx("root"),"aria-label":e.label},e.ptmi("root"),{"data-p":s.dataP}),[B(e.$slots,"default",{},function(){return[e.image?(a(),n("img",i({key:0,src:e.image},e.ptm("image"),{class:e.cx("image")}),null,16,Vt)):e.$slots.icon?(a(),_(N(e.$slots.icon),i({key:1,class:e.cx("icon")},e.ptm("icon")),null,16,["class"])):e.icon?(a(),n("span",i({key:2,class:[e.cx("icon"),e.icon]},e.ptm("icon")),null,16)):R("",!0),null!==e.label?(a(),n("div",i({key:3,class:e.cx("label")},e.ptm("label")),Z(e.label),17)):R("",!0)]}),e.removable?B(e.$slots,"removeicon",{key:0,removeCallback:s.close,keydownCallback:s.onKeydown},function(){return[(a(),_(N(e.removeIcon?"span":"TimesCircleIcon"),i({class:[e.cx("removeIcon"),e.removeIcon],onClick:s.close,onKeydown:s.onKeydown},e.ptm("removeIcon")),null,16,["class","onClick","onKeydown"]))]}):R("",!0)],16,Tt)):R("",!0)};var $t=o.extend({name:"multiselect",style:"\n    .p-multiselect {\n        display: inline-flex;\n        cursor: pointer;\n        position: relative;\n        user-select: none;\n        background: dt('multiselect.background');\n        border: 1px solid dt('multiselect.border.color');\n        transition:\n            background dt('multiselect.transition.duration'),\n            color dt('multiselect.transition.duration'),\n            border-color dt('multiselect.transition.duration'),\n            outline-color dt('multiselect.transition.duration'),\n            box-shadow dt('multiselect.transition.duration');\n        border-radius: dt('multiselect.border.radius');\n        outline-color: transparent;\n        box-shadow: dt('multiselect.shadow');\n    }\n\n    .p-multiselect:not(.p-disabled):hover {\n        border-color: dt('multiselect.hover.border.color');\n    }\n\n    .p-multiselect:not(.p-disabled).p-focus {\n        border-color: dt('multiselect.focus.border.color');\n        box-shadow: dt('multiselect.focus.ring.shadow');\n        outline: dt('multiselect.focus.ring.width') dt('multiselect.focus.ring.style') dt('multiselect.focus.ring.color');\n        outline-offset: dt('multiselect.focus.ring.offset');\n    }\n\n    .p-multiselect.p-variant-filled {\n        background: dt('multiselect.filled.background');\n    }\n\n    .p-multiselect.p-variant-filled:not(.p-disabled):hover {\n        background: dt('multiselect.filled.hover.background');\n    }\n\n    .p-multiselect.p-variant-filled.p-focus {\n        background: dt('multiselect.filled.focus.background');\n    }\n\n    .p-multiselect.p-invalid {\n        border-color: dt('multiselect.invalid.border.color');\n    }\n\n    .p-multiselect.p-disabled {\n        opacity: 1;\n        background: dt('multiselect.disabled.background');\n    }\n\n    .p-multiselect-dropdown {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        flex-shrink: 0;\n        background: transparent;\n        color: dt('multiselect.dropdown.color');\n        width: dt('multiselect.dropdown.width');\n        border-start-end-radius: dt('multiselect.border.radius');\n        border-end-end-radius: dt('multiselect.border.radius');\n    }\n\n    .p-multiselect-clear-icon {\n        align-self: center;\n        color: dt('multiselect.clear.icon.color');\n        inset-inline-end: dt('multiselect.dropdown.width');\n    }\n\n    .p-multiselect-label-container {\n        overflow: hidden;\n        flex: 1 1 auto;\n        cursor: pointer;\n    }\n\n    .p-multiselect-label {\n        white-space: nowrap;\n        cursor: pointer;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding: dt('multiselect.padding.y') dt('multiselect.padding.x');\n        color: dt('multiselect.color');\n    }\n\n    .p-multiselect-display-chip .p-multiselect-label {\n        display: flex;\n        align-items: center;\n        gap: calc(dt('multiselect.padding.y') / 2);\n    }\n\n    .p-multiselect-label.p-placeholder {\n        color: dt('multiselect.placeholder.color');\n    }\n\n    .p-multiselect.p-invalid .p-multiselect-label.p-placeholder {\n        color: dt('multiselect.invalid.placeholder.color');\n    }\n\n    .p-multiselect.p-disabled .p-multiselect-label {\n        color: dt('multiselect.disabled.color');\n    }\n\n    .p-multiselect-label-empty {\n        overflow: hidden;\n        visibility: hidden;\n    }\n\n    .p-multiselect-overlay {\n        position: absolute;\n        top: 0;\n        left: 0;\n        background: dt('multiselect.overlay.background');\n        color: dt('multiselect.overlay.color');\n        border: 1px solid dt('multiselect.overlay.border.color');\n        border-radius: dt('multiselect.overlay.border.radius');\n        box-shadow: dt('multiselect.overlay.shadow');\n        min-width: 100%;\n    }\n\n    .p-multiselect-header {\n        display: flex;\n        align-items: center;\n        padding: dt('multiselect.list.header.padding');\n    }\n\n    .p-multiselect-header .p-checkbox {\n        margin-inline-end: dt('multiselect.option.gap');\n    }\n\n    .p-multiselect-filter-container {\n        flex: 1 1 auto;\n    }\n\n    .p-multiselect-filter {\n        width: 100%;\n    }\n\n    .p-multiselect-list-container {\n        overflow: auto;\n    }\n\n    .p-multiselect-list {\n        margin: 0;\n        padding: 0;\n        list-style-type: none;\n        padding: dt('multiselect.list.padding');\n        display: flex;\n        flex-direction: column;\n        gap: dt('multiselect.list.gap');\n    }\n\n    .p-multiselect-option {\n        cursor: pointer;\n        font-weight: normal;\n        white-space: nowrap;\n        position: relative;\n        overflow: hidden;\n        display: flex;\n        align-items: center;\n        gap: dt('multiselect.option.gap');\n        padding: dt('multiselect.option.padding');\n        border: 0 none;\n        color: dt('multiselect.option.color');\n        background: transparent;\n        transition:\n            background dt('multiselect.transition.duration'),\n            color dt('multiselect.transition.duration'),\n            border-color dt('multiselect.transition.duration'),\n            box-shadow dt('multiselect.transition.duration'),\n            outline-color dt('multiselect.transition.duration');\n        border-radius: dt('multiselect.option.border.radius');\n    }\n\n    .p-multiselect-option:not(.p-multiselect-option-selected):not(.p-disabled).p-focus {\n        background: dt('multiselect.option.focus.background');\n        color: dt('multiselect.option.focus.color');\n    }\n\n    .p-multiselect-option:not(.p-multiselect-option-selected):not(.p-disabled):hover {\n        background: dt('multiselect.option.focus.background');\n        color: dt('multiselect.option.focus.color');\n    }\n\n    .p-multiselect-option.p-multiselect-option-selected {\n        background: dt('multiselect.option.selected.background');\n        color: dt('multiselect.option.selected.color');\n    }\n\n    .p-multiselect-option.p-multiselect-option-selected.p-focus {\n        background: dt('multiselect.option.selected.focus.background');\n        color: dt('multiselect.option.selected.focus.color');\n    }\n\n    .p-multiselect-option-group {\n        cursor: auto;\n        margin: 0;\n        padding: dt('multiselect.option.group.padding');\n        background: dt('multiselect.option.group.background');\n        color: dt('multiselect.option.group.color');\n        font-weight: dt('multiselect.option.group.font.weight');\n    }\n\n    .p-multiselect-empty-message {\n        padding: dt('multiselect.empty.message.padding');\n    }\n\n    .p-multiselect-label .p-chip {\n        padding-block-start: calc(dt('multiselect.padding.y') / 2);\n        padding-block-end: calc(dt('multiselect.padding.y') / 2);\n        border-radius: dt('multiselect.chip.border.radius');\n    }\n\n    .p-multiselect-label:has(.p-chip) {\n        padding: calc(dt('multiselect.padding.y') / 2) calc(dt('multiselect.padding.x') / 2);\n    }\n\n    .p-multiselect-fluid {\n        display: flex;\n        width: 100%;\n    }\n\n    .p-multiselect-sm .p-multiselect-label {\n        font-size: dt('multiselect.sm.font.size');\n        padding-block: dt('multiselect.sm.padding.y');\n        padding-inline: dt('multiselect.sm.padding.x');\n    }\n\n    .p-multiselect-sm .p-multiselect-dropdown .p-icon {\n        font-size: dt('multiselect.sm.font.size');\n        width: dt('multiselect.sm.font.size');\n        height: dt('multiselect.sm.font.size');\n    }\n\n    .p-multiselect-lg .p-multiselect-label {\n        font-size: dt('multiselect.lg.font.size');\n        padding-block: dt('multiselect.lg.padding.y');\n        padding-inline: dt('multiselect.lg.padding.x');\n    }\n\n    .p-multiselect-lg .p-multiselect-dropdown .p-icon {\n        font-size: dt('multiselect.lg.font.size');\n        width: dt('multiselect.lg.font.size');\n        height: dt('multiselect.lg.font.size');\n    }\n\n    .p-floatlabel-in .p-multiselect-filter {\n        padding-block-start: dt('multiselect.padding.y');\n        padding-block-end: dt('multiselect.padding.y');\n    }\n",classes:{root:function(e){var t=e.instance,n=e.props;return["p-multiselect p-component p-inputwrapper",{"p-multiselect-display-chip":"chip"===n.display,"p-disabled":n.disabled,"p-invalid":t.$invalid,"p-variant-filled":"filled"===t.$variant,"p-focus":t.focused,"p-inputwrapper-filled":t.$filled,"p-inputwrapper-focus":t.focused||t.overlayVisible,"p-multiselect-open":t.overlayVisible,"p-multiselect-fluid":t.$fluid,"p-multiselect-sm p-inputfield-sm":"small"===n.size,"p-multiselect-lg p-inputfield-lg":"large"===n.size}]},labelContainer:"p-multiselect-label-container",label:function(e){var t=e.instance,n=e.props;return["p-multiselect-label",{"p-placeholder":t.label===n.placeholder,"p-multiselect-label-empty":!n.placeholder&&!t.$filled}]},clearIcon:"p-multiselect-clear-icon",chipItem:"p-multiselect-chip-item",pcChip:"p-multiselect-chip",chipIcon:"p-multiselect-chip-icon",dropdown:"p-multiselect-dropdown",loadingIcon:"p-multiselect-loading-icon",dropdownIcon:"p-multiselect-dropdown-icon",overlay:"p-multiselect-overlay p-component",header:"p-multiselect-header",pcFilterContainer:"p-multiselect-filter-container",pcFilter:"p-multiselect-filter",listContainer:"p-multiselect-list-container",list:"p-multiselect-list",optionGroup:"p-multiselect-option-group",option:function(e){var t=e.instance,n=e.option,a=e.index,l=e.getItemOptions,i=e.props;return["p-multiselect-option",{"p-multiselect-option-selected":t.isSelected(n)&&i.highlightOnSelect,"p-focus":t.focusedOptionIndex===t.getOptionIndex(a,l),"p-disabled":t.isOptionDisabled(n)}]},emptyMessage:"p-multiselect-empty-message"},inlineStyles:{root:function(e){return{position:"self"===e.props.appendTo?"relative":void 0}}}});function Ot(e){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(n),!0).forEach(function(t){Ft(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ft(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ot(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=Ot(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Ot(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pt(e){return function(e){if(Array.isArray(e))return At(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return At(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?At(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var _t={name:"MultiSelect",extends:{name:"BaseMultiSelect",extends:f,props:{options:Array,optionLabel:null,optionValue:null,optionDisabled:null,optionGroupLabel:null,optionGroupChildren:null,scrollHeight:{type:String,default:"14rem"},placeholder:String,inputId:{type:String,default:null},panelClass:{type:String,default:null},panelStyle:{type:null,default:null},overlayClass:{type:String,default:null},overlayStyle:{type:null,default:null},dataKey:null,showClear:{type:Boolean,default:!1},clearIcon:{type:String,default:void 0},resetFilterOnClear:{type:Boolean,default:!1},filter:Boolean,filterPlaceholder:String,filterLocale:String,filterMatchMode:{type:String,default:"contains"},filterFields:{type:Array,default:null},appendTo:{type:[String,Object],default:"body"},display:{type:String,default:"comma"},selectedItemsLabel:{type:String,default:null},maxSelectedLabels:{type:Number,default:null},selectionLimit:{type:Number,default:null},showToggleAll:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},checkboxIcon:{type:String,default:void 0},dropdownIcon:{type:String,default:void 0},filterIcon:{type:String,default:void 0},loadingIcon:{type:String,default:void 0},removeTokenIcon:{type:String,default:void 0},chipIcon:{type:String,default:void 0},selectAll:{type:Boolean,default:null},resetFilterOnHide:{type:Boolean,default:!1},virtualScrollerOptions:{type:Object,default:null},autoOptionFocus:{type:Boolean,default:!1},autoFilterFocus:{type:Boolean,default:!1},focusOnHover:{type:Boolean,default:!0},highlightOnSelect:{type:Boolean,default:!1},filterMessage:{type:String,default:null},selectionMessage:{type:String,default:null},emptySelectionMessage:{type:String,default:null},emptyFilterMessage:{type:String,default:null},emptyMessage:{type:String,default:null},tabindex:{type:Number,default:0},ariaLabel:{type:String,default:null},ariaLabelledby:{type:String,default:null}},style:$t,provide:function(){return{$pcMultiSelect:this,$parentInstance:this}}},inheritAttrs:!1,emits:["change","focus","blur","before-show","before-hide","show","hide","filter","selectall-change"],inject:{$pcFluid:{default:null}},outsideClickListener:null,scrollHandler:null,resizeListener:null,overlay:null,list:null,virtualScroller:null,startRangeIndex:-1,searchTimeout:null,searchValue:"",selectOnFocus:!1,data:function(){return{clicked:!1,focused:!1,focusedOptionIndex:-1,filterValue:null,overlayVisible:!1}},watch:{options:function(){this.autoUpdateModel()}},mounted:function(){this.autoUpdateModel()},beforeUnmount:function(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&(L.clear(this.overlay),this.overlay=null)},methods:{getOptionIndex:function(e,t){return this.virtualScrollerDisabled?e:t&&t(e).index},getOptionLabel:function(e){return this.optionLabel?fe(e,this.optionLabel):e},getOptionValue:function(e){return this.optionValue?fe(e,this.optionValue):e},getOptionRenderKey:function(e,t){return this.dataKey?fe(e,this.dataKey):this.getOptionLabel(e)+"_".concat(t)},getHeaderCheckboxPTOptions:function(e){return this.ptm(e,{context:{selected:this.allSelected}})},getCheckboxPTOptions:function(e,t,n,a){return this.ptm(a,{context:{selected:this.isSelected(e),focused:this.focusedOptionIndex===this.getOptionIndex(n,t),disabled:this.isOptionDisabled(e)}})},isOptionDisabled:function(e){return!(!this.maxSelectionLimitReached||this.isSelected(e))||!!this.optionDisabled&&fe(e,this.optionDisabled)},isOptionGroup:function(e){return!!(this.optionGroupLabel&&e.optionGroup&&e.group)},getOptionGroupLabel:function(e){return fe(e,this.optionGroupLabel)},getOptionGroupChildren:function(e){return fe(e,this.optionGroupChildren)},getAriaPosInset:function(e){var t=this;return(this.optionGroupLabel?e-this.visibleOptions.slice(0,e).filter(function(e){return t.isOptionGroup(e)}).length:e)+1},show:function(e){this.$emit("before-show"),this.overlayVisible=!0,this.focusedOptionIndex=-1!==this.focusedOptionIndex?this.focusedOptionIndex:this.autoOptionFocus?this.findFirstFocusedOptionIndex():this.findSelectedOptionIndex(),e&&ce(this.$refs.focusInput)},hide:function(e){var t=this;setTimeout(function(){t.$emit("before-hide"),t.overlayVisible=!1,t.clicked=!1,t.focusedOptionIndex=-1,t.searchValue="",t.resetFilterOnHide&&(t.filterValue=null),e&&ce(t.$refs.focusInput)},0)},onFocus:function(e){this.disabled||(this.focused=!0,this.overlayVisible&&(this.focusedOptionIndex=-1!==this.focusedOptionIndex?this.focusedOptionIndex:this.autoOptionFocus?this.findFirstFocusedOptionIndex():this.findSelectedOptionIndex(),!this.autoFilterFocus&&this.scrollInView(this.focusedOptionIndex)),this.$emit("focus",e))},onBlur:function(e){var t,n;this.clicked=!1,this.focused=!1,this.focusedOptionIndex=-1,this.searchValue="",this.$emit("blur",e),null===(t=(n=this.formField).onBlur)||void 0===t||t.call(n)},onKeyDown:function(e){var t=this;if(this.disabled)e.preventDefault();else{var n=e.metaKey||e.ctrlKey;switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Enter":case"NumpadEnter":case"Space":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e);break;case"ShiftLeft":case"ShiftRight":this.onShiftKey(e);break;default:if("KeyA"===e.code&&n){var a=this.visibleOptions.filter(function(e){return t.isValidOption(e)}).map(function(e){return t.getOptionValue(e)});this.updateModel(e,a),e.preventDefault();break}!n&&he(e.key)&&(!this.overlayVisible&&this.show(),this.searchOptions(e),e.preventDefault())}this.clicked=!1}},onContainerClick:function(e){this.disabled||this.loading||"INPUT"===e.target.tagName||"clearicon"===e.target.getAttribute("data-pc-section")||e.target.closest('[data-pc-section="clearicon"]')||(this.overlay&&this.overlay.contains(e.target)||(this.overlayVisible?this.hide(!0):this.show(!0)),this.clicked=!0)},onClearClick:function(e){this.updateModel(e,[]),this.resetFilterOnClear&&(this.filterValue=null)},onFirstHiddenFocus:function(e){var t=e.relatedTarget===this.$refs.focusInput?ve(this.overlay,':not([data-p-hidden-focusable="true"])'):this.$refs.focusInput;ce(t)},onLastHiddenFocus:function(e){var t=e.relatedTarget===this.$refs.focusInput?pe(this.overlay,':not([data-p-hidden-focusable="true"])'):this.$refs.focusInput;ce(t)},onOptionSelect:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,l=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!this.disabled&&!this.isOptionDisabled(t)){var i;i=this.isSelected(t)?this.d_value.filter(function(e){return!ue(e,n.getOptionValue(t),n.equalityKey)}):[].concat(Pt(this.d_value||[]),[this.getOptionValue(t)]),this.updateModel(e,i),-1!==a&&(this.focusedOptionIndex=a),l&&ce(this.$refs.focusInput)}},onOptionMouseMove:function(e,t){this.focusOnHover&&this.changeFocusedOptionIndex(e,t)},onOptionSelectRange:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=this.findNearestSelectedOptionIndex(a,!0)),-1===a&&(a=this.findNearestSelectedOptionIndex(n)),-1!==n&&-1!==a){var l=Math.min(n,a),i=Math.max(n,a),o=this.visibleOptions.slice(l,i+1).filter(function(e){return t.isValidOption(e)}).map(function(e){return t.getOptionValue(e)});this.updateModel(e,o)}},onFilterChange:function(e){var t=e.target.value;this.filterValue=t,this.focusedOptionIndex=-1,this.$emit("filter",{originalEvent:e,value:t}),!this.virtualScrollerDisabled&&this.virtualScroller.scrollToIndex(0)},onFilterKeyDown:function(e){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e,!0);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,!0);break;case"Home":this.onHomeKey(e,!0);break;case"End":this.onEndKey(e,!0);break;case"Enter":case"NumpadEnter":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e,!0)}},onFilterBlur:function(){this.focusedOptionIndex=-1},onFilterUpdated:function(){this.overlayVisible&&this.alignOverlay()},onOverlayClick:function(e){g.emit("overlay-click",{originalEvent:e,target:this.$el})},onOverlayKeyDown:function(e){"Escape"===e.code&&this.onEscapeKey(e)},onArrowDownKey:function(e){if(this.overlayVisible){var t=-1!==this.focusedOptionIndex?this.findNextOptionIndex(this.focusedOptionIndex):this.clicked?this.findFirstOptionIndex():this.findFirstFocusedOptionIndex();e.shiftKey&&this.onOptionSelectRange(e,this.startRangeIndex,t),this.changeFocusedOptionIndex(e,t)}else this.show();e.preventDefault()},onArrowUpKey:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.altKey&&!t)-1!==this.focusedOptionIndex&&this.onOptionSelect(e,this.visibleOptions[this.focusedOptionIndex]),this.overlayVisible&&this.hide(),e.preventDefault();else{var n=-1!==this.focusedOptionIndex?this.findPrevOptionIndex(this.focusedOptionIndex):this.clicked?this.findLastOptionIndex():this.findLastFocusedOptionIndex();e.shiftKey&&this.onOptionSelectRange(e,n,this.startRangeIndex),this.changeFocusedOptionIndex(e,n),!this.overlayVisible&&this.show(),e.preventDefault()}},onArrowLeftKey:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(this.focusedOptionIndex=-1)},onHomeKey:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){var t=e.currentTarget;e.shiftKey?t.setSelectionRange(0,e.target.selectionStart):(t.setSelectionRange(0,0),this.focusedOptionIndex=-1)}else{var n=e.metaKey||e.ctrlKey,a=this.findFirstOptionIndex();e.shiftKey&&n&&this.onOptionSelectRange(e,a,this.startRangeIndex),this.changeFocusedOptionIndex(e,a),!this.overlayVisible&&this.show()}e.preventDefault()},onEndKey:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){var t=e.currentTarget;if(e.shiftKey)t.setSelectionRange(e.target.selectionStart,t.value.length);else{var n=t.value.length;t.setSelectionRange(n,n),this.focusedOptionIndex=-1}}else{var a=e.metaKey||e.ctrlKey,l=this.findLastOptionIndex();e.shiftKey&&a&&this.onOptionSelectRange(e,this.startRangeIndex,l),this.changeFocusedOptionIndex(e,l),!this.overlayVisible&&this.show()}e.preventDefault()},onPageUpKey:function(e){this.scrollInView(0),e.preventDefault()},onPageDownKey:function(e){this.scrollInView(this.visibleOptions.length-1),e.preventDefault()},onEnterKey:function(e){this.overlayVisible?-1!==this.focusedOptionIndex&&(e.shiftKey?this.onOptionSelectRange(e,this.focusedOptionIndex):this.onOptionSelect(e,this.visibleOptions[this.focusedOptionIndex])):(this.focusedOptionIndex=-1,this.onArrowDownKey(e)),e.preventDefault()},onEscapeKey:function(e){this.overlayVisible&&(this.hide(!0),e.stopPropagation()),e.preventDefault()},onTabKey:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]||(this.overlayVisible&&this.hasFocusableElements()?(ce(e.shiftKey?this.$refs.lastHiddenFocusableElementOnOverlay:this.$refs.firstHiddenFocusableElementOnOverlay),e.preventDefault()):(-1!==this.focusedOptionIndex&&this.onOptionSelect(e,this.visibleOptions[this.focusedOptionIndex]),this.overlayVisible&&this.hide(this.filter)))},onShiftKey:function(){this.startRangeIndex=this.focusedOptionIndex},onOverlayEnter:function(e){L.set("overlay",e,this.$primevue.config.zIndex.overlay),F(e,{position:"absolute",top:"0"}),this.alignOverlay(),this.scrollInView(),this.autoFilterFocus&&ce(this.$refs.filterInput.$el),this.autoUpdateModel(),this.$attrSelector&&e.setAttribute(this.$attrSelector,"")},onOverlayAfterEnter:function(){this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.$emit("show")},onOverlayLeave:function(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.$emit("hide"),this.overlay=null},onOverlayAfterLeave:function(e){L.clear(e)},alignOverlay:function(){"self"===this.appendTo?T(this.overlay,this.$el):(this.overlay.style.minWidth=V(this.$el)+"px",$(this.overlay,this.$el))},bindOutsideClickListener:function(){var e=this;this.outsideClickListener||(this.outsideClickListener=function(t){e.overlayVisible&&e.isOutsideClicked(t)&&e.hide()},document.addEventListener("click",this.outsideClickListener,!0))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener,!0),this.outsideClickListener=null)},bindScrollListener:function(){var e=this;this.scrollHandler||(this.scrollHandler=new E(this.$refs.container,function(){e.overlayVisible&&e.hide()})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var e=this;this.resizeListener||(this.resizeListener=function(){e.overlayVisible&&!O()&&e.hide()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},isOutsideClicked:function(e){return!(this.$el.isSameNode(e.target)||this.$el.contains(e.target)||this.overlay&&this.overlay.contains(e.target))},getLabelByValue:function(e){var t=this,n=(this.optionGroupLabel?this.flatOptions(this.options):this.options||[]).find(function(n){return!t.isOptionGroup(n)&&ue(t.getOptionValue(n),e,t.equalityKey)});return this.getOptionLabel(n)},getSelectedItemsLabel:function(){var e=/{(.*?)}/,t=this.selectedItemsLabel||this.$primevue.config.locale.selectionMessage;return e.test(t)?t.replace(t.match(e)[0],this.d_value.length+""):t},onToggleAll:function(e){var t=this;if(null!==this.selectAll)this.$emit("selectall-change",{originalEvent:e,checked:!this.allSelected});else{var n=this.allSelected?[]:this.visibleOptions.filter(function(e){return t.isValidOption(e)}).map(function(e){return t.getOptionValue(e)});this.updateModel(e,n)}},removeOption:function(e,t){var n=this;e.stopPropagation();var a=this.d_value.filter(function(e){return!ue(e,t,n.equalityKey)});this.updateModel(e,a)},clearFilter:function(){this.filterValue=null},hasFocusableElements:function(){return w(this.overlay,':not([data-p-hidden-focusable="true"])').length>0},isOptionMatched:function(e){var t;return this.isValidOption(e)&&"string"==typeof this.getOptionLabel(e)&&(null===(t=this.getOptionLabel(e))||void 0===t?void 0:t.toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale)))},isValidOption:function(e){return M(e)&&!(this.isOptionDisabled(e)||this.isOptionGroup(e))},isValidSelectedOption:function(e){return this.isValidOption(e)&&this.isSelected(e)},isEquals:function(e,t){return ue(e,t,this.equalityKey)},isSelected:function(e){var t=this,n=this.getOptionValue(e);return(this.d_value||[]).some(function(e){return t.isEquals(e,n)})},findFirstOptionIndex:function(){var e=this;return this.visibleOptions.findIndex(function(t){return e.isValidOption(t)})},findLastOptionIndex:function(){var e=this;return de(this.visibleOptions,function(t){return e.isValidOption(t)})},findNextOptionIndex:function(e){var t=this,n=e<this.visibleOptions.length-1?this.visibleOptions.slice(e+1).findIndex(function(e){return t.isValidOption(e)}):-1;return n>-1?n+e+1:e},findPrevOptionIndex:function(e){var t=this,n=e>0?de(this.visibleOptions.slice(0,e),function(e){return t.isValidOption(e)}):-1;return n>-1?n:e},findSelectedOptionIndex:function(){var e=this;if(this.$filled)for(var t,n=function(){var t=e.d_value[a],n=e.visibleOptions.findIndex(function(n){return e.isValidSelectedOption(n)&&e.isEquals(t,e.getOptionValue(n))});if(n>-1)return{v:n}},a=this.d_value.length-1;a>=0;a--)if(t=n())return t.v;return-1},findFirstSelectedOptionIndex:function(){var e=this;return this.$filled?this.visibleOptions.findIndex(function(t){return e.isValidSelectedOption(t)}):-1},findLastSelectedOptionIndex:function(){var e=this;return this.$filled?de(this.visibleOptions,function(t){return e.isValidSelectedOption(t)}):-1},findNextSelectedOptionIndex:function(e){var t=this,n=this.$filled&&e<this.visibleOptions.length-1?this.visibleOptions.slice(e+1).findIndex(function(e){return t.isValidSelectedOption(e)}):-1;return n>-1?n+e+1:-1},findPrevSelectedOptionIndex:function(e){var t=this,n=this.$filled&&e>0?de(this.visibleOptions.slice(0,e),function(e){return t.isValidSelectedOption(e)}):-1;return n>-1?n:-1},findNearestSelectedOptionIndex:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=-1;return this.$filled&&(n=t?-1===(n=this.findPrevSelectedOptionIndex(e))?this.findNextSelectedOptionIndex(e):n:-1===(n=this.findNextSelectedOptionIndex(e))?this.findPrevSelectedOptionIndex(e):n),n>-1?n:e},findFirstFocusedOptionIndex:function(){var e=this.findFirstSelectedOptionIndex();return e<0?this.findFirstOptionIndex():e},findLastFocusedOptionIndex:function(){var e=this.findSelectedOptionIndex();return e<0?this.findLastOptionIndex():e},searchOptions:function(e){var t=this;this.searchValue=(this.searchValue||"")+e.key;var n=-1;M(this.searchValue)&&(-1===(n=-1!==this.focusedOptionIndex?-1===(n=this.visibleOptions.slice(this.focusedOptionIndex).findIndex(function(e){return t.isOptionMatched(e)}))?this.visibleOptions.slice(0,this.focusedOptionIndex).findIndex(function(e){return t.isOptionMatched(e)}):n+this.focusedOptionIndex:this.visibleOptions.findIndex(function(e){return t.isOptionMatched(e)}))&&-1===this.focusedOptionIndex&&(n=this.findFirstFocusedOptionIndex()),-1!==n&&this.changeFocusedOptionIndex(e,n)),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){t.searchValue="",t.searchTimeout=null},500)},changeFocusedOptionIndex:function(e,t){this.focusedOptionIndex!==t&&(this.focusedOptionIndex=t,this.scrollInView(),this.selectOnFocus&&this.onOptionSelect(e,this.visibleOptions[t]))},scrollInView:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.$nextTick(function(){var n=-1!==t?"".concat(e.$id,"_").concat(t):e.focusedOptionId,a=x(e.list,'li[id="'.concat(n,'"]'));a?a.scrollIntoView&&a.scrollIntoView({block:"nearest",inline:"nearest"}):e.virtualScrollerDisabled||e.virtualScroller&&e.virtualScroller.scrollToIndex(-1!==t?t:e.focusedOptionIndex)})},autoUpdateModel:function(){if(this.autoOptionFocus&&(this.focusedOptionIndex=this.findFirstFocusedOptionIndex()),this.selectOnFocus&&this.autoOptionFocus&&!this.$filled){var e=this.getOptionValue(this.visibleOptions[this.focusedOptionIndex]);this.updateModel(null,[e])}},updateModel:function(e,t){this.writeValue(t,e),this.$emit("change",{originalEvent:e,value:t})},flatOptions:function(e){var t=this;return(e||[]).reduce(function(e,n,a){var l=t.getOptionGroupChildren(n);return l&&Array.isArray(l)?(e.push({optionGroup:n,group:!0,index:a}),l.forEach(function(t){return e.push(t)})):e.push(n),e},[])},overlayRef:function(e){this.overlay=e},listRef:function(e,t){this.list=e,t&&t(e)},virtualScrollerRef:function(e){this.virtualScroller=e}},computed:{visibleOptions:function(){var e=this,t=this.optionGroupLabel?this.flatOptions(this.options):this.options||[];if(this.filterValue){var n=se.filter(t,this.searchFields,this.filterValue,this.filterMatchMode,this.filterLocale);if(this.optionGroupLabel){var a=this.options||[],l=[];return a.forEach(function(t){var a=e.getOptionGroupChildren(t).filter(function(e){return n.includes(e)});a.length>0&&l.push(Lt(Lt({},t),{},Ft({},"string"==typeof e.optionGroupChildren?e.optionGroupChildren:"items",Pt(a))))}),this.flatOptions(l)}return n}return t},label:function(){var e;if(this.d_value&&this.d_value.length){if(M(this.maxSelectedLabels)&&this.d_value.length>this.maxSelectedLabels)return this.getSelectedItemsLabel();e="";for(var t=0;t<this.d_value.length;t++)0!==t&&(e+=", "),e+=this.getLabelByValue(this.d_value[t])}else e=this.placeholder;return e},chipSelectedItems:function(){return M(this.maxSelectedLabels)&&this.d_value&&this.d_value.length>this.maxSelectedLabels},allSelected:function(){var e=this;return null!==this.selectAll?this.selectAll:M(this.visibleOptions)&&this.visibleOptions.every(function(t){return e.isOptionGroup(t)||e.isOptionDisabled(t)||e.isSelected(t)})},hasSelectedOption:function(){return this.$filled},equalityKey:function(){return this.optionValue?null:this.dataKey},searchFields:function(){return this.filterFields||[this.optionLabel]},maxSelectionLimitReached:function(){return this.selectionLimit&&this.d_value&&this.d_value.length===this.selectionLimit},filterResultMessageText:function(){return M(this.visibleOptions)?this.filterMessageText.replaceAll("{0}",this.visibleOptions.length):this.emptyFilterMessageText},filterMessageText:function(){return this.filterMessage||this.$primevue.config.locale.searchMessage||""},emptyFilterMessageText:function(){return this.emptyFilterMessage||this.$primevue.config.locale.emptySearchMessage||this.$primevue.config.locale.emptyFilterMessage||""},emptyMessageText:function(){return this.emptyMessage||this.$primevue.config.locale.emptyMessage||""},selectionMessageText:function(){return this.selectionMessage||this.$primevue.config.locale.selectionMessage||""},emptySelectionMessageText:function(){return this.emptySelectionMessage||this.$primevue.config.locale.emptySelectionMessage||""},selectedMessageText:function(){return this.$filled?this.selectionMessageText.replaceAll("{0}",this.d_value.length):this.emptySelectionMessageText},focusedOptionId:function(){return-1!==this.focusedOptionIndex?"".concat(this.$id,"_").concat(this.focusedOptionIndex):null},ariaSetSize:function(){var e=this;return this.visibleOptions.filter(function(t){return!e.isOptionGroup(t)}).length},toggleAllAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria[this.allSelected?"selectAll":"unselectAll"]:void 0},listAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.listLabel:void 0},virtualScrollerDisabled:function(){return!this.virtualScrollerOptions},hasFluid:function(){return k(this.fluid)?!!this.$pcFluid:this.fluid},isClearIconVisible:function(){return this.showClear&&this.d_value&&this.d_value.length&&null!=this.d_value&&M(this.options)&&!this.disabled&&!this.loading},containerDataP:function(){return m(Ft({invalid:this.$invalid,disabled:this.disabled,focus:this.focused,fluid:this.$fluid,filled:"filled"===this.$variant},this.size,this.size))},labelDataP:function(){return m(Ft(Ft(Ft({placeholder:this.label===this.placeholder,clearable:this.showClear,disabled:this.disabled},this.size,this.size),"has-chip","chip"===this.display&&this.d_value&&this.d_value.length&&(!this.maxSelectedLabels||this.d_value.length<=this.maxSelectedLabels)),"empty",!this.placeholder&&!this.$filled))},dropdownIconDataP:function(){return m(Ft({},this.size,this.size))},overlayDataP:function(){return m(Ft({},"portal-"+this.appendTo,"portal-"+this.appendTo))}},directives:{ripple:r},components:{InputText:h,Checkbox:re,VirtualScroller:oe,Portal:p,Chip:Mt,IconField:ie,InputIcon:le,TimesIcon:s,SearchIcon:ae,ChevronDownIcon:d,SpinnerIcon:ne,CheckIcon:te}};function Rt(e){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Rt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=Rt(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Rt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ut=["data-p"],Kt=["id","disabled","placeholder","tabindex","aria-label","aria-labelledby","aria-expanded","aria-controls","aria-activedescendant","aria-invalid"],Ht=["data-p"],Nt={key:0},zt=["data-p"],jt=["id","aria-label"],qt=["id"],Yt=["id","aria-label","aria-selected","aria-disabled","aria-setsize","aria-posinset","onClick","onMousemove","data-p-selected","data-p-focused","data-p-disabled"];_t.render=function(e,t,o,r,s,d){var u=P("Chip"),c=P("SpinnerIcon"),p=P("Checkbox"),v=P("InputText"),h=P("SearchIcon"),f=P("InputIcon"),m=P("IconField"),b=P("VirtualScroller"),y=P("Portal"),g=A("ripple");return a(),n("div",i({ref:"container",class:e.cx("root"),style:e.sx("root"),onClick:t[7]||(t[7]=function(){return d.onContainerClick&&d.onContainerClick.apply(d,arguments)}),"data-p":d.containerDataP},e.ptmi("root")),[l("div",i({class:"p-hidden-accessible"},e.ptm("hiddenInputContainer"),{"data-p-hidden-accessible":!0}),[l("input",i({ref:"focusInput",id:e.inputId,type:"text",readonly:"",disabled:e.disabled,placeholder:e.placeholder,tabindex:e.disabled?-1:e.tabindex,role:"combobox","aria-label":e.ariaLabel,"aria-labelledby":e.ariaLabelledby,"aria-haspopup":"listbox","aria-expanded":s.overlayVisible,"aria-controls":s.overlayVisible?e.$id+"_list":void 0,"aria-activedescendant":s.focused?d.focusedOptionId:void 0,"aria-invalid":e.invalid||void 0,onFocus:t[0]||(t[0]=function(){return d.onFocus&&d.onFocus.apply(d,arguments)}),onBlur:t[1]||(t[1]=function(){return d.onBlur&&d.onBlur.apply(d,arguments)}),onKeydown:t[2]||(t[2]=function(){return d.onKeyDown&&d.onKeyDown.apply(d,arguments)})},e.ptm("hiddenInput")),null,16,Kt)],16),l("div",i({class:e.cx("labelContainer")},e.ptm("labelContainer")),[l("div",i({class:e.cx("label"),"data-p":d.labelDataP},e.ptm("label")),[B(e.$slots,"value",{value:e.d_value,placeholder:e.placeholder},function(){return["comma"===e.display?(a(),n(z,{key:0},[X(Z(d.label||"empty"),1)],64)):"chip"===e.display?(a(),n(z,{key:1},[d.chipSelectedItems?(a(),n("span",Nt,Z(d.label),1)):(a(!0),n(z,{key:1},Y(e.d_value,function(t,l){return a(),n("span",i({key:"chip-".concat(e.optionValue?t:d.getLabelByValue(t),"_").concat(l),class:e.cx("chipItem")},{ref_for:!0},e.ptm("chipItem")),[B(e.$slots,"chip",{value:t,removeCallback:function(e){return d.removeOption(e,t)}},function(){return[U(u,{class:H(e.cx("pcChip")),label:d.getLabelByValue(t),removeIcon:e.chipIcon||e.removeTokenIcon,removable:"",unstyled:e.unstyled,onRemove:function(e){return d.removeOption(e,t)},pt:e.ptm("pcChip")},{removeicon:j(function(){return[B(e.$slots,e.$slots.chipicon?"chipicon":"removetokenicon",{class:H(e.cx("chipIcon")),item:t,removeCallback:function(e){return d.removeOption(e,t)}})]}),_:2},1032,["class","label","removeIcon","unstyled","onRemove","pt"])]})],16)}),128)),e.d_value&&0!==e.d_value.length?R("",!0):(a(),n(z,{key:2},[X(Z(e.placeholder||"empty"),1)],64))],64)):R("",!0)]})],16,Ht)],16),d.isClearIconVisible?B(e.$slots,"clearicon",{key:0,class:H(e.cx("clearIcon")),clearCallback:d.onClearClick},function(){return[(a(),_(N(e.clearIcon?"i":"TimesIcon"),i({ref:"clearIcon",class:[e.cx("clearIcon"),e.clearIcon],onClick:d.onClearClick},e.ptm("clearIcon"),{"data-pc-section":"clearicon"}),null,16,["class","onClick"]))]}):R("",!0),l("div",i({class:e.cx("dropdown")},e.ptm("dropdown")),[e.loading?B(e.$slots,"loadingicon",{key:0,class:H(e.cx("loadingIcon"))},function(){return[e.loadingIcon?(a(),n("span",i({key:0,class:[e.cx("loadingIcon"),"pi-spin",e.loadingIcon],"aria-hidden":"true"},e.ptm("loadingIcon")),null,16)):(a(),_(c,i({key:1,class:e.cx("loadingIcon"),spin:"","aria-hidden":"true"},e.ptm("loadingIcon")),null,16,["class"]))]}):B(e.$slots,"dropdownicon",{key:1,class:H(e.cx("dropdownIcon"))},function(){return[(a(),_(N(e.dropdownIcon?"span":"ChevronDownIcon"),i({class:[e.cx("dropdownIcon"),e.dropdownIcon],"aria-hidden":"true","data-p":d.dropdownIconDataP},e.ptm("dropdownIcon")),null,16,["class","data-p"]))]})],16),U(y,{appendTo:e.appendTo},{default:j(function(){return[U(q,i({name:"p-anchored-overlay",onEnter:d.onOverlayEnter,onAfterEnter:d.onOverlayAfterEnter,onLeave:d.onOverlayLeave,onAfterLeave:d.onOverlayAfterLeave},e.ptm("transition")),{default:j(function(){return[s.overlayVisible?(a(),n("div",i({key:0,ref:d.overlayRef,style:[e.panelStyle,e.overlayStyle],class:[e.cx("overlay"),e.panelClass,e.overlayClass],onClick:t[5]||(t[5]=function(){return d.onOverlayClick&&d.onOverlayClick.apply(d,arguments)}),onKeydown:t[6]||(t[6]=function(){return d.onOverlayKeyDown&&d.onOverlayKeyDown.apply(d,arguments)}),"data-p":d.overlayDataP},e.ptm("overlay")),[l("span",i({ref:"firstHiddenFocusableElementOnOverlay",role:"presentation","aria-hidden":"true",class:"p-hidden-accessible p-hidden-focusable",tabindex:0,onFocus:t[3]||(t[3]=function(){return d.onFirstHiddenFocus&&d.onFirstHiddenFocus.apply(d,arguments)})},e.ptm("hiddenFirstFocusableEl"),{"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0}),null,16),B(e.$slots,"header",{value:e.d_value,options:d.visibleOptions}),e.showToggleAll&&null==e.selectionLimit||e.filter?(a(),n("div",i({key:0,class:e.cx("header")},e.ptm("header")),[e.showToggleAll&&null==e.selectionLimit?(a(),_(p,{key:0,modelValue:d.allSelected,binary:!0,disabled:e.disabled,variant:e.variant,"aria-label":d.toggleAllAriaLabel,onChange:d.onToggleAll,unstyled:e.unstyled,pt:d.getHeaderCheckboxPTOptions("pcHeaderCheckbox"),formControl:{novalidate:!0}},{icon:j(function(t){return[e.$slots.headercheckboxicon?(a(),_(N(e.$slots.headercheckboxicon),{key:0,checked:t.checked,class:H(t.class)},null,8,["checked","class"])):t.checked?(a(),_(N(e.checkboxIcon?"span":"CheckIcon"),i({key:1,class:[t.class,Bt({},e.checkboxIcon,t.checked)]},d.getHeaderCheckboxPTOptions("pcHeaderCheckbox.icon")),null,16,["class"])):R("",!0)]}),_:1},8,["modelValue","disabled","variant","aria-label","onChange","unstyled","pt"])):R("",!0),e.filter?(a(),_(m,{key:1,class:H(e.cx("pcFilterContainer")),unstyled:e.unstyled,pt:e.ptm("pcFilterContainer")},{default:j(function(){return[U(v,{ref:"filterInput",value:s.filterValue,onVnodeMounted:d.onFilterUpdated,onVnodeUpdated:d.onFilterUpdated,class:H(e.cx("pcFilter")),placeholder:e.filterPlaceholder,disabled:e.disabled,variant:e.variant,unstyled:e.unstyled,role:"searchbox",autocomplete:"off","aria-owns":e.$id+"_list","aria-activedescendant":d.focusedOptionId,onKeydown:d.onFilterKeyDown,onBlur:d.onFilterBlur,onInput:d.onFilterChange,pt:e.ptm("pcFilter"),formControl:{novalidate:!0}},null,8,["value","onVnodeMounted","onVnodeUpdated","class","placeholder","disabled","variant","unstyled","aria-owns","aria-activedescendant","onKeydown","onBlur","onInput","pt"]),U(f,{unstyled:e.unstyled,pt:e.ptm("pcFilterIconContainer")},{default:j(function(){return[B(e.$slots,"filtericon",{},function(){return[e.filterIcon?(a(),n("span",i({key:0,class:e.filterIcon},e.ptm("filterIcon")),null,16)):(a(),_(h,me(i({key:1},e.ptm("filterIcon"))),null,16))]})]}),_:3},8,["unstyled","pt"])]}),_:3},8,["class","unstyled","pt"])):R("",!0),e.filter?(a(),n("span",i({key:2,role:"status","aria-live":"polite",class:"p-hidden-accessible"},e.ptm("hiddenFilterResult"),{"data-p-hidden-accessible":!0}),Z(d.filterResultMessageText),17)):R("",!0)],16)):R("",!0),l("div",i({class:e.cx("listContainer"),style:{"max-height":d.virtualScrollerDisabled?e.scrollHeight:""}},e.ptm("listContainer")),[U(b,i({ref:d.virtualScrollerRef},e.virtualScrollerOptions,{items:d.visibleOptions,style:{height:e.scrollHeight},tabindex:-1,disabled:d.virtualScrollerDisabled,pt:e.ptm("virtualScroller")}),be({content:j(function(t){var o=t.styleClass,r=t.contentRef,u=t.items,c=t.getItemOptions,v=t.contentStyle,h=t.itemSize;return[l("ul",i({ref:function(e){return d.listRef(e,r)},id:e.$id+"_list",class:[e.cx("list"),o],style:v,role:"listbox","aria-multiselectable":"true","aria-label":d.listAriaLabel},e.ptm("list")),[(a(!0),n(z,null,Y(u,function(t,o){return a(),n(z,{key:d.getOptionRenderKey(t,d.getOptionIndex(o,c))},[d.isOptionGroup(t)?(a(),n("li",i({key:0,id:e.$id+"_"+d.getOptionIndex(o,c),style:{height:h?h+"px":void 0},class:e.cx("optionGroup"),role:"option"},{ref_for:!0},e.ptm("optionGroup")),[B(e.$slots,"optiongroup",{option:t.optionGroup,index:d.getOptionIndex(o,c)},function(){return[X(Z(d.getOptionGroupLabel(t.optionGroup)),1)]})],16,qt)):W((a(),n("li",i({key:1,id:e.$id+"_"+d.getOptionIndex(o,c),style:{height:h?h+"px":void 0},class:e.cx("option",{option:t,index:o,getItemOptions:c}),role:"option","aria-label":d.getOptionLabel(t),"aria-selected":d.isSelected(t),"aria-disabled":d.isOptionDisabled(t),"aria-setsize":d.ariaSetSize,"aria-posinset":d.getAriaPosInset(d.getOptionIndex(o,c)),onClick:function(e){return d.onOptionSelect(e,t,d.getOptionIndex(o,c),!0)},onMousemove:function(e){return d.onOptionMouseMove(e,d.getOptionIndex(o,c))}},{ref_for:!0},d.getCheckboxPTOptions(t,c,o,"option"),{"data-p-selected":d.isSelected(t),"data-p-focused":s.focusedOptionIndex===d.getOptionIndex(o,c),"data-p-disabled":d.isOptionDisabled(t)}),[U(p,{defaultValue:d.isSelected(t),binary:!0,tabindex:-1,variant:e.variant,unstyled:e.unstyled,pt:d.getCheckboxPTOptions(t,c,o,"pcOptionCheckbox"),formControl:{novalidate:!0}},{icon:j(function(n){return[e.$slots.optioncheckboxicon||e.$slots.itemcheckboxicon?(a(),_(N(e.$slots.optioncheckboxicon||e.$slots.itemcheckboxicon),{key:0,checked:n.checked,class:H(n.class)},null,8,["checked","class"])):n.checked?(a(),_(N(e.checkboxIcon?"span":"CheckIcon"),i({key:1,class:[n.class,Bt({},e.checkboxIcon,n.checked)]},{ref_for:!0},d.getCheckboxPTOptions(t,c,o,"pcOptionCheckbox.icon")),null,16,["class"])):R("",!0)]}),_:2},1032,["defaultValue","variant","unstyled","pt"]),B(e.$slots,"option",{option:t,selected:d.isSelected(t),index:d.getOptionIndex(o,c)},function(){return[l("span",i({ref_for:!0},e.ptm("optionLabel")),Z(d.getOptionLabel(t)),17)]})],16,Yt)),[[g]])],64)}),128)),s.filterValue&&(!u||u&&0===u.length)?(a(),n("li",i({key:0,class:e.cx("emptyMessage"),role:"option"},e.ptm("emptyMessage")),[B(e.$slots,"emptyfilter",{},function(){return[X(Z(d.emptyFilterMessageText),1)]})],16)):!e.options||e.options&&0===e.options.length?(a(),n("li",i({key:1,class:e.cx("emptyMessage"),role:"option"},e.ptm("emptyMessage")),[B(e.$slots,"empty",{},function(){return[X(Z(d.emptyMessageText),1)]})],16)):R("",!0)],16,jt)]}),_:2},[e.$slots.loader?{name:"loader",fn:j(function(t){var n=t.options;return[B(e.$slots,"loader",{options:n})]}),key:"0"}:void 0]),1040,["items","style","disabled","pt"])],16),B(e.$slots,"footer",{value:e.d_value,options:d.visibleOptions}),!e.options||e.options&&0===e.options.length?(a(),n("span",i({key:1,role:"status","aria-live":"polite",class:"p-hidden-accessible"},e.ptm("hiddenEmptyMessage"),{"data-p-hidden-accessible":!0}),Z(d.emptyMessageText),17)):R("",!0),l("span",i({role:"status","aria-live":"polite",class:"p-hidden-accessible"},e.ptm("hiddenSelectedMessage"),{"data-p-hidden-accessible":!0}),Z(d.selectedMessageText),17),l("span",i({ref:"lastHiddenFocusableElementOnOverlay",role:"presentation","aria-hidden":"true",class:"p-hidden-accessible p-hidden-focusable",tabindex:0,onFocus:t[4]||(t[4]=function(){return d.onLastHiddenFocus&&d.onLastHiddenFocus.apply(d,arguments)})},e.ptm("hiddenLastFocusableEl"),{"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0}),null,16)],16,zt)):R("",!0)]}),_:3},16,["onEnter","onAfterEnter","onLeave","onAfterLeave"])]}),_:3},8,["appendTo"])],16,Ut)};const Wt={class:"memo-edit-content"},Gt=ze({__name:"MemoEditDialog",props:{visible:{type:Boolean,default:!1},modelValue:{type:String,default:""},header:{type:String,default:"Редактирование текста"}},emits:["update:visible","update:modelValue","save","cancel"],setup(e,{emit:t}){const n=e,i=ye(null);return ge(()=>n.visible,e=>{e&&xe(()=>{var e,t;null==(t=null==(e=i.value)?void 0:e.$el)||t.focus()})}),(t,n)=>(a(),_(we(Ie),{visible:e.visible,header:e.header,style:{width:"600px"},modal:!0,"onUpdate:visible":n[6]||(n[6]=e=>t.$emit("update:visible",e)),onHide:n[7]||(n[7]=e=>t.$emit("cancel"))},{footer:j(()=>[U(we(v),{label:"Отмена",icon:"pi pi-times",onClick:n[4]||(n[4]=e=>t.$emit("cancel")),text:""}),U(we(v),{label:"Сохранить",icon:"pi pi-check",onClick:n[5]||(n[5]=e=>t.$emit("save"))})]),default:j(()=>[l("div",Wt,[U(we(Ue),{ref_key:"textareaRef",ref:i,modelValue:e.modelValue,"onUpdate:modelValue":n[0]||(n[0]=e=>t.$emit("update:modelValue",e)),autoResize:!0,rows:"10",class:"w-full",placeholder:"Введите текст...",onKeydown:[n[1]||(n[1]=J(ke(()=>{},["stop"]),["enter"])),n[2]||(n[2]=J(ke(e=>t.$emit("save"),["ctrl"]),["enter"])),n[3]||(n[3]=J(ke(e=>t.$emit("save"),["meta"]),["enter"]))]},null,8,["modelValue"]),n[8]||(n[8]=l("div",{class:"memo-hint mt-2 text-sm text-color-secondary"},[l("i",{class:"pi pi-info-circle mr-1"}),X(" Ctrl+Enter для сохранения ")],-1))])]),_:1},8,["visible","header"]))}},[["__scopeId","data-v-b1173279"]]),Zt={class:"change-parent-content"},Xt={class:"mb-3"},Jt={class:"field mb-4"},Qt=ze({__name:"ChangeParentDialog",props:{visible:{type:Boolean,default:!1},modelValue:{type:[String,Number],default:null},row:{type:Object,default:null},parentOptions:{type:Array,default:()=>[]},firstHeaderId:{type:String,default:null}},emits:["update:visible","update:modelValue","confirm","make-independent","cancel"],setup(e,{emit:t}){const n=e,i=Ce(()=>{var e,t;return n.row?n.firstHeaderId&&(null==(t=null==(e=n.row.cells)?void 0:e[n.firstHeaderId])?void 0:t.value)?n.row.cells[n.firstHeaderId].value:n.row.id:""});return(t,n)=>(a(),_(we(Ie),{visible:e.visible,header:"Изменить подчинённость",style:{width:"500px"},modal:!0,"onUpdate:visible":n[4]||(n[4]=e=>t.$emit("update:visible",e))},{footer:j(()=>[U(we(v),{label:"Отмена",icon:"pi pi-times",onClick:n[1]||(n[1]=e=>t.$emit("cancel")),text:""}),U(we(v),{label:"Сделать независимой",icon:"pi pi-link",onClick:n[2]||(n[2]=e=>t.$emit("make-independent")),severity:"secondary"}),U(we(v),{label:"Переподчинить",icon:"pi pi-check",onClick:n[3]||(n[3]=e=>t.$emit("confirm")),disabled:!e.modelValue},null,8,["disabled"])]),default:j(()=>[l("div",Zt,[l("p",Xt,[n[5]||(n[5]=l("strong",null,"Запись:",-1)),X(" "+Z(i.value),1)]),l("div",Jt,[n[6]||(n[6]=l("label",{for:"newParentSelect",class:"block mb-2"},"Выберите родительскую запись:",-1)),U(we(Ke),{id:"newParentSelect",modelValue:e.modelValue,"onUpdate:modelValue":n[0]||(n[0]=e=>t.$emit("update:modelValue",e)),options:e.parentOptions,optionLabel:"name",optionValue:"id",placeholder:"Выберите запись...",class:"w-full",filter:"",filterPlaceholder:"Поиск...",showClear:"",emptyMessage:0===e.parentOptions.length?"Нет доступных записей":"Ничего не найдено"},null,8,["modelValue","options","emptyMessage"])])])]),_:1},8,["visible"]))}},[["__scopeId","data-v-fdf06e87"]]),en={class:"button-action-content"},tn={class:"field mb-4"},nn={class:"button-action-list mb-4"},an=["onClick"],ln={class:"action-icon"},on={class:"action-info"},rn={class:"action-label"},sn={class:"action-description"},dn={key:0,class:"action-endpoint"},un={key:0,class:"action-check"},cn={key:0,class:"advanced-params"},pn={key:0,class:"field mb-3"},vn={class:"block mb-2 text-sm"},hn={class:"text-color-secondary mt-1 block"},fn={key:1,class:"preview-section mt-4 p-3"},mn={class:"preview-code"},bn=ze({__name:"ButtonActionDialog",props:{visible:{type:Boolean,default:!1},buttonLabel:{type:String,default:""},selectedAction:{type:Object,default:null},actions:{type:Array,default:()=>[]},initialParams:{type:Object,default:()=>({})}},emits:["update:visible","update:buttonLabel","update:selectedAction","confirm","cancel"],setup(e,{emit:t}){const i=e,o=t,r=ye({targetId:"[ID]",headerId:"",value:"",parentId:"",customUrl:""});function s(e,t){r.value[e]=t}function d(e){return{headerId:"995832 (ID столбца из URL)",value:"Новое значение или [VAL]",parentId:"995870 (ID родительской строки)",customUrl:"api/my-action/[ID]?value=[VAL]"}[e]||""}function u(e){return{headerId:"ID столбца можно найти в URL при клике на заголовок",value:"Можно использовать [VAL] для значения первого столбца",parentId:"ID строки, к которой нужно переместить объект",customUrl:"Используйте [ID] для ID строки и [VAL] для значения"}[e]||""}const c=Ce(()=>{if(!i.selectedAction)return"";if("custom-url"===i.selectedAction.actionType)return r.value.customUrl||"Укажите URL";let e=i.selectedAction.endpoint||"";r.value.targetId&&(e=e.replace("[ID]",r.value.targetId));const t=[];return r.value.headerId&&t.push(`headerId=${r.value.headerId}`),r.value.value&&t.push(`value=${r.value.value}`),r.value.parentId&&t.push(`parentId=${r.value.parentId}`),t.length>0&&(e+="?"+t.join("&")),`${i.selectedAction.method||"POST"} ${e}`}),p=Ce(()=>{if(!i.selectedAction)return!1;const e=i.selectedAction.params||[];for(const t of e)if(!r.value[t])return!1;return!0});return ge(()=>i.initialParams,e=>{r.value={targetId:"[ID]",headerId:"",value:"",parentId:"",customUrl:"",...e}},{deep:!0,immediate:!0}),(t,f)=>(a(),_(we(Ie),{visible:e.visible,header:"Настроить кнопку",style:{width:"600px"},modal:!0,"onUpdate:visible":f[4]||(f[4]=e=>t.$emit("update:visible",e))},{footer:j(()=>[U(we(v),{label:"Отмена",icon:"pi pi-times",onClick:f[2]||(f[2]=e=>t.$emit("cancel")),text:""}),U(we(v),{label:"Применить",icon:"pi pi-check",onClick:f[3]||(f[3]=n=>t.$emit("confirm",{action:e.selectedAction,params:r.value})),disabled:!e.selectedAction||!p.value},null,8,["disabled"])]),default:j(()=>[l("div",en,[l("div",tn,[f[5]||(f[5]=l("label",{class:"block mb-2 font-semibold text-sm"},"Текст кнопки",-1)),U(we(h),{modelValue:e.buttonLabel,"onUpdate:modelValue":f[0]||(f[0]=e=>t.$emit("update:buttonLabel",e)),placeholder:"Например: Удалить, Обновить статус...",class:"w-full"},null,8,["modelValue"])]),f[10]||(f[10]=l("div",{class:"field mb-4"},[l("label",{class:"block mb-2 font-semibold text-sm"},"Действие при клике")],-1)),l("div",nn,[(a(!0),n(z,null,Y(e.actions,t=>{var s,d;return a(),n("div",{key:t.id,class:H(["button-action-item",{selected:(null==(s=e.selectedAction)?void 0:s.id)===t.id,danger:t.danger}]),onClick:e=>function(e){o("update:selectedAction",e),r.value={targetId:"[ID]",headerId:"",value:"",parentId:"",customUrl:"",...i.initialParams}}(t)},[l("div",ln,[l("i",{class:H(t.icon)},null,2)]),l("div",on,[l("div",rn,Z(t.label),1),l("div",sn,Z(t.description),1),t.endpoint?(a(),n("div",dn,[l("code",null,Z(t.method||"POST")+" "+Z(t.endpoint),1)])):R("",!0)]),(null==(d=e.selectedAction)?void 0:d.id)===t.id?(a(),n("div",un,[...f[6]||(f[6]=[l("i",{class:"pi pi-check"},null,-1)])])):R("",!0)],10,an)}),128))]),e.selectedAction?(a(),n("div",cn,[f[9]||(f[9]=l("div",{class:"params-header mb-3"},[l("i",{class:"pi pi-cog"}),l("span",null,"Параметры действия")],-1)),"api-macro"===e.selectedAction.actionType?(a(),n("div",pn,[f[7]||(f[7]=l("label",{class:"block mb-2 text-sm"},[l("strong",null,"ID строки:"),l("span",{class:"text-color-secondary ml-2"},"([ID] = текущая строка, или укажите конкретный ID)")],-1)),U(we(h),{modelValue:r.value.targetId,"onUpdate:modelValue":f[1]||(f[1]=e=>s("targetId",e)),placeholder:"[ID] или 995882",class:"w-full font-mono"},null,8,["modelValue"])])):R("",!0),(a(!0),n(z,null,Y(e.selectedAction.params||[],t=>{var i;return a(),n("div",{key:t,class:"field mb-3"},[l("label",vn,[l("strong",null,Z((null==(i=e.selectedAction.paramLabels)?void 0:i[t])||t)+":",1)]),"customUrl"!==t?(a(),_(we(h),{key:0,modelValue:r.value[t],"onUpdate:modelValue":e=>s(t,e),placeholder:d(t),class:"w-full font-mono"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):(a(),_(we(Ue),{key:1,modelValue:r.value[t],"onUpdate:modelValue":e=>s(t,e),placeholder:d(t),class:"w-full font-mono",rows:"3"},null,8,["modelValue","onUpdate:modelValue","placeholder"])),l("small",hn,Z(u(t)),1)])}),128)),e.selectedAction.endpoint||"custom-url"===e.selectedAction.actionType?(a(),n("div",fn,[f[8]||(f[8]=l("div",{class:"preview-label mb-2"},[l("i",{class:"pi pi-eye"}),l("span",null,"Предпросмотр:")],-1)),l("code",mn,Z(c.value),1)])):R("",!0)])):R("",!0)])]),_:1},8,["visible"]))}},[["__scopeId","data-v-8f763050"]]),yn={key:0,class:"formatting-dialog-content"},gn={class:"field mb-3"},wn={key:0,class:"field mb-3"},kn={class:"field mb-3"},In={class:"flex gap-2 flex-wrap"},xn=["onClick"],Cn={class:"field mb-3"},Sn={class:"flex gap-2 flex-wrap"},Dn=["onClick"],Mn={key:1,class:"mt-4"},Tn=ze({__name:"ConditionalFormattingDialog",props:{visible:{type:Boolean,default:!1},rule:{type:Object,default:null},existingRules:{type:Array,default:()=>[]},conditionOptions:{type:Array,default:()=>[{label:"Больше чем",value:"greater"},{label:"Меньше чем",value:"less"},{label:"Равно",value:"equal"},{label:"Содержит",value:"contains"},{label:"Пусто",value:"empty"},{label:"Не пусто",value:"notEmpty"}]},backgroundColors:{type:Array,default:()=>["#dcfce7","#fef3c7","#fee2e2","#dbeafe","#e9d5ff"]},textColors:{type:Array,default:()=>["#166534","#92400e","#991b1b","#1e40af","#6b21a8"]}},emits:["update:visible","update:rule","save","delete-rule","cancel"],setup(e,{emit:t}){const i=e,o=t,r=Ce(()=>i.rule&&i.rule.headerId?i.existingRules.filter(e=>e.headerId===i.rule.headerId&&e.id!==i.rule.id):[]),s=(e,t)=>{if(!i.rule)return;const n={...i.rule,[e]:t};o("update:rule",n)};return(t,i)=>(a(),_(we(Ie),{visible:e.visible,header:"🎨 Условное форматирование",style:{width:"500px"},modal:!0,"onUpdate:visible":i[4]||(i[4]=e=>t.$emit("update:visible",e))},{footer:j(()=>[U(we(v),{label:"Отмена",icon:"pi pi-times",onClick:i[2]||(i[2]=e=>t.$emit("cancel")),text:""}),U(we(v),{label:"Применить",icon:"pi pi-check",onClick:i[3]||(i[3]=e=>t.$emit("save"))})]),default:j(()=>[e.rule?(a(),n("div",yn,[l("div",gn,[i[5]||(i[5]=l("label",{class:"block mb-2 font-semibold"},"Условие",-1)),U(we(Ke),{modelValue:e.rule.condition,"onUpdate:modelValue":i[0]||(i[0]=e=>s("condition",e)),options:e.conditionOptions,optionLabel:"label",optionValue:"value",placeholder:"Выберите условие...",class:"w-full"},null,8,["modelValue","options"])]),["empty","notEmpty"].includes(e.rule.condition)?R("",!0):(a(),n("div",wn,[i[6]||(i[6]=l("label",{class:"block mb-2 font-semibold"},"Значение",-1)),U(we(h),{modelValue:e.rule.value,"onUpdate:modelValue":i[1]||(i[1]=e=>s("value",e)),placeholder:"Введите значение...",class:"w-full"},null,8,["modelValue"])])),l("div",kn,[i[7]||(i[7]=l("label",{class:"block mb-2 font-semibold"},"Цвет фона",-1)),l("div",In,[(a(!0),n(z,null,Y(e.backgroundColors,t=>(a(),n("div",{key:t,class:H(["color-box",{selected:e.rule.backgroundColor===t}]),style:K({backgroundColor:t}),onClick:e=>s("backgroundColor",t)},null,14,xn))),128))])]),l("div",Cn,[i[8]||(i[8]=l("label",{class:"block mb-2 font-semibold"},"Цвет текста",-1)),l("div",Sn,[(a(!0),n(z,null,Y(e.textColors,t=>(a(),n("div",{key:t,class:H(["color-box",{selected:e.rule.textColor===t}]),style:K({backgroundColor:t}),onClick:e=>s("textColor",t)},null,14,Dn))),128))])]),l("div",{class:"preview-box p-3 border-round",style:K({backgroundColor:e.rule.backgroundColor,color:e.rule.textColor})},[...i[9]||(i[9]=[l("strong",null,"Предпросмотр:",-1),X(" Образец текста ",-1)])],4),r.value.length>0?(a(),n("div",Mn,[i[10]||(i[10]=l("label",{class:"block mb-2 font-semibold"},"Существующие правила для этой колонки:",-1)),(a(!0),n(z,null,Y(r.value,e=>(a(),n("div",{key:e.id,class:"existing-rule p-2 mb-2 border-round flex align-items-center justify-content-between",style:K({backgroundColor:e.backgroundColor,color:e.textColor})},[l("span",null,Z(e.condition)+" "+Z(e.value),1),U(we(v),{icon:"pi pi-trash",text:"",severity:"danger",size:"small",onClick:n=>t.$emit("delete-rule",e.id)},null,8,["onClick"])],4))),128))])):R("",!0)])):R("",!0)]),_:1},8,["visible"]))}},[["__scopeId","data-v-6756c51f"]]),Vn={class:"image-preview-container"},$n=["src","alt"],On=ze({__name:"ImagePreviewDialog",props:{visible:{type:Boolean,default:!1},imageUrl:{type:String,default:""},filename:{type:String,default:"Изображение"}},emits:["update:visible","download","error"],setup:e=>(t,n)=>(a(),_(we(Ie),{visible:e.visible,header:e.filename,style:{width:"auto",maxWidth:"90vw"},modal:!0,dismissableMask:!0,class:"image-preview-dialog","onUpdate:visible":n[3]||(n[3]=e=>t.$emit("update:visible",e))},{footer:j(()=>[U(we(v),{label:"Скачать",icon:"pi pi-download",onClick:n[1]||(n[1]=e=>t.$emit("download"))}),U(we(v),{label:"Закрыть",icon:"pi pi-times",onClick:n[2]||(n[2]=e=>t.$emit("update:visible",!1)),text:""})]),default:j(()=>[l("div",Vn,[l("img",{src:e.imageUrl,alt:e.filename,class:"image-preview-img",onError:n[0]||(n[0]=e=>t.$emit("error"))},null,40,$n)])]),_:1},8,["visible","header"]))},[["__scopeId","data-v-cbea718c"]]),En={class:"coda-style-datatable"},Ln={key:0,class:"dir-preview-card"},Fn={class:"dir-preview-header"},Pn={class:"dir-preview-type"},An={class:"dir-preview-main"},_n={key:0,class:"dir-preview-items"},Rn={key:0,class:"dir-preview-item"},Bn={class:"dir-preview-label"},Un=["innerHTML"],Kn={key:1,class:"dir-preview-item"},Hn={class:"dir-preview-label"},Nn={class:"dir-preview-value dir-preview-count"},zn={key:1,class:"dir-preview-loading"},jn={key:0,class:"nested-preview-card"},qn={class:"nested-preview-header"},Yn={class:"nested-preview-type"},Wn={class:"nested-preview-count-badge"},Gn={key:0,class:"nested-preview-items"},Zn={class:"nested-preview-item-number"},Xn={class:"nested-preview-item-value"},Jn={key:0,class:"nested-preview-more"},Qn={key:1,class:"nested-preview-empty"},ea={key:1,class:"nested-preview-loading"},ta={class:"column-filter-content"},na={class:"filter-header"},aa={class:"filter-title"},la={class:"filter-search"},ia={class:"filter-actions"},oa={class:"filter-values-list"},ra=["onClick"],sa={class:"filter-value-text"},da={class:"row-edit-form"},ua=["onDblclick"],ca={class:"confirmation-content"},pa={class:"type-menu"},va=["onClick"],ha={key:0,class:"bulk-actions-toolbar"},fa={class:"bulk-actions-content"},ma={class:"bulk-selection-count"},ba={class:"bulk-actions-buttons"},ya=["id"],ga={class:"header-content"},wa={key:1,class:"pi pi-hashtag"},ka=["data-header-id","data-term-id","data-is-main","data-type","data-dir-table-id","data-nested","onDragstart","onDragover","onDrop","onContextmenu","title"],Ia={class:"header-content"},xa=["onClick"],Ca={class:"header-text"},Sa={key:0,class:"sort-indicator"},Da={class:"sort-order"},Ma=["onClick","title"],Ta=["onMousedown","onDblclick"],Va={key:0,class:"add-column-header"},$a=["disabled"],Oa={key:0,class:"pi pi-spin pi-spinner"},Ea={key:1,class:"pi pi-plus"},La={key:0,class:"virtual-scroll-spacer"},Fa=["colspan"],Pa=["onClick"],Aa=["colspan"],_a=["data-row-id","onFocusin","onMouseenter","onContextmenu"],Ra=["onMousedown","onDblclick"],Ba={key:0,class:"cell-content row-counter-with-checkbox"},Ua=["onClick"],Ka={key:1,class:"cell-content row-counter-hover"},Ha={class:"row-number-text"},Na=["onClick"],za=["data-cell-id","data-row-id","data-header-id","data-label","onMousedown","onDblclick"],ja={class:"cell-content"},qa={key:1},Ya=["innerHTML"],Wa=["onDblclick","onMouseenter"],Ga=["onDblclick"],Za=["onClick","onMouseenter"],Xa={key:1,class:"cell-empty-placeholder"},Ja=["onDblclick"],Qa=["onClick","onMouseenter"],el={key:1,class:"cell-empty-placeholder"},tl=["onClick","onMouseenter"],nl={class:"nested-label"},al={class:"grant-option-label"},ll={key:0,class:"grant-value"},il={key:1,class:"grant-placeholder"},ol={key:3,class:"cell-editor seamless-editor file-editor-seamless"},rl=["id","onChange"],sl=["for","title"],dl={class:"file-editor-text"},ul=["onClick"],cl={key:1,class:"virtual-scroll-spacer"},pl=["colspan"],vl={key:0},hl={class:"footer-row"},fl=["onContextmenu"],ml={class:"footer-cell-content"},bl={key:0,class:"add-row-container coda-add-row"},yl=["disabled"],gl={class:"add-row-icon"},wl={key:0,class:"pi pi-spin pi-spinner"},kl={key:1,class:"pi pi-plus"},Il={class:"tooltip-text"},xl=ze({__name:"DataTable",props:{headers:{type:Array,default:()=>[]},rows:{type:Array,default:()=>[]},tableWidth:{type:Number,default:null},isLoading:{type:Boolean,default:!1},isLoadingMore:Boolean,disableEditing:{type:Boolean,default:!1},report:{type:Boolean,default:!1},disableTypeEditing:{type:Boolean,default:!1},editMode:{type:String,default:"double-click"},isAddingRow:{type:Boolean,default:!1},isAddingColumn:{type:Boolean,default:!1},allDataLoaded:{type:Boolean,default:!0},dateStyle:{type:String,default:"relative"},serverUrl:{type:String,default:""},typeId:{type:[Number,String],default:null},autoLoadDirs:{type:Boolean,default:!0},database:{type:String,default:"my"}},emits:["update:headers","update:table-config","load-more","cell-update","row-update","add-column","add-row","load-directory-list","open-filter","load-dir-row","load-nested-preview","cell-multi-update","row-delete","row-move-up","open-nested","row-change-parent","bulk-delete","open-directory","button-action-change","upload-file"],setup(t,{expose:o,emit:r}){Se(async()=>{await async function(){if(!Ge)return Ze||(Re.info("📦 Loading FontAwesome CSS..."),Ze=async function(e,t=3,n=1e3){let a=null;for(let o=0;o<=t;o++)try{return Re.debug(`🔄 Dynamic import attempt ${o+1}/${t+1}`),await e()}catch(i){if(a=i,Re.error(`❌ Dynamic import failed (attempt ${o+1}/${t+1}):`,{error:i.message,stack:i.stack,attempt:o+1,maxRetries:t+1}),o<t){const e=n*Math.pow(2,o);Re.info(`⏳ Retrying in ${e}ms...`),await new Promise(t=>setTimeout(t,e))}}Re.error("💥 Dynamic import failed after all retries",{error:a.message,stack:a.stack,attempts:t+1});const l=new Error(`Failed to load module after ${t+1} attempts. This usually means the production server is misconfigured or the build is incomplete. Original error: ${a.message}`);throw l.originalError=a,l.isModuleLoadError=!0,l}(()=>e(()=>import("./index-DSwq2M__.js").then(e=>e.cy),__vite__mapDeps([0,1])),3,1e3).then(()=>{Ge=!0,Re.info("✅ FontAwesome CSS loaded successfully")}).catch(e=>{throw Re.error("❌ Failed to load FontAwesome CSS:",e),Ze=null,e}),Ze)}().catch(console.error),fe.value=$e()});const s={SUM:e=>{var t;return null==(t=e.flat().map(e=>"number"==typeof e?e:parseFloat(e)))?void 0:t.reduce((e,t)=>e+t,0)},AVG:e=>{const t=e.flat().map(e=>"number"==typeof e?e:parseFloat(e)),n=t.reduce((e,t)=>e+t,0);return t.length>0?n/t.length:0},MIN:e=>Math.min(...e.flat().map(e=>"number"==typeof e?e:parseFloat(e))),MAX:e=>Math.max(...e.flat().map(e=>"number"==typeof e?e:parseFloat(e))),COUNT:e=>e.flat().length,IF:([e,t,n])=>e?t:n,NUMBER:([e])=>isNaN(parseFloat(e))?0:parseFloat(e)},d=[{id:"update-cell",label:"Обновить ячейку",icon:"pi pi-pencil",actionType:"api-macro",method:"POST",endpoint:"_m_set/[ID]",description:"Обновить значение ячейки (можно указать любой ID строки и столбца)",params:["headerId","value"],paramLabels:{headerId:"ID столбца",value:"Новое значение"}},{id:"delete-row",label:"Удалить строку",icon:"pi pi-trash",actionType:"api-macro",method:"POST",endpoint:"_m_del/[ID]",description:"Удалить строку (укажите [ID] для текущей или конкретный ID)",danger:!0,params:[],refreshAction:"delete-row"},{id:"move-up",label:"Переместить вверх",icon:"pi pi-arrow-up",actionType:"api-macro",method:"POST",endpoint:"_m_up/[ID]",description:"Переместить строку вверх в порядке сортировки",params:[],refreshAction:"reload-table"},{id:"move-to-parent",label:"Изменить родителя",icon:"pi pi-sitemap",actionType:"api-macro",method:"POST",endpoint:"_m_move/[ID]",description:"Переместить строку к другому родителю",params:["parentId"],paramLabels:{parentId:"ID нового родителя"},refreshAction:"reload-table"},{id:"custom-url",label:"Кастомный URL",icon:"pi pi-code",actionType:"custom-url",description:"Свой URL с поддержкой [ID] и [VAL] плейсхолдеров",params:["customUrl"],paramLabels:{customUrl:"URL (например: api/action/[ID]?val=[VAL])"}},{id:"none",label:"Без действия",icon:"pi pi-ban",actionType:"none",description:"Кнопка без действия (неактивна)",params:[]}],u=t,c=r,p=ye(!1),v=ye(null),f=ye([]),m=ye(!1),b=ye(null),y=ye(null),g=ye(""),w=ye({}),k=ye([...u.headers]),I=ye(We),x=ye(null),C=ye(!1),S=ye({headerId:null,startX:0,startWidth:0,currentTh:null,tableStartWidth:0}),D=ye(null),M=ye(56),T=ye(null),V=ye(null),$=ye(""),O=ye(null),E=ye(null);let L=null,F=null;const B=()=>{F&&(clearTimeout(F),F=null),T.value&&T.value.hide(),V.value=null},G=ye(null),Q=ye(!1),ee=ye(""),te=ye({});let ne=null;const ae=e=>{const t=e.target.closest("[data-tooltip]");if(!t)return;ne&&(clearTimeout(ne),ne=null);const n=t.getAttribute("data-tooltip");if(!n)return;ee.value=n;const a=t.getBoundingClientRect();te.value={position:"fixed",left:`${a.left+a.width/2}px`,top:a.top-8+"px",transform:"translate(-50%, -100%)",zIndex:1e4},Q.value=!0},le=e=>{e.target.closest("[data-tooltip]")&&(ne=setTimeout(()=>{Q.value=!1},100))},ie=ye({}),oe=ye({}),se=ye([]),de=ye(!1),ue=ye(null),ce=ye({}),pe=ye(!1),ve=ye(""),he=ye(""),fe=ye({}),me=ye(!1),be=ye({rowId:null,startY:0,startHeight:0,currentTr:null}),Ie=()=>u.typeId?`integram_row_heights_${u.typeId}`:null,$e=()=>{const e=Ie();if(!e)return{};try{const t=localStorage.getItem(e);return t?JSON.parse(t):{}}catch(t){return{}}},Oe=()=>{const e=Ie();if(e)try{localStorage.setItem(e,JSON.stringify(fe.value))}catch(t){}},Ee=ye(null),Le=ye(!1),Fe=ye(new Set),Pe=ye(null),Ae=ye(!1),_e=ye(new Set),Be=ye([]),ze=ye(!1),qe=ye({}),Ye=ye(null),Qe=ye([]),et=ye(null),tt=ye(null),nt=ye(null),at=ye(null),lt=ye(null),it=async()=>{var e,t;await xe(),null==(t=null==(e=nt.value)?void 0:e.$el)||t.focus()},ot=async()=>{var e,t;await xe(),null==(t=null==(e=at.value)?void 0:e.$el)||t.focus()},rt=ye(new Map),st=ye(new Map),dt=ye(new Map),ut=ye(new Map),ct=Ce(()=>({width:u.tableWidth?`${u.tableWidth}px`:"auto","table-layout":u.tableWidth?"fixed":"auto"})),pt=Ce(()=>({width:`${M.value}px`,minWidth:`${M.value}px`})),vt=Ce(()=>I.value.filter(e=>10!==e.value)),ht=Ce(()=>{var e;return(null==(e=xl.value)?void 0:e.dirTableId)&&en.value.has(xl.value.dirTableId)}),ft=ye({start:null,end:null,isSelecting:!1}),mt=Ce(()=>{if(!ft.value.start||!ft.value.end)return null;const e=kt.value.findIndex(e=>e.id===ft.value.start.rowId),t=kt.value.findIndex(e=>e.id===ft.value.end.rowId),n="row-counter"===ft.value.start.headerId?-1:k.value.findIndex(e=>e.id===ft.value.start.headerId),a="row-counter"===ft.value.end.headerId?-1:k.value.findIndex(e=>e.id===ft.value.end.headerId);return{minRow:Math.min(e,t),maxRow:Math.max(e,t),minCol:Math.min(n,a),maxCol:Math.max(n,a)}});ye([]),ye(-1);const bt=ye(new Map),yt=(e,t)=>{const n=`${e}_${t}`;bt.value.set(n,Date.now()),bt.value=new Map(bt.value)},gt=(e,t)=>{const n=`${e}_${t}`;return bt.value.has(n)},wt=Ce(()=>{const e=new Map;return u.rows.forEach(t=>{const n=new Map;t.values.forEach(e=>{e.headerId,n.set(e.headerId,e)}),e.set(t.id,n)}),e}),kt=Ce(()=>u.rows.map(e=>({id:e.id,cells:Object.fromEntries(k.value.map(t=>{var n;const a=(null==(n=wt.value.get(e.id))?void 0:n.get(t.id))||{value:null};"req_957"===t.id&&e.id;const l=`${e.id}:${t.id}`,i=Vl.value.get(l),o={...a,value:void 0!==i?i:a.value,nested:a.nested||t.nested,nestedTableId:a.nestedTableId||t.nestedTableId,nestedLink:a.nestedLink};return"req_957"===t.id&&e.id,[t.id,o]}))}))),It=Ce(()=>{const e=Object.entries(ie.value).filter(([,e])=>e&&e.size>0);return 0===e.length?kt.value:kt.value.filter(t=>e.every(([e,n])=>{var a;const l=null==(a=t.cells[e])?void 0:a.value,i=String(l??"");return n.has(i)}))}),xt=Ce(()=>{if(0===Be.value.length)return It.value;const e=[...It.value];return e.sort((e,t)=>{var n,a;for(const{headerId:l,direction:i}of Be.value){const o=null==(n=e.cells[l])?void 0:n.value,r=null==(a=t.cells[l])?void 0:a.value;if(null==o&&null==r)continue;if(null==o)return 1;if(null==r)return-1;let s=0;if("number"==typeof o&&"number"==typeof r)s=o-r;else{const e=String(o).toLowerCase(),t=String(r).toLowerCase();s=e.localeCompare(t,"ru")}if(0!==s)return"asc"===i?s:-s}return 0}),e}),Ct=Ce(()=>{if(!u.allDataLoaded){const e={};return k.value.forEach(t=>{e[t.id]={sum:"⚠️",avg:"⚠️",count:"⚠️"}}),e}const e={};return k.value.forEach(t=>{const n=t.id;qe.value[n];const a=xt.value.map(e=>{var t;return null==(t=e.cells[n])?void 0:t.value}).filter(e=>null!=e&&!isNaN(Number(e))).map(e=>Number(e));if(0===a.length)return void(e[n]={sum:null,avg:null,count:0});const l=a.reduce((e,t)=>e+t,0),i=l/a.length,o=a.length;e[n]={sum:l.toFixed(2),avg:i.toFixed(2),count:o}}),e}),{currentGroupColumns:Dt,expandedGroups:Mt,currentGroupColumn:Tt,flattenedRows:Vt,toggleMultiGroupBy:$t,groupMultiData:Ot,toggleGroupBy:Et,groupData:Lt,toggleGroup:Ft,formatMultiGroupHeader:Pt,cleanup:At}=function(e,t){const n=ye(null),a=ye([]),l=ye({}),i=ye(null),o=Ce(()=>{if(!n.value)return t.value.map(e=>({type:"row",data:e}));const e=[];for(const[t,a]of Object.entries(n.value.groups))e.push({type:"group",key:t,data:a}),l.value[t]&&e.push(...a.rows.map(e=>({type:"row",data:e})));return e}),r=e=>{const a={};t.value.forEach(t=>{const n=e.map(e=>{const n=t.cells[e],a=null==n?void 0:n.value;return null!=a?a:"(Пусто)"}).join("|");a[n]||(a[n]={rows:[],count:0}),a[n].rows.push(t),a[n].count++}),n.value={columns:e,groups:a},l.value=Object.keys(a).reduce((e,t)=>(e[t]=!0,e),{})},s=e=>{const a={};t.value.forEach(t=>{const n=t.cells[e],l=(null==n?void 0:n.value)||"(Пусто)";a[l]||(a[l]={rows:[],count:0}),a[l].rows.push(t),a[l].count++}),n.value={column:e,groups:a},l.value=Object.keys(a).reduce((e,t)=>(e[t]=!0,e),{})};return{groupedData:n,currentGroupColumns:a,expandedGroups:l,currentGroupColumn:i,flattenedRows:o,toggleMultiGroupBy:t=>{const i=t.filter(t=>t&&e.value.some(e=>e.id===t));0===i.length||a.value.length===i.length&&a.value.every(e=>i.includes(e))?(n.value=null,a.value=[],l.value={}):(a.value=i,r(i))},groupMultiData:r,toggleGroupBy:e=>{i.value===e?(n.value=null,i.value=null,l.value={}):(i.value=e,s(e))},groupData:s,toggleGroup:e=>{l.value[e]=!l.value[e]},formatMultiGroupHeader:t=>t.split("|").map((t,n)=>{const l=a.value[n],i=e.value.find(e=>e.id===l);return i?`${i.value}: ${t}`:t}).join("; "),cleanup:()=>{n.value=null,a.value=[],l.value={},i.value=null}}}(k,xt),{isVirtualScrollEnabled:Rt,visibleRowRange:Bt,visibleRows:Ut,totalRowsHeight:Kt,updateTableHeight:Ht,handleScroll:Nt}=function(e,t){const n=ye(0),a=ye(600),l=Ce(()=>!1),i=Ce(()=>{if(!l.value)return{start:0,end:e.value.length,offset:0};const t=n.value,i=Math.floor(t/32),o=Math.ceil(a.value/32),r=Math.max(0,i-20);return{start:r,end:Math.min(e.value.length,i+o+20),offset:32*r}}),o=Ce(()=>{const{start:t,end:n}=i.value;return e.value.slice(t,n)}),r=Ce(()=>l.value?32*e.value.length:null);return{virtualScrollTop:n,containerHeight:a,isVirtualScrollEnabled:l,visibleRowRange:i,visibleRows:o,totalRowsHeight:r,updateTableHeight:()=>{const e=document.querySelector(".table-container");if(!e)return;const t=document.querySelector(".p-tabview-tablist-container"),n=t?t.offsetHeight:0,l=document.querySelector(".layout-main"),i=l?l.offsetHeight:0,o=document.querySelector(".p-tabview-panels"),r=o?window.getComputedStyle(o):null,s=r?parseFloat(r.paddingTop):0,d=r?parseFloat(r.paddingBottom):0,u=l?window.getComputedStyle(l):null;let c=i-n-s-d-(u?parseFloat(u.paddingBottom):0);if(!l||c<=0){const t=e.clientHeight;c=t>0?t:Math.max(400,window.innerHeight-200)}e.style.setProperty("max-height",`${c}px`),a.value=c},handleScroll:e=>{const a=e.target,{scrollTop:i,scrollHeight:o,clientHeight:r}=a;l.value&&(n.value=i),o-(i+r)<100&&t("load-more")}}}(Vt,c),{dropTargetColumnId:zt,dropPosition:jt,handleDragStart:qt,handleDragOver:Yt,handleDrop:Wt,handleDragEnd:Zt}=function(e,t,n,a){const l=ye(null),i=ye(null),o=ye(null),r=()=>{l.value=null,i.value=null,o.value=null};return{draggedColumnId:l,dropTargetColumnId:i,dropPosition:o,handleDragStart:(e,t)=>{l.value=t,e.dataTransfer.effectAllowed="move",e.currentTarget.classList.add("dragging"),e.dataTransfer.setDragImage(new Image,0,0)},handleDragOver:(e,n)=>{if(l.value===n||t.value)return;const a=e.currentTarget.getBoundingClientRect(),r=e.clientX-a.left<a.width/2;i.value=n,o.value=r?"left":"right"},handleDrop:(i,s)=>{if(!t.value){if(i.preventDefault(),l.value&&l.value!==s){const t=[...e.value],i=t.findIndex(e=>e.id===l.value),r=t.findIndex(e=>e.id===s),d="left"===o.value?r:r+1;if(-1!==i&&-1!==r){const[l]=t.splice(i,1);t.splice(d,0,l),e.value=t,a("update:table-config",{headers:t,tableWidth:n.value.offsetWidth})}}r()}},handleDragEnd:e=>{e.currentTarget.classList.remove("dragging"),r()},resetDragState:r}}(k,C,x,c),{directoryLists:Xt,directoryCache:Jt,loadingDirectories:en,isDirectoryLoading:tn,getDirectoryOptions:nn,loadDirectoryList:an,updateDirValue:ln,updateMultiDirValue:on,refreshDirectoryCache:rn,clearDirectoryCache:sn}=function(e,t){const n=ye({}),a=ye({}),l=ye(new Set),i=e=>{a.value[e]||(l.value.add(e),t("load-directory-list",{dirTableId:e,callback:t=>{a.value[e]=t,l.value.delete(e)}}))},o=Ce(()=>l.value.size>0);return{directoryLists:n,directoryCache:a,loadingDirectories:l,isLoadingAnyDirectory:o,isDirectoryLoading:e=>l.value.has(e),getDirectoryOptions:e=>a.value[e]||[],loadDirectoryList:i,updateDirValue:e=>{var t;const n=e.dirTableId,l=null==(t=a.value[n])?void 0:t.find(t=>t.id===e.dirRowId);e.value=l?l.value:""},updateMultiDirValue:e=>{var t;const n=e.dirTableId,l=null==(t=a.value[n])?void 0:t.filter(t=>e.dirValues.includes(t.id));e.value=l.map(e=>e.value).join(", ")||""},preloadAllDirectories:async()=>{const i=[...new Set(e.value.map(e=>e.dirTableId).filter(Boolean))];0!==i.length&&await Promise.all(i.map(e=>new Promise(i=>{a.value[e]?i():(l.value.add(e),t("load-directory-list",{dirTableId:e,callback:t=>{a.value[e]=t,n.value[e]=t,l.value.delete(e),i()}}))})))},loadAllDirectories:()=>{const t=new Set;e.value.forEach(e=>{e.dirTableId&&t.add(e.dirTableId)}),t.forEach(e=>i(e))},refreshDirectoryCache:()=>{Object.keys(a.value).forEach(e=>{l.value.add(e),t("load-directory-list",{dirTableId:e,callback:t=>{a.value[e]=t,n.value[e]=t,l.value.delete(e)}})})},clearDirectoryCache:()=>{n.value={},a.value={},l.value.clear()}}}(k,c),{dirRowCache:dn,isBackgroundLoadingDirs:un,backgroundLoadProgress:cn,getDirRowCacheKey:pn,isCacheValid:vn,handleRowHover:hn,handleRowFocus:fn,loadAllDirDataInBackground:mn,stopBackgroundLoading:yn,cleanup:gn}=function(e,t,n){const a=3e5,l=ye(new Map),i=ye(new Set),o=ye(!1),r=ye({loaded:0,total:0});let s=null;const d=(e,t)=>`${e}:${t}`,u=e=>!!e&&Date.now()-e.timestamp<a,c=(e,t,a)=>{if(!0===a);else if(!1===a||"false"===a)return;const o=d(e,t),r=l.value.get(o);u(r)||i.value.has(o)||(i.value.add(o),n("load-dir-row",{dirTableId:e,dirRowId:t,callback:e=>{l.value.set(o,{data:e||null,timestamp:Date.now()}),i.value.delete(o)}}))},p=(t,n)=>{if(!0===n);else if(!1===n||"false"===n)return;if(!(null==t?void 0:t.cells))return;const a=[];e.value.forEach(e=>{var n;if(!e.dirTableId)return;const l=t.cells[e.id];l&&(l.dirRowId&&a.push({dirTableId:e.dirTableId,dirRowId:l.dirRowId}),(null==(n=l.dirValues)?void 0:n.length)>0&&l.dirValues.forEach(t=>{t.dirRowId&&a.push({dirTableId:e.dirTableId,dirRowId:t.dirRowId})}))}),a.forEach(e=>c(e.dirTableId,e.dirRowId,n))},v=()=>{s&&(clearTimeout(s),s=null)},h=()=>{o.value=!1,r.value={loaded:0,total:0}},f=()=>{l.value.clear(),i.value.clear(),v()};return{dirRowCache:l,preloadingDirRows:i,isBackgroundLoadingDirs:o,backgroundLoadProgress:r,DIR_ROW_CACHE_TTL:a,ROW_HOVER_DEBOUNCE_MS:150,BACKGROUND_LOAD_DELAY_MS:500,getDirRowCacheKey:d,isCacheValid:u,preloadSingleDirRow:c,preloadRowDirData:p,handleRowHover:(e,t=!0)=>{s&&clearTimeout(s),s=setTimeout(()=>{p(e,t)},150)},handleRowFocus:(e,t,n=!0)=>{e.target&&t&&p(t,n)},cancelRowHoverPreload:v,loadAllDirDataInBackground:async(a=!0)=>{if(!1===a||"false"===a)return;if(o.value)return;const s=new Map;t.value.forEach(t=>{(null==t?void 0:t.cells)&&e.value.forEach(e=>{var n;if(!e.dirTableId)return;const a=t.cells[e.id];if(a){if(a.dirRowId){const t=d(e.dirTableId,a.dirRowId);s.has(t)||u(l.value.get(t))||s.set(t,{dirTableId:e.dirTableId,dirRowId:a.dirRowId})}(null==(n=a.dirValues)?void 0:n.length)>0&&a.dirValues.forEach(t=>{if(t.dirRowId){const n=d(e.dirTableId,t.dirRowId);s.has(n)||u(l.value.get(n))||s.set(n,{dirTableId:e.dirTableId,dirRowId:t.dirRowId})}})}})});const c=Array.from(s.values());if(0!==c.length){o.value=!0,r.value={loaded:0,total:c.length};for(let e=0;e<c.length&&o.value;e++){const t=c[e],a=d(t.dirTableId,t.dirRowId);u(l.value.get(a))||i.value.has(a)?r.value.loaded++:(await new Promise(e=>{i.value.add(a),n("load-dir-row",{dirTableId:t.dirTableId,dirRowId:t.dirRowId,callback:t=>{l.value.set(a,{data:t||null,timestamp:Date.now()}),i.value.delete(a),r.value.loaded++,e()}})}),e<c.length-1&&await new Promise(e=>setTimeout(e,500)))}o.value=!1}},stopBackgroundLoading:h,clearDirRowCache:f,cleanup:()=>{v(),h(),f()}}}(k,kt,c),{grantOptions:wn,loading:kn,loadGrantOptions:In,formatGrantValue:xn,getGrantIcon:Cn,isSystemGrant:Sn}=je(),{editingCell:Dn,editingValue:Mn,editingOptions:Vn,editingMultiValue:$n,currentEditingHeader:xl,cellEditorInput:Cl,isDropdownOpen:Sl,memoEditingValue:Dl,isMemoDialogVisible:Ml,memoDialogHeader:Tl,localCellOverrides:Vl,startCellEdit:$l,saveCellEdit:Ol,cancelCellEdit:El,saveAndCloseCellEdit:Ll,isEditingCell:Fl,isInlineEditing:Pl,handleDropdownClick:Al,handleMultiSelectHide:_l,handleMultiSelectKeydown:Rl,handleDropdownKeydown:Bl,handleDropDownHide:Ul,handleDocumentClick:Kl,handleCellClick:Hl,handleCellDoubleClick:Nl,handleNativeFileSelect:zl,clearFileValue:jl,getFileName:ql,saveMemoEdit:Yl,cancelMemoEdit:Wl,handleGlobalEscForDropdown:Gl,cleanup:Zl}=function(e,t,n,a,l,i,o,r,s,d){const u=ye(null),c=ye(null),p=ye([]),v=ye([]),h=ye(null),f=ye(null),m=ye(!1),b=ye(!1),y=ye(null),g=ye(""),w=ye(!1),k=ye("Редактирование текста"),I=ye(null),x=ye(new Map),C=e=>{"Escape"===e.key&&b.value&&(m.value=!0)};ge(b,(e,t)=>{e&&!t?document.addEventListener("keydown",C,!0):!e&&t&&document.removeEventListener("keydown",C,!0)}),ge(u,e=>{if(e&&e.headerId){const t=n.value.find(t=>t.id===e.headerId);(null==t?void 0:t.dirTableId)&&xe(()=>{const e=document.querySelector(".seamless-editor .p-dropdown, .seamless-editor .p-multiselect");if(e){const t=e.querySelector("input");t&&t.focus()}})}});const S=async(a,o)=>{var r,b,x;if(e.disableEditing)return;if((null==(r=u.value)?void 0:r.headerId)===a&&(null==(b=u.value)?void 0:b.rowId)===o)return;m.value=!1,i();const C=null==(x=t.value.find(e=>e.id===o))?void 0:x.cells[a],S=n.value.find(e=>e.id===a),T="dir"===(null==S?void 0:S.columnType)||"multi"===(null==S?void 0:S.columnType);if(!(null==S?void 0:S.nested)&&"nested"!==(null==S?void 0:S.columnType)&&!(null==C?void 0:C.nested)||T){if(11!==(null==S?void 0:S.type)){if(12===(null==S?void 0:S.type))return y.value={headerId:a,rowId:o},g.value=(null==C?void 0:C.value)||"",k.value=S.value||"Редактирование текста",w.value=!0,void xe(()=>{var e,t;null==(t=null==(e=I.value)?void 0:e.$el)||t.focus()});if(2===(null==S?void 0:S.type))return y.value={headerId:a,rowId:o},g.value=(null==C?void 0:C.value)||"",k.value=S.value||"Редактирование HTML",w.value=!0,void xe(()=>{var e,t;null==(t=null==(e=I.value)?void 0:e.$el)||t.focus()});if(5===(null==S?void 0:S.type))return u.value={headerId:a,rowId:o},h.value=S,c.value=(null==C?void 0:C.value)||null,(null==s?void 0:s.value)&&0!==s.value.length||d(),p.value=(null==s?void 0:s.value)||[],void xe(()=>{M()});if(h.value=S,C)if(u.value={headerId:a,rowId:o},S.dirTableId)"multi"===S.columnType?v.value=C.dirValues?C.dirValues.map(e=>e.dirRowId):[]:c.value=C.dirRowId||null,l("load-directory-list",{dirTableId:S.dirTableId,callback:e=>{p.value=e,"multi"===S.columnType?D():M()}});else if([4,9].includes(S.type)&&"number"==typeof C.value?c.value=new Date(1e3*C.value):c.value=C.value,await xe(),await xe(),f.value){const e=Array.isArray(f.value)?f.value[0]:f.value;if(!e)return;const t=e.$el||e;if(t){const e=t.querySelector?t.querySelector("input, textarea"):t;if(e&&"function"==typeof e.focus){e.focus();try{e.select&&"function"==typeof e.select?e.select():e.setSelectionRange&&void 0!==e.value&&e.setSelectionRange(0,String(e.value).length)}catch(V){}}}}}}else O(S,C)},D=async()=>{await xe(),await xe(),requestAnimationFrame(()=>{setTimeout(()=>{const e=document.querySelector(".seamless-editor .p-multiselect")||document.querySelector(".seamless-editor.p-multiselect")||document.querySelector(".cell-editor .p-multiselect");e&&e.click()},30)})},M=async()=>{await xe(),requestAnimationFrame(()=>{setTimeout(()=>{const e=document.querySelector(".seamless-editor.p-dropdown");if(e){const t=e.querySelector("input");t&&t.focus();const n=e.querySelector(".p-dropdown-trigger");n&&n.click()}},20)})},T=(e,t)=>{const a=n.value.find(t=>t.id===e);let i,o,s;if(null==a?void 0:a.dirTableId){if("multi"===a.columnType){const n=v.value;i=p.value.filter(e=>n.includes(e.id)).map(e=>e.value).join(", "),s=n.map(e=>({dirRowId:e}));const o=`${t}:${e}`;return x.value.set(o,i),l("cell-multi-update",{rowId:t,headerId:e,dirTableId:a.dirTableId,dirValues:s}),void r(e,t)}{const e=c.value,t=p.value.find(t=>t.id===e);i=t?t.value:"",o=e}const n=`${t}:${e}`;x.value.set(n,i),l("cell-update",{rowId:t,headerId:e,value:i,type:a.type,dirRowId:o,dirValues:s}),r(e,t)}else{i=c.value;const n=`${t}:${e}`;x.value.set(n,i),l("cell-update",{rowId:t,headerId:e,value:i,type:a.type}),r(e,t)}},V=()=>{m.value=!0;const e=document.querySelector(".seamless-editor .p-multiselect");e&&e.removeEventListener("click",E),u.value=null,c.value=null,v.value=[],h.value=null,setTimeout(()=>{m.value=!1},100)},$=(e,t)=>{u.value&&!m.value&&(T(e,t),V())},O=(e,t)=>{if(e.nested||"nested"===e.columnType){const n={tableId:e.nestedTableId||e.id,parentRowId:t.nestedLink,tableName:e.value||t.value};l("open-nested",n)}},E=e=>{e.stopPropagation()},L=()=>{w.value=!1,y.value=null,g.value=""};return{editingCell:u,editingValue:c,editingOptions:p,editingMultiValue:v,currentEditingHeader:h,cellEditorInput:f,isCancellingEdit:m,isDropdownOpen:b,memoEditingCell:y,memoEditingValue:g,isMemoDialogVisible:w,memoDialogHeader:k,memoTextarea:I,localCellOverrides:x,startCellEdit:S,saveCellEdit:T,cancelCellEdit:V,saveAndCloseCellEdit:$,isEditingCell:(e,t)=>{var n,a,l,i;return(null==(n=u.value)?void 0:n.headerId)===e&&(null==(a=u.value)?void 0:a.rowId)===t||(null==(l=y.value)?void 0:l.headerId)===e&&(null==(i=y.value)?void 0:i.rowId)===t},isInlineEditing:(e,t)=>{var n,a;return(null==(n=u.value)?void 0:n.headerId)===e&&(null==(a=u.value)?void 0:a.rowId)===t},autoOpenMultiSelect:D,autoOpenDropdown:M,handleDropdownClick:E,handleMultiSelectHide:()=>{var e;b.value=!1,!m.value&&u.value&&"multi"===(null==(e=h.value)?void 0:e.columnType)&&(T(u.value.headerId,u.value.rowId),setTimeout(()=>{V()},0))},handleMultiSelectKeydown:e=>{if("Escape"===e.key)m.value=!0,e.stopPropagation(),e.preventDefault(),V();else if("a"===e.key&&(e.ctrlKey||e.metaKey))e.preventDefault(),p.value.length>0&&(v.value=p.value.map(e=>e.id));else if("Enter"===e.key&&!e.shiftKey){const e=document.querySelector(".seamless-editor .p-multiselect");if(e&&document.querySelector(".p-multiselect-panel")){const t=e.querySelector(".p-multiselect-trigger");t&&t.click()}}},handleDropdownKeydown:e=>{"Escape"===e.key?(m.value=!0,V()):e.key},handleDropDownHide:()=>{var e,t;b.value=!1,!m.value&&u.value&&(null==(e=h.value)?void 0:e.dirTableId)&&"multi"!==(null==(t=h.value)?void 0:t.columnType)&&(T(u.value.headerId,u.value.rowId),setTimeout(()=>{V()},0))},handleDocumentClick:e=>{if(!b.value&&u.value){const t=document.querySelector(`td[data-row-id="${u.value.rowId}"][data-header-id="${u.value.headerId}"]`),n=document.querySelector(`td.row-counter-cell[data-row-id="${u.value.rowId}"]`);if(!t&&!n)return;let a=!1;t&&t.contains(e.target)&&(a=!0),n&&n.contains(e.target)&&(a=!0),a||$(u.value.headerId,u.value.rowId)}},handleCellClick:(t,n,l)=>{t.shiftKey&&t.preventDefault(),"row-counter"!==n&&(!u.value||u.value.headerId===n&&u.value.rowId===l||$(u.value.headerId,u.value.rowId),u.value&&u.value.headerId===n&&u.value.rowId===l||("single-click"!==e.editMode||e.disableEditing?t.shiftKey&&a.value.start?a.value.end={headerId:n,rowId:l}:a.value={start:{headerId:n,rowId:l},end:null,isSelecting:!1}:t.shiftKey&&a.value.start?a.value.end={headerId:n,rowId:l}:t.ctrlKey||t.metaKey?a.value={start:{headerId:n,rowId:l},end:null,isSelecting:!1}:(a.value={start:{headerId:n,rowId:l},end:null,isSelecting:!1},S(n,l))))},handleCellDoubleClick:O,handleFileUpload:(e,t,n)=>{var a;const i=null==(a=e.files)?void 0:a[0];i&&l("upload-file",{rowId:n.id,headerId:t.id,termId:t.termId,baseType:t.type,file:i,callback:e=>{(null==e?void 0:e.success)&&(c.value=e.filename||i.name,V())}})},handleNativeFileSelect:(e,t,n)=>{var a,i;const o=null==(i=null==(a=e.target)?void 0:a.files)?void 0:i[0];o&&(l("upload-file",{rowId:n.id,headerId:t.id,termId:t.termId,baseType:t.type,file:o,callback:e=>{(null==e?void 0:e.success)&&(c.value=e.filename||o.name,V())}}),e.target.value="")},clearFileValue:(e,t)=>{l("cell-update",{rowId:t.id,headerId:e.id,value:"",type:e.type}),c.value="",V()},getFileName:e=>{if(!e)return"";const t=String(e),n=t.match(/<a[^>]*>([^<]*)<\/a>/i);return n?n[1]:t.includes("/")?t.split("/").pop()||t:t.includes(":")&&t.split(":").pop()||t},saveMemoEdit:()=>{if(!y.value)return;const{headerId:e,rowId:t}=y.value,a=n.value.find(t=>t.id===e),i=`${t}:${e}`;x.value.set(i,g.value),l("cell-update",{rowId:t,headerId:e,value:g.value,type:(null==a?void 0:a.type)||12}),r(e,t),w.value=!1,y.value=null,g.value=""},cancelMemoEdit:L,handleGlobalEscForDropdown:C,cleanup:()=>{document.removeEventListener("keydown",C,!0),V(),L()}}}(u,kt,k,ft,c,B,0,yt,wn,In),{isRowEditDialogVisible:Xl,isConfirmDialogVisible:Jl,confirmMessage:Ql,pendingAction:ei,editingRow:ti,fieldErrors:ni,contextMenuRow:ai,changeParentRow:li,copiedCellValue:ii,showConfirmationDialog:oi,confirmAction:ri,onRowContextMenu:si,copyCellValue:di,pasteCellValue:ui,editRow:ci,deleteRow:pi,startRowEdit:vi,saveRowEdit:hi,cancelRowEdit:fi,cleanup:mi}=function(e,t,n,a,l){const i=ye(!1),o=ye(!1),r=ye(""),s=ye(null),d=ye(null),u=ye(null),c=ye({}),p=ye(null),v=ye(null),h=ye(null),f=(e,t,n=null)=>{r.value=e,s.value=t,d.value=n,o.value=!0},m=async n=>{e.disableEditing||(t.value.forEach(e=>{e.dirTableId&&a(e.dirTableId)}),u.value={id:n.id,headers:t.value.map(e=>{const t=n.cells[e.id]||{value:null,dirRowId:null,dirValues:[]},a=e.nested||"nested"===e.columnType||(null==t?void 0:t.nested);let l=t.value;return[4,9].includes(e.type)&&"number"==typeof l&&(l=new Date(1e3*l)),{headerId:e.id,value:l,dirRowId:t.dirRowId,dirValues:t.dirValues?t.dirValues.map(e=>e.dirRowId):[],columnType:e.columnType,type:e.type,dirTableId:e.dirTableId,isNested:a,nestedTableId:e.nestedTableId||e.id,nestedLink:t.nestedLink}})},i.value=!0)},b=()=>{c.value={};let e=!0;return u.value.headers.forEach(t=>{t.isNested||t.required&&!t.value&&(c.value[t.headerId]="Это поле обязательно",e=!1)}),e},y=()=>{i.value=!1,u.value=null,c.value={}};return{isRowEditDialogVisible:i,isConfirmDialogVisible:o,confirmMessage:r,pendingAction:s,pendingActionData:d,editingRow:u,fieldErrors:c,contextMenuRow:p,changeParentRow:v,copiedCellValue:h,showConfirmationDialog:f,confirmAction:()=>{s.value&&s.value(d.value),o.value=!1},onRowContextMenu:(e,t)=>{p.value=t},copyCellValue:e=>{if(!p.value||!e.value.start)return;const t=e.value.start.headerId;if("row-counter"===t)return;const n=p.value.cells[t];n&&(h.value=n.value)},pasteCellValue:e=>{if(!p.value||!e.value.start||!h.value)return;const t=e.value.start.headerId;"row-counter"!==t&&l("cell-update",{rowId:p.value.id,headerId:t,value:h.value})},editRow:()=>{p.value&&m(p.value)},deleteRow:()=>{p.value&&f("Вы уверены, что хотите удалить эту строку? Данные будут потеряны.",()=>l("row-delete",p.value.id))},startRowEdit:m,saveRowEdit:()=>{if(!b())return;const e={id:u.value.id,headers:u.value.headers.filter(e=>!e.isNested).map(e=>{var t,a;let l=e.value,i=null,o=[];const r=e.type;if(e.dirTableId)if("multi"===e.columnType){const a=e.dirValues;l=(null==(t=n.value[e.dirTableId])?void 0:t.filter(e=>a.includes(e.id))).map(e=>e.value).join(", "),o=a.map(e=>({dirRowId:e}))}else{i=e.dirRowId;const t=null==(a=n.value[e.dirTableId])?void 0:a.find(e=>e.id===i);l=(null==t?void 0:t.value)||""}else[4,9].includes(r)&&(l instanceof Date?l=Math.floor(l.getTime()/1e3):null!==l&&""!==l||(l=null));return{headerId:e.headerId,value:l,dirRowId:i,dirValues:o,type:r}})};l("row-update",e),i.value=!1},validateRow:b,cancelRowEdit:y,cleanup:()=>{y(),o.value=!1,p.value=null,v.value=null,h.value=null}}}(u,k,Jt,an,c),{editingHeaderId:bi,editingHeaderName:yi,currentHeaderTarget:gi,headerContextMenu:wi,currentHeader:ki,typeMenu:Ii,onHeaderContextMenu:xi,showTypeOverlay:Ci,emitHeaderAction:Si,saveHeaderRename:Di,cancelHeaderRename:Mi,changeColumnType:Ti,toggleHeaderMenu:Vi,deleteColumn:$i,cleanup:Oi}=function(e,t,n){const a=ye(null),l=ye(""),i=ye(null),o=ye(null),r=ye(null),s=ye(),d=ye(!1);return{editingHeaderId:a,editingHeaderName:l,currentHeaderTarget:i,headerContextMenu:o,currentHeader:r,typeMenu:s,showTypeSubmenu:d,onHeaderContextMenu:(e,t)=>{r.value=t,i.value=e.currentTarget,o.value.show(e)},showTypeOverlay:e=>{e?s.value.show(e,i.value):s.value.toggle(e,i.value),o.value.hide()},emitHeaderAction:async t=>{var i,o,s,d;if("rename"===t){if(a.value=r.value.id,l.value=r.value.value,await xe(),n.value){const e=n.value.$el||n.value;e&&e.focus&&e.focus()}}else e("header-action",{action:t,headerId:null==(i=r.value)?void 0:i.id,termId:null==(o=r.value)?void 0:o.termId,value:null==(s=r.value)?void 0:s.value,type:null==(d=r.value)?void 0:d.type})},saveHeaderRename:()=>{var t;l.value.trim()&&(e("header-action",{action:"rename",headerId:r.value.id,termId:r.value.termId,value:l.value.trim(),type:null==(t=r.value)?void 0:t.type}),a.value=null,l.value="")},cancelHeaderRename:()=>{a.value=null,l.value=""},changeColumnType:n=>{t("Вы уверены, что хотите изменить тип колонки? Это может привести к потере данных.",()=>{var t,a,l;e("header-action",{action:"change-type",headerId:null==(t=r.value)?void 0:t.id,termId:null==(a=r.value)?void 0:a.termId,value:null==(l=r.value)?void 0:l.value,type:n}),s.value.hide()})},toggleHeaderMenu:(e,t)=>{r.value=t,s.value.toggle(e),d.value=!1},deleteColumn:()=>{t("Вы уверены, что хотите удалить эту колонку? Все данные в ней будут потеряны.",()=>{e("header-action",{action:"delete",headerId:r.value.id,termId:r.value.termId}),s.value.hide()})},cleanup:()=>{o.value&&o.value.hide(),s.value&&s.value.hide(),a.value=null,l.value="",r.value=null,i.value=null,d.value=!1}}}(c,oi,lt),Ei=Ce(()=>{var e,t,n,a,l;return[{label:"Фильтровать",icon:"pi pi-filter",command:()=>{var e;return c("open-filter",null==(e=ki.value)?void 0:e.id)},disabled:null==u?void 0:u.disableEditing},{label:"Переименовать",icon:"pi pi-pencil",command:()=>Si("rename"),disabled:null==u?void 0:u.disableEditing},...(null==u?void 0:u.disableTypeEditing)?[]:[{label:"Изменить тип",icon:"pi pi-sync",command:e=>Ci(e.originalEvent),disabled:null==u?void 0:u.disableEditing}],{label:"Удалить",icon:"pi pi-trash",command:()=>$i(),class:"text-red-500",disabled:null==u?void 0:u.disableEditing},{label:Dt.value.includes(null==(e=ki.value)?void 0:e.id)?"Убрать из группировки":"Сгруппировать",icon:"pi pi-objects-column",command:()=>{const e=ki.value.id;if(Dt.value.includes(e)){const t=Dt.value.filter(t=>t!==e);$t(t)}else $t([e])}},{label:"Добавить к группировке",icon:"pi pi-plus",visible:Dt.value.length>0&&!Dt.value.includes(null==(t=ki.value)?void 0:t.id),command:()=>{const e=[...Dt.value,ki.value.id];$t(e)}},{label:"Очистить группировку",icon:"pi pi-times",visible:Dt.value.length>0,command:()=>{$t([])}},{separator:!0},{label:"🎨 Условное форматирование",icon:"pi pi-palette",command:()=>{var e,t;(t=null==(e=ki.value)?void 0:e.id)&&(ue.value={id:Date.now().toString(),headerId:t,condition:"greater",value:"",backgroundColor:"#dcfce7",textColor:"#166534"},de.value=!0)}},{label:"⚡ Настроить действие кнопки",icon:"pi pi-bolt",visible:7===(null==(n=ki.value)?void 0:n.type),command:()=>function(e){b.value=e;const t=((null==e?void 0:e.attrs)||"").split(":").filter(e=>e.trim());let n="",a="";const l={};for(const i of t)if(i.includes("=")){const[e,t]=i.split("=");"ALIAS"===e&&t?a=t:e&&t&&(l[e]=t)}else i.trim()&&(n||(n=i.trim()));g.value=a||(null==e?void 0:e.value)||"Кнопка",y.value=d.find(e=>e.endpoint===n||e.id===n)||null,w.value={targetId:l.targetId||"[ID]",headerId:l.headerId||"",value:l.value||"",parentId:l.parentId||"",customUrl:l.customUrl||"",...l},m.value=!0}(ki.value),disabled:null==u?void 0:u.disableEditing},{separator:!0},{label:_e.value.has(null==(a=ki.value)?void 0:a.id)?"Открепить колонку":"📌 Закрепить колонку",icon:_e.value.has(null==(l=ki.value)?void 0:l.id)?"pi pi-times":"pi pi-lock",command:()=>{var e,t;(t=null==(e=ki.value)?void 0:e.id)&&(_e.value.has(t)?_e.value.delete(t):_e.value.add(t))}},{separator:!0},{label:"Сортировать A→Z",icon:"pi pi-arrow-up",command:()=>{var e;Be.value=[{headerId:null==(e=ki.value)?void 0:e.id,direction:"asc"}]}},{label:"Сортировать Z→A",icon:"pi pi-arrow-down",command:()=>{var e;Be.value=[{headerId:null==(e=ki.value)?void 0:e.id,direction:"desc"}]}},{label:"Очистить сортировку",icon:"pi pi-times",command:()=>{Be.value=[]},disabled:0===Be.value.length}]}),Li=Ce(()=>[{label:"Копировать",icon:"pi pi-copy",command:()=>di()},{label:"Вставить",icon:"pi pi-paste",command:()=>ui(),disabled:!ii.value||(null==u?void 0:u.disableEditing)},{label:"Изменить строку",icon:"pi pi-pencil",command:()=>ci(),disabled:null==u?void 0:u.disableEditing},{label:"Переместить вверх",icon:"pi pi-arrow-up",command:()=>{ai.value&&c("row-move-up",ai.value.id)},disabled:null==u?void 0:u.disableEditing},{separator:!0},{label:"Изменить подчинённость...",icon:"pi pi-sitemap",command:()=>function(){if(ai.value){li.value=ai.value,v.value=null;const e=ai.value.id;f.value=u.rows.filter(t=>t.id!==e).map(e=>{var t,n,a,l;const i=k.value[0],o=(null==(n=null==(t=e.cells)?void 0:t[null==i?void 0:i.id])?void 0:n.value)||(null==(l=null==(a=e.values)?void 0:a[0])?void 0:l.value)||`ID: ${e.id}`;return{id:e.id,name:`${o} (ID: ${e.id})`}}),p.value=!0}}(),disabled:null==u?void 0:u.disableEditing},{separator:!0},{label:"Удалить строку",icon:"pi pi-trash",command:()=>pi(),class:"text-red-500",disabled:null==u?void 0:u.disableEditing}]);function Fi(){p.value=!1,li.value=null,v.value=null,f.value=[]}function Pi(){li.value&&(c("row-change-parent",{rowId:li.value.id,newParentId:v.value||1}),Fi())}function Ai(){li.value&&(c("row-change-parent",{rowId:li.value.id,newParentId:1}),Fi())}function _i(){m.value=!1,b.value=null,y.value=null,g.value="",w.value={}}function Ri(e){if(b.value&&e.action){const t=g.value.trim()||"Кнопка",n=e.action,a=e.params||{};let l=`:ALIAS=${t}`;n.endpoint?l+=`:${n.endpoint}`:n.id&&(l+=`:${n.id}`);for(const[e,o]of Object.entries(a))o&&""!==o&&(l+=`:${e}=${o}`);l+=":",c("button-action-change",{headerId:b.value.id,termId:b.value.termId,action:n,label:t,params:a});const i=k.value.findIndex(e=>e.id===b.value.id);-1!==i&&(k.value[i].attrs=l),_i()}}function Bi(e){const t=e.target.closest(".data-table-action-button");if(t){const n=t.dataset.rowId,a=t.dataset.headerId;n&&a&&async function(e,t,n){var a,l,i,o;e.stopPropagation(),e.preventDefault();const r=k.value.find(e=>e.id===n);if(!r)return;const s=(r.attrs||"").split(":").filter(e=>e.trim());let p="";const v={};for(const d of s)if(d.includes("=")){const[e,t]=d.split("=");"ALIAS"!==e&&e&&t&&(v[e]=t)}else d.trim()&&(p||(p=d.trim()));if("none"===p||!p)return;const h=u.rows.find(e=>e.id===t),f=k.value[0],m=(null==(l=null==(a=null==h?void 0:h.cells)?void 0:a[null==f?void 0:f.id])?void 0:l.value)||(null==(o=null==(i=null==h?void 0:h.values)?void 0:i[0])?void 0:o.value)||"",b={};for(const[d,u]of Object.entries(v))b[d]=String(u).replace(/\[ID\]/g,String(t||"")).replace(/\[VAL\]/g,String(m||""));let y=p.replace(/\[ID\]/g,String(t||"")).replace(/\[VAL\]/g,String(m||""));const g=d.find(e=>e.endpoint===p||e.id===p);try{c("button-click",{rowId:t,headerId:n,endpoint:y,params:b,actionType:(null==g?void 0:g.actionType)||"api-macro",refreshAction:null==g?void 0:g.refreshAction})}catch(w){}}(e,n,a)}}const Ui=(e,t,n,a,l=0,i=new Set)=>{if(l>20)return"#ERROR!";if(!e.startsWith("="))return e;if(0===l){const t=`${n}-${a}-${e}`;if(rt.value.has(t))return rt.value.get(t)}let o,r=e.slice(1).trim().replace(/([A-Z]+)\(([^)]*)\)/g,(e,o,r)=>{if(!s[o])return e;const d=[];let u="",c=0;for(const t of r)","!==t||0!==c?("("===t&&c++,")"===t&&c--,u+=t):(d.push(u.trim()),u="");d.push(u.trim());const p=d.map(e=>e.includes("(")?Ui(`=${e}`,t,n,a,l+1,i):e.includes(":")?Hi(...e.split(":").map(e=>e.trim()),t,n,a,l,i):Ki(e,t,n,a,l,i)).flat();try{return s[o](p)}catch(v){return"#ERROR!"}});r=r.replace(/(\[[^\]]+\]:\[[^\]]+\])/g,e=>{const[o,r]=e.split(":");return Hi(o,r,t,n,a,l,i)}),r=r.replace(/\[(\d+|\*)\](?:\[([-+]?\d+|\*)\])?/g);try{const e=r.replace(/÷/g,"/").replace(/×/g,"*");o=function(e){if(!e||"string"!=typeof e)throw new Error("Invalid expression");let t=e.trim();t=t.replace(/÷/g,"/"),t=t.replace(/×/g,"*");const n=function(e){const t=[];let n="";for(let a=0;a<e.length;a++){const l=e[a];if(" "!==l)if("+-*/()".includes(l))n&&(t.push(parseFloat(n)),n=""),t.push(l);else{if(!(l>="0"&&l<="9"||"."===l))throw new Error(`Invalid character in expression: ${l}`);n+=l}}return n&&t.push(parseFloat(n)),t}(t),a=[],l=[],i={"+":1,"-":1,"*":2,"/":2};for(const r of n)if("number"==typeof r)a.push(r);else if("("===r)l.push(r);else if(")"===r){for(;l.length>0&&"("!==l[l.length-1];)a.push(l.pop());if(0===l.length)throw new Error("Mismatched parentheses");l.pop()}else if("+-*/".includes(r)){for(;l.length>0&&"("!==l[l.length-1]&&i[l[l.length-1]]>=i[r];)a.push(l.pop());l.push(r)}for(;l.length>0;){const e=l.pop();if("("===e||")"===e)throw new Error("Mismatched parentheses");a.push(e)}const o=[];for(const r of a)if("number"==typeof r)o.push(r);else{if(o.length<2)throw new Error("Invalid expression");const e=o.pop(),t=o.pop();switch(r){case"+":o.push(t+e);break;case"-":o.push(t-e);break;case"*":o.push(t*e);break;case"/":if(0===e)throw new Error("Division by zero");o.push(t/e);break;default:throw new Error(`Unknown operator: ${r}`)}}if(1!==o.length)throw new Error("Invalid expression");return o[0]}(e),o="number"==typeof o?o:e}catch(d){o=r}if(0===l){const t=`${n}-${a}-${e}`;rt.value.set(t,o)}return o},Ki=(e,t,n,a,l,i)=>{const o=e.match(/\[(\d+|\*)\](?:\[([-+]?\d+|\*)\])?/);if(!o)return e;const[,r,s]=o;if("*"===s)return Ni(r,t,"*",a,l,i);const d="*"===r?a:parseInt(r);let u;if(s)if(s.startsWith("+")||s.startsWith("-")){const e=parseInt(s),a=t.findIndex(e=>e.id===n);if(-1===a)return"#REF!";const l=a+e;if(l<0||l>=t.length)return"#REF!";u=t[l].id}else{if("*"===s)return zi(d,t,n,a,l,i);u=parseInt(s)}else u=n;const c=t.find(e=>e.id===u);if(!c)return"#REF!";const p=c.values.find(e=>e.headerId===d);return p?qi(p,t,u,d,l,i):"#REF!"},Hi=(e,t,n,a,l,i,o)=>{const r=`${a}-${l}-${e}:${t}`;if(st.value.has(r))return st.value.get(r);const s=Ki(e,n,a,l,i,o),d=Ki(t,n,a,l,i,o);if("number"==typeof s&&"number"==typeof d){const e=[s,d];return st.value.set(r,e),e}const u=e.match(/\[(\d+)\](?:\[([-+]?\d+)\])?/),c=t.match(/\[(\d+)\](?:\[([-+]?\d+)\])?/);if(!u||!c)return[s,d];const[,p,v]=u,[,h,f]=c;let m;return m=v===f&&"*"!==v?Ni(`${p}:${h}`,n,parseInt(v),l,i,o):p===h?zi(parseInt(p),n,a,l,i,o,parseInt(v),parseInt(f)):ji(parseInt(p),parseInt(v),parseInt(h),parseInt(f),n,l,i,o),st.value.set(r,m),m},Ni=(e,t,n,a,l,i)=>{let o,r;if(e.includes(":")?[o,r]=e.split(":").map(Number):o=r=parseInt(e),"*"===n){const e=[];for(const n of t)for(const a of n.values)a.headerId>=o&&a.headerId<=r&&e.push(qi(a,t,n.id,a.headerId,l,i));return e}const s=t.find(e=>e.id===n);return s?s.values.filter(e=>e.headerId>=o&&e.headerId<=r).map(e=>qi(e,t,n,e.headerId,l,i)):[]},zi=(e,t,n,a,l,i,o,r)=>{const s=o?t.findIndex(e=>e.id===o):t.findIndex(e=>e.id===n),d=r?t.findIndex(e=>e.id===r):s;return-1===s||-1===d?[]:t.slice(Math.min(s,d),Math.max(s,d)+1).map(n=>{const a=n.values.find(t=>t.headerId===e);return a?qi(a,t,n.id,e,l,i):0})},ji=(e,t,n,a,l,i,o,r)=>{const s=[];for(let d=t;d<=a;d++){const t=l.find(e=>e.id===d);if(!t)continue;const a=[];for(let i=e;i<=n;i++){const e=t.values.find(e=>e.headerId===i);a.push(e?qi(e,l,d,i,o,r):0)}s.push(a)}return s},qi=(e,t,n,a,l,i)=>{const o=`${n}-${a}`;if(i.has(o))return"#CYCLE!";const r=new Set(i);r.add(o);let s=e.value;return"string"==typeof s&&s.startsWith("=")&&(s=Ui(s,t,n,a,l+1,r)),4===e.type||9===e.type?"string"==typeof s?Yi(s):s:isNaN(parseFloat(s))?s:parseFloat(s)},Yi=e=>{const t=[/(\d{2})\.(\d{2})\.(\d{4}) (\d{2}):(\d{2}):(\d{2})/,/(\d{2})\.(\d{2})\.(\d{4}) (\d{2}):(\d{2})/,/(\d{2})\.(\d{2})\.(\d{4})/];for(const n of t){const t=e.match(n);if(t){const[e,n,a,l,i,o,r]=t,s=new Date(parseInt(l),parseInt(a)-1,parseInt(n),i?parseInt(i):0,o?parseInt(o):0,r?parseInt(r):0);return Math.floor(s.getTime()/1e3)}}return 0},Wi=()=>{const e=new Map,t=new Map;u.rows.forEach(n=>{n.values.forEach(a=>{if("string"==typeof a.value&&a.value.startsWith("=")){const l=`${n.id}-${a.headerId}`,i=((e,t,n)=>{if(!e||!e.startsWith("="))return[];const a=[],l=e.slice(1),i=/\[(\d+|\*)\](?:\[([-+]?\d+|\*)\])?/g;let o;for(;null!==(o=i.exec(l));){const[,e,l]=o;if("*"===e||"*"===l){if("*"===l&&"*"!==e){const t=parseInt(e);n.forEach(e=>{a.push(`${e.id}-${t}`)})}else if("*"===e&&l){const e=l.startsWith("+")||l.startsWith("-")?t+parseInt(l):parseInt(l),i=n.find(t=>t.id===e);i&&i.values.forEach(t=>{a.push(`${e}-${t.headerId}`)})}continue}const i="*"===e?null:parseInt(e);let r;r=l?l.startsWith("+")||l.startsWith("-")?t+parseInt(l):parseInt(l):t,null!==i&&null!==r&&a.push(`${r}-${i}`)}const r=/\[(\d+)\](?:\[(\d+)\])?\s*:\s*\[(\d+)\](?:\[(\d+)\])?/g;for(;null!==(o=r.exec(l));){const[,e,n,l,i]=o,r=parseInt(e),s=parseInt(l),d=n?parseInt(n):t,u=i?parseInt(i):t;for(let t=Math.min(d,u);t<=Math.max(d,u);t++)for(let e=Math.min(r,s);e<=Math.max(r,s);e++)a.push(`${t}-${e}`)}return[...new Set(a)]})(a.value,n.id,u.rows);e.set(l,i),i.forEach(e=>{t.has(e)||t.set(e,[]),t.get(e).push(l)})}})}),dt.value=e,ut.value=t},Gi=(e,t,n,a)=>{var l;let i=e;if(null!==n&&"string"==typeof e&&e.startsWith("=")&&(i=Ui(e,u.rows,n,a,0,new Set)),null==i||""===i)return"";const o=e=>{let t=e;return t=t.replace(/(\+\d{1,3}[-.\s]?\(?\d{1,4}\)?(?:[-.\s]?\d{1,4}){2,4})/g,e=>`<a href="tel:${e.replace(/[-.\s()]/g,"")}" class="cell-chip cell-phone" title="Позвонить: ${e}" onclick="event.stopPropagation()"><i class="pi pi-phone"></i><span>${e}</span></a>`),t=t.replace(/([\w.-]+@[\w.-]+\.\w{2,})/gi,e=>`<a href="mailto:${e}" class="cell-chip cell-email" title="Написать: ${e}" onclick="event.stopPropagation()"><i class="pi pi-envelope"></i><span>${e}</span></a>`),t};switch(t){case 2:{const e=String(i);return/<[^>]+>/.test(e)?`<span class="cell-html" title="HTML контент">${e}</span>`:o(e)}case 3:case 8:return o(String(i));case 5:{const e=parseInt(i,10);return 0===e?'<span class="cell-chip cell-grant cell-grant-editor" title="Редактор типов"><i class="pi pi-cog"></i><span>Type editor</span></span>':1===e?'<span class="cell-chip cell-grant cell-grant-all" title="Все объекты"><i class="pi pi-database"></i><span>All objects</span></span>':10===e?'<span class="cell-chip cell-grant cell-grant-files" title="Файлы"><i class="pi pi-folder"></i><span>Files</span></span>':`<span class="cell-chip cell-grant" title="Права доступа: ${e}"><i class="pi pi-shield"></i><span>Grant #${e}</span></span>`}case 6:return i&&""!==i?'<span class="cell-chip cell-password" title="Пароль скрыт"><i class="pi pi-lock"></i><span>******</span></span>':"";case 7:{const e=k.value.find(e=>e.id===a),t=((null==e?void 0:e.attrs)||"").split(":").filter(e=>e.trim());let l=i||"Действие",o="",r="api-macro";for(const n of t)if(n.includes("=")){const[e,t]=n.split("=");"ALIAS"===e&&t&&(l=t)}else n.trim()&&(o||(o=n.trim()));if("none"===o||!o)return`<button class="cell-button cell-button-disabled" onclick="event.stopPropagation()" disabled title="Кнопка без действия"><i class="pi pi-ban"></i><span>${l}</span></button>`;if(o.startsWith("http")||o.startsWith("/"))r="custom-url";else{const e=d.find(e=>e.endpoint===o||e.id===o);e&&(r=e.actionType)}const s=`data-row-id="${n}" data-header-id="${a}" data-action-type="${r}"`,u=o.includes("_m_del")||o.includes("delete");return`<button class="${u?"cell-button cell-button-danger":"cell-button cell-button-action"} data-table-action-button" ${s} title="${l}" onclick="event.stopPropagation()"><i class="pi ${u?"pi-trash":"custom-url"===r?"pi-external-link":"pi-bolt"}"></i><span>${l}</span></button>`}case 10:{const e=String(i);if(!e)return"";let t="",n=e;const a=e.match(/<a[^>]*href="([^"]*)"[^>]*>([^<]*)<\/a>/i);if(a)t=a[1],n=a[2];else if(e.includes(":")){const a=e.indexOf(":");e.substring(0,a),n=e.substring(a+1),t=e}else e.startsWith("/")?(t=e,n=e.split("/").pop()||e):n=e;const o=(null==(l=n.split(".").pop())?void 0:l.toLowerCase())||"",r=["jpg","jpeg","png","gif","webp","svg","bmp","ico"].includes(o),s=["mp4","avi","mov","mkv","webm","ogv"].includes(o),d=["mp3","wav","ogg","flac","aac","m4a"].includes(o);let c="pi-file";r?c="pi-image":["pdf"].includes(o)?c="pi-file-pdf":["doc","docx","odt","rtf"].includes(o)?c="pi-file-word":["xls","xlsx","ods","csv"].includes(o)?c="pi-file-excel":["zip","rar","7z","tar","gz"].includes(o)?c="pi-box":d?c="pi-volume-up":s&&(c="pi-video");const p=t&&t.startsWith("/")&&u.serverUrl?`${u.serverUrl}${t}`:t;if(r&&p&&(p.startsWith("/")||p.startsWith("http"))){const e=p.replace(/'/g,"\\'"),t=n.replace(/'/g,"\\'");return`<a href="javascript:void(0)" class="cell-file cell-file-preview" title="Открыть: ${n}" onclick="event.stopPropagation(); window.__dataTableOpenImagePreview && window.__dataTableOpenImagePreview('${e}', '${t}')"><img src="${p}" alt="${n}" class="cell-file-thumbnail" loading="lazy" onerror="this.style.display='none';this.nextElementSibling.style.display='inline-flex'"><span class="cell-file-fallback" style="display:none"><i class="pi ${c}"></i><span>${n}</span></span></a>`}return p&&(p.startsWith("/")||p.startsWith("http"))?`<a href="${p}" class="cell-chip cell-file" target="_blank" rel="noopener" title="Скачать: ${n}" onclick="event.stopPropagation()"><i class="pi ${c}"></i><span>${n}</span></a>`:`<span class="cell-chip cell-file" title="Файл: ${n}"><i class="pi ${c}"></i><span>${n}</span></span>`}case 11:return i&&""!==i&&"0"!==i&&"false"!==i?'<span class="cell-boolean cell-boolean-true" title="Да"><i class="pi pi-check-circle"></i></span>':'<span class="cell-boolean cell-boolean-false" title="Нет"><i class="pi pi-times-circle"></i></span>';case 12:{const e=String(i),t=e.includes("\n"),n=o((e.length>100?e.substring(0,100)+"...":e).replace(/\n/g," "));return t||e.length>100?`<span class="cell-memo" title="${e.replace(/"/g,"&quot;").substring(0,500)}"><i class="pi pi-align-left"></i>${n}</span>`:n}case 15:return`<span class="cell-chip cell-calculated" title="Вычисляемое поле"><i class="pi pi-calculator"></i><span>${String(i)}</span></span>`;case 16:{const e=String(i);return"0"===e?'<span class="cell-chip cell-report-col" title="Вычисляемая колонка отчёта"><i class="pi pi-table"></i><span>Вычисляемое</span></span>':`<span class="cell-chip cell-report-col" title="Колонка отчёта: ${e}"><i class="pi pi-table"></i><span>${e}</span></span>`}case 17:{const e=String(i);if(!e)return"";let t=e,n=t;if(e.includes(":")&&!e.startsWith("/")){const t=e.indexOf(":");n=e.substring(t+1)}else n=t.split("/").pop()||t;const a=t.startsWith("/")&&u.serverUrl?`${u.serverUrl}${t}`:t;return t.startsWith("/")||a.startsWith("http")?`<a href="${a}" class="cell-path-link" target="_blank" rel="noopener" title="Открыть: ${t}" onclick="event.stopPropagation()"><i class="pi pi-external-link"></i><span>${n}</span></a>`:`<span class="cell-path" title="Путь: ${e}"><i class="pi pi-folder-open"></i><span>${n}</span></span>`}case 9:{let e=null;if("number"==typeof i)e=i;else if("string"==typeof i)if(/^\d+$/.test(i))e=parseInt(i,10);else{if(!/^\d{2}\.\d{2}\.\d{4}$/.test(i))return i;{const t=i.split("."),n=parseInt(t[0],10),a=parseInt(t[1],10)-1,l=parseInt(t[2],10),o=new Date(l,a,n);e=Math.floor(o.getTime()/1e3)}}return e?to(e,u.dateStyle):i}case 4:{let e=null;if("number"==typeof i)e=i;else if("string"==typeof i)if(/^\d+$/.test(i))e=parseInt(i,10);else{if(!/^\d{2}\.\d{2}\.\d{4}\s+\d{2}:\d{2}:\d{2}$/.test(i))return i;{const[t,n]=i.split(/\s+/),[a,l,o]=t.split(".").map(e=>parseInt(e,10)),[r,s,d]=n.split(":").map(e=>parseInt(e,10)),u=new Date(o,l-1,a,r,s,d);e=Math.floor(u.getTime()/1e3)}}return e?no(e,u.dateStyle):i}case 13:{const e="number"==typeof i?i:parseInt(i,10);if(isNaN(e))return i;const t=e.toLocaleString("ru-RU");return`<span class="cell-number cell-number-integer${e<0?" cell-number-negative":""}">${t}</span>`}case 14:{const e="number"==typeof i?i:parseFloat(i);if(isNaN(e))return i;const t=e.toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2});return`<span class="cell-number cell-number-decimal${e<0?" cell-number-negative":""}">${t}</span>`}default:return i}},Zi=["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"],Xi=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],Ji=["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],Qi=e=>{const t=new Date(1e3*e),n=new Date;n.setHours(0,0,0,0),t.setHours(0,0,0,0);const a=t.getTime()-n.getTime(),l=Math.round(a/864e5);let i,o;return 0===l?(i="Сегодня",o="date-today"):-1===l?(i="Вчера",o="date-past"):1===l?(i="Завтра",o="date-future"):l>1&&l<=7?(i=`Через ${l} ${eo(l)}`,o="date-future"):l<-1&&l>=-7?(i=`${Math.abs(l)} ${eo(Math.abs(l))} назад`,o="date-past"):l>7?(i=`Через ${l} ${eo(l)}`,o="date-far-future"):(i=`${Math.abs(l)} ${eo(Math.abs(l))} назад`,o="date-far-past"),{label:i,cssClass:o,diffDays:l}},eo=e=>{const t=e%100,n=e%10;return t>=11&&t<=19?"дней":1===n?"день":n>=2&&n<=4?"дня":"дней"},to=(e,t)=>{if(!e)return"";const n=new Date(1e3*e),a=String(n.getDate()).padStart(2,"0"),l=String(n.getMonth()+1).padStart(2,"0"),i=n.getFullYear(),o=Zi[n.getMonth()],r=Qi(e),s=(e=>{const t=new Date(1e3*e);return`${Ji[t.getDay()]}, ${t.getDate()} ${Xi[t.getMonth()]} ${t.getFullYear()}`})(e);let d;switch(t){case"classic":d=`${a}.${l}.${i}`;break;case"relative":d=r.label;break;default:d=Math.abs(r.diffDays)<=7?r.label:`${n.getDate()} ${o}`}return`<span class="cell-chip cell-date ${r.cssClass}" data-tooltip="${s}"><i class="pi pi-calendar"></i><span>${d}</span></span>`},no=(e,t)=>{if(!e)return"";const n=new Date(1e3*e),a=String(n.getDate()).padStart(2,"0"),l=String(n.getMonth()+1).padStart(2,"0"),i=n.getFullYear(),o=String(n.getHours()).padStart(2,"0"),r=String(n.getMinutes()).padStart(2,"0"),s=Zi[n.getMonth()],d=Qi(e),u=`${o}:${r}`,c=(e=>{const t=new Date(1e3*e);return`${Ji[t.getDay()]}, ${t.getDate()} ${Xi[t.getMonth()]} ${t.getFullYear()}, ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`})(e);let p;switch(t){case"classic":p=`${a}.${l}.${i} ${u}`;break;case"relative":p=`${d.label}, ${u}`;break;default:p=Math.abs(d.diffDays)<=7?`${d.label}, ${u}`:`${n.getDate()} ${s}, ${u}`}return`<span class="cell-chip cell-datetime ${d.cssClass}" data-tooltip="${c}"><i class="pi pi-clock"></i><span>${p}</span></span>`},ao=Ce(()=>{const e=new Map;let t=0;return Vt.value.forEach(n=>{"row"===n.type&&(e.set(n.data.id,t),t++)}),e}),lo=e=>{const t=ao.value.get(e);return void 0!==t?t:-1},io=(e,t)=>{var n,a;return(null==(n=ft.value.start)?void 0:n.headerId)===e&&(null==(a=ft.value.start)?void 0:a.rowId)===t};function oo(e){var t;const n=function(e){const t=new Set;return kt.value.forEach(n=>{var a;const l=null==(a=n.cells[e])?void 0:a.value;t.add(String(l??""))}),Array.from(t).sort((e,t)=>""===e?1:""===t?-1:e.localeCompare(t,"ru"))}(e),a=(null==(t=ce.value[e])?void 0:t.toLowerCase())||"";return a?n.filter(e=>e.toLowerCase().includes(a)):n}function ro(e,t){const n=ie.value[e];n.has(t)?n.delete(t):n.add(t),Dt.value.length>0?Ot(Dt.value):Tt.value&&Lt(Tt.value)}function so(e){const t=ie.value[e];return t&&t.size>0}const uo=Ce(()=>0!==It.value.length&&It.value.every(e=>Fe.value.has(e.id)));function co(){uo.value?Fe.value.clear():It.value.forEach(e=>{Fe.value.add(e.id)}),Ae.value=Fe.value.size>0}function po(){Fe.value.clear(),Pe.value=null,Ae.value=!1,Le.value=!1}function vo(){if(0===Fe.value.size)return;const e=Fe.value.size;Ql.value=`Удалить ${e} выбранных записей?`,ei.value=()=>{c("bulk-delete",Array.from(Fe.value)),po()},Jl.value=!0}function ho(){0!==Fe.value.size&&u.rows.filter(e=>Fe.value.has(e.id))}function fo(){if(!ue.value)return;const e=se.value.findIndex(e=>e.headerId===ue.value.headerId&&e.id===ue.value.id);e>=0?se.value[e]={...ue.value}:se.value.push({...ue.value}),de.value=!1,ue.value=null}function mo(e){se.value=se.value.filter(t=>t.id!==e)}function bo(){}function yo(){if(!ve.value)return;const e=document.createElement("a");e.href=ve.value,e.download=he.value||"image",e.target="_blank",document.body.appendChild(e),e.click(),document.body.removeChild(e)}function go(e,t){const n=se.value.filter(t=>t.headerId===e);for(const a of n){let e=!1;switch(a.condition){case"greater":e=parseFloat(t)>parseFloat(a.value);break;case"less":e=parseFloat(t)<parseFloat(a.value);break;case"equal":e=String(t).toLowerCase()===String(a.value).toLowerCase();break;case"contains":e=String(t).toLowerCase().includes(String(a.value).toLowerCase());break;case"empty":e=!t||""===String(t).trim();break;case"notEmpty":e=t&&""!==String(t).trim()}if(e)return{backgroundColor:a.backgroundColor,color:a.textColor}}return{}}"undefined"!=typeof window&&(window.__dataTableOpenImagePreview=function(e,t){ve.value=e,he.value=t||"Изображение",pe.value=!0});const wo=Ce(()=>{const e={};let t=0;return k.value.forEach((n,a)=>{if(_e.value.has(n.id)){e[n.id]=t+80;const a=n.width||150;t+=a}}),e}),ko=e=>_e.value.has(e);function Io(e){const t=Be.value.findIndex(t=>t.headerId===e);return t<0?null:{order:t+1,direction:Be.value[t].direction}}function xo(e,t){e&&(qe.value[e]=t)}function Co(){ze.value=!ze.value}function So(e){const t=Ct.value[e];if(!t)return"";const n=qe.value[e]||"sum",a=t[n];return null==a||0===a?"":"count"===n?`n=${a}`:"sum"===n?`Σ=${a}`:"avg"===n?`x̄=${a}`:a}const Do=ye(null),Mo=ye(null),To=Ce(()=>[{label:"Сумма (SUM)",icon:"pi pi-plus",command:()=>{var e;return xo(null==(e=Do.value)?void 0:e.id,"sum")}},{label:"Среднее (AVG)",icon:"pi pi-chart-line",command:()=>{var e;return xo(null==(e=Do.value)?void 0:e.id,"avg")}},{label:"Количество (COUNT)",icon:"pi pi-hashtag",command:()=>{var e;return xo(null==(e=Do.value)?void 0:e.id,"count")}},{separator:!0},{label:ze.value?"Скрыть футер":"Показать футер",icon:ze.value?"pi pi-eye-slash":"pi pi-eye",command:()=>Co()}]),Vo=(e,t)=>{if(!mt.value)return!1;const n=kt.value.findIndex(e=>e.id===t),a="row-counter"===e?-1:k.value.findIndex(t=>t.id===e);return n>=mt.value.minRow&&n<=mt.value.maxRow&&a>=mt.value.minCol&&a<=mt.value.maxCol},$o=e=>{const t=Lo(e);t&&(ft.value={start:{headerId:t.headerId,rowId:t.rowId},end:null,isSelecting:!0})},Oo=e=>{if(!ft.value.isSelecting)return;const t=Lo(e);t&&(ft.value.end={headerId:t.headerId,rowId:t.rowId})},Eo=()=>ft.value.isSelecting=!1,Lo=e=>{const t=e.target.closest("td");return t?{headerId:t.dataset.headerId||"row-counter",rowId:t.closest("tr").dataset.rowId}:null},Fo=(e,t)=>{const n=document.getElementById(`table-container-${u["data-tab-id"]}`);if(!n)return;const a=n.querySelector(`tr[data-row-id="${t}"] td[data-header-id="${e}"]`);if(a){const e=n.getBoundingClientRect(),t=a.getBoundingClientRect();(t.top<e.top||t.bottom>e.bottom)&&a.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})}},Po=e=>{if(!ft.value.start)return;const t=kt.value.findIndex(e=>e.id===ft.value.start.rowId),n=k.value.findIndex(e=>e.id===ft.value.start.headerId);let a=t,l=n;switch(e){case"up":a=Math.max(0,t-1);break;case"down":a=Math.min(kt.value.length-1,t+1);break;case"left":l=Math.max(0,n-1);break;case"right":l=Math.min(k.value.length-1,n+1)}if(a!==t||l!==n){const e=kt.value[a],t=k.value[l];e&&t&&(ft.value={start:{headerId:t.id,rowId:e.id},end:null,isSelecting:!1},Fo(t.id,e.id))}},Ao=e=>{if(!x.value)return;const t=x.value.closest(".table-container");if(!t)return;const n=t.clientHeight,a=t.scrollTop,l=Math.floor(n/32),i=kt.value.findIndex(e=>e.id===ft.value.start.rowId);let o=i;"up"===e?(o=Math.max(0,i-l),t.scrollTop=Math.max(0,a-n)):"down"===e&&(o=Math.min(kt.value.length-1,i+l),t.scrollTop=a+n);const r=kt.value[o],s=k.value.find(e=>e.id===ft.value.start.headerId);r&&s&&(ft.value={start:{headerId:s.id,rowId:r.id},end:null,isSelecting:!1},Fo(s.id,r.id))},_o=e=>{if((e.ctrlKey||e.metaKey)&&"c"===e.key)return e.preventDefault(),void async function(){var e;if(!ft.value.start)return;const t=ft.value.start,n=ft.value.end||t,a=kt.value.findIndex(e=>e.id===t.rowId),l=kt.value.findIndex(e=>e.id===n.rowId),i=k.value.findIndex(e=>e.id===t.headerId),o=k.value.findIndex(e=>e.id===n.headerId),r=Math.min(a,l),s=Math.max(a,l),d=Math.min(i,o),u=Math.max(i,o),c=[];for(let h=r;h<=s;h++){const t=kt.value[h],n=[];for(let a=d;a<=u;a++){const l=k.value[a],i=(null==(e=t.cells[l.id])?void 0:e.value)??"";n.push(String(i))}c.push(n.join("\t"))}const p=c.join("\n");try{await navigator.clipboard.writeText(p),Ye.value={data:p,rows:s-r+1,cols:u-d+1}}catch(v){}}();if((e.ctrlKey||e.metaKey)&&"v"===e.key)return e.preventDefault(),void((null==u?void 0:u.disableEditing)||async function(){var e;if(ft.value.start)try{const t=await navigator.clipboard.readText();if(!t)return;const n=t.split("\n").map(e=>e.split("\t")),a=ft.value.start,l=kt.value.findIndex(e=>e.id===a.rowId),i=k.value.findIndex(e=>e.id===a.headerId);if(-1===l||-1===i)return;const o=[];for(let r=0;r<n.length;r++){const t=l+r;if(t>=kt.value.length)break;const a=kt.value[t],s=n[r];for(let n=0;n<s.length;n++){const t=i+n;if(t>=k.value.length)break;const l=k.value[t],r=s[n];o.push({rowId:a.id,headerId:l.id,cellId:null==(e=a.cells[l.id])?void 0:e.id,value:r})}}for(const e of o)c("cell-update",{cellId:e.cellId,headerId:e.headerId,value:e.value,rowId:e.rowId})}catch(t){}}());if(!Dn.value&&ft.value.start)switch(e.key){case"Enter":(null==u?void 0:u.disableEditing)||(e.preventDefault(),$l(ft.value.start.headerId,ft.value.start.rowId));break;case"ArrowUp":e.preventDefault(),Po("up");break;case"ArrowDown":e.preventDefault(),Po("down");break;case"ArrowLeft":e.preventDefault(),Po("left");break;case"ArrowRight":e.preventDefault(),Po("right");break;case"Tab":e.preventDefault(),Po(e.shiftKey?"left":"right");break;case"Home":(e.ctrlKey||e.metaKey)&&(e.preventDefault(),(()=>{if(0===kt.value.length||0===k.value.length)return;const e=kt.value[0],t=k.value[0];ft.value={start:{headerId:t.id,rowId:e.id},end:null,isSelecting:!1},Fo(t.id,e.id)})());break;case"End":(e.ctrlKey||e.metaKey)&&(e.preventDefault(),(()=>{if(0===kt.value.length||0===k.value.length)return;const e=kt.value[kt.value.length-1],t=k.value[k.value.length-1];ft.value={start:{headerId:t.id,rowId:e.id},end:null,isSelecting:!1},Fo(t.id,e.id)})());break;case"PageUp":e.preventDefault(),Ao("up");break;case"PageDown":e.preventDefault(),Ao("down")}},Ro=e=>{if(!C.value)return;e.preventDefault();const{headerId:t,startX:n,startWidth:a,tableStartWidth:l}=S.value,i=e.clientX-n;let o=a+i;o<50&&(o=50);const r=document.querySelector(`th[data-header-id="${t}"]`);r&&(r.style.width=`${o}px`,r.style.minWidth=`${o}px`,r.style.maxWidth=`${o}px`,document.querySelectorAll(`td[data-header-id="${t}"]`).forEach(e=>{e.style.width=`${o}px`,e.style.minWidth=`${o}px`,e.style.maxWidth=`${o}px`}),o>50&&(x.value.style.width=`${l+i}px`))},Bo=()=>{if(!C.value)return;const{headerId:e}=S.value,t=document.querySelector(`th[data-header-id="${e}"]`),n=(null==t?void 0:t.offsetWidth)||0,a=x.value.offsetWidth,l=k.value.map(t=>t.id===e?{...t,width:n}:t);k.value=l,c("update:table-config",{headers:l,tableWidth:a}),Uo()},Uo=()=>{document.removeEventListener("mousemove",Ro),document.removeEventListener("mouseup",Bo),document.body.style.cursor="",document.body.style.userSelect="",S.value.currentTh&&S.value.currentTh.classList.remove("resizing"),C.value=!1,S.value={headerId:null,startX:0,startWidth:0,currentTh:null,tableStartWidth:0}},Ko=e=>{if(!me.value)return;e.preventDefault();const{rowId:t,startY:n,startHeight:a}=be.value;let l=a+(e.clientY-n);l<28&&(l=28),fe.value[t]=l;const i=document.querySelector(`tr[data-row-id="${t}"]`);i&&(i.style.height=`${l}px`,i.querySelectorAll("td").forEach(e=>{e.style.height=`${l}px`}))},Ho=()=>{me.value&&(Oe(),No())},No=()=>{document.removeEventListener("mousemove",Ko),document.removeEventListener("mouseup",Ho),document.body.style.cursor="",document.body.style.userSelect="",be.value.currentTr&&be.value.currentTr.classList.remove("row-resizing"),me.value=!1,be.value={rowId:null,startY:0,startHeight:0,currentTr:null}},zo=(e,t=null)=>{if(t&&"dir"===t.columnType)return"fas fa-link me-2";if(t&&"multi"===t.columnType)return"fas fa-list me-2";const n=I.value.find(t=>t.value==e);return`fas ${n?n.icon:"fa-question-circle"} me-2`},jo=(e,t=null)=>{if(t&&"dir"===t.columnType)return"Справочник";if(t&&"multi"===t.columnType)return"Множественный выбор";const n=We.find(t=>t.value==e);return n?n.label:"Unknown type"},qo=()=>{(null==u?void 0:u.isAddingColumn)||c("add-column")},Yo=()=>{(null==u?void 0:u.isAddingRow)||c("add-row")},Wo=(e,t,n)=>({3:Ne,8:Ne,9:St,11:re,12:Ue,13:Ve,14:Ve,4:St}[e]||Ne),Go=(e,t,n=[],a=u.database)=>{if(t)return{options:n,optionLabel:"value",optionValue:"id",filter:!0,showClear:!0,placeholder:"Выберите значение",focusOnShow:!0,autoFocus:!0,onChange:e=>{Dn.value&&Ol(Dn.value.headerId,Dn.value.rowId)}};const l={};switch(e){case 3:case 8:l.database=a,l.placeholder="Введите текст (@ для упоминаний)";break;case 4:l.showTime=!0,l.showSeconds=!0,l.dateFormat="dd.mm.yy",l.timeFormat="HH:mm:ss";break;case 9:l.dateFormat="dd.mm.yy";break;case 11:l.binary=!0}return l},Zo=(e,t)=>{e.dirTableId&&c("open-directory",{typeId:e.dirTableId,typeName:e.value||e.alias||`Справочник ${e.dirTableId}`,dirRowId:t})},Xo=async(e,t,n)=>{if(!n)return;F&&(clearTimeout(F),F=null);const a=e.currentTarget||e.target,l=pn(t.dirTableId,n),i=dn.value.get(l);F=vn(i)&&i.data?setTimeout(()=>{var e;e=i.data,a&&document.body.contains(a)&&($.value=t.value,V.value=e,T.value&&T.value.show({currentTarget:a,target:a}))},100):setTimeout(()=>{if(!a||!document.body.contains(a))return;$.value=t.value;const e=dn.value.get(l);vn(e)?V.value=e.data:c("load-dir-row",{dirTableId:t.dirTableId,dirRowId:n,callback:e=>{dn.value.set(l,{data:e||null,timestamp:Date.now()}),V.value=e}}),T.value&&T.value.show({currentTarget:a,target:a})},300)},Jo=async(e,t,n,a)=>{const l=(null==n?void 0:n.nestedTableId)||(null==t?void 0:t.nestedTableId)||(null==t?void 0:t.nested);if(!l)return;L&&clearTimeout(L);const i=e.currentTarget;L=setTimeout(async()=>{i&&document.body.contains(i)&&(E.value=null,O.value&&O.value.show({currentTarget:i,target:i}),c("load-nested-preview",{nestedTableId:l,parentRowId:a,tableName:t.label||t.value||"Подчинённая таблица",callback:e=>{i&&document.body.contains(i)&&(E.value={tableName:t.label||t.value||"Подчинённая таблица",totalCount:(null==n?void 0:n.value)||(null==e?void 0:e.totalCount)||0,items:(null==e?void 0:e.items)||[]})}}))},300)},Qo=()=>{L&&(clearTimeout(L),L=null),O.value&&O.value.hide(),E.value=null},er=e=>[3,8,12].includes(e),tr=e=>{var t;const n=ti.value.headers.findIndex(t=>t.headerId===e.headerId);if(-1===n)return;const a=null==(t=Qe.value[n])?void 0:t.$el;a&&12===e.type&&(a.style.height="auto",a.style.height=`${a.scrollHeight}px`)};ge(ti,e=>{e&&xe(()=>{e.headers.forEach(e=>{er(e.type)&&tr(e)})})},{deep:!0}),ge(()=>u.headers,e=>{k.value=e.map(e=>({...e,width:e.width||150,columnType:e.columnType||"regular"}))},{immediate:!0,deep:!0}),ge(()=>u.tableWidth,e=>{x.value&&null!==e&&(x.value.style.width=`${e}px`)}),ge(()=>u.rows,(e,t)=>{if(Vl.value.clear(),!t||e.length!==t.length)return Wi(),rt.value.clear(),void st.value.clear();const n=[];e.forEach((e,a)=>{const l=t[a];if(!l||l.id!==e.id)return Wi(),rt.value.clear(),void st.value.clear();e.values.forEach((t,a)=>{const i=l.values[a];if(i&&i.headerId===t.headerId&&t.value!==i.value){const a=`${e.id}-${t.headerId}`;n.push(a),"string"==typeof t.value&&t.value.startsWith("=")&&Wi()}})}),n.length>0&&(e=>{Array.isArray(e)||(e=[e]);const t=new Set;e.forEach(e=>{(ut.value.get(e)||[]).forEach(e=>t.add(e))}),t.forEach(e=>{const[t,n]=e.split("-");for(const a of rt.value.keys())a.startsWith(`${t}-${n}-`)&&rt.value.delete(a);for(const a of st.value.keys())a.startsWith(`${t}-${n}-`)&&st.value.delete(a)}),t.size})(n)},{deep:!0}),ge(Dn,e=>{if(e&&e.headerId){const t=k.value.find(t=>t.id===e.headerId);(null==t?void 0:t.dirTableId)&&xe(()=>{const e=document.querySelector(".seamless-editor .p-dropdown, .seamless-editor .p-multiselect");if(e){const t=e.querySelector(".p-dropdown-trigger, .p-multiselect-trigger");t&&t.click()}})}});const nr=()=>{window.removeEventListener("resize",Ht),document.removeEventListener("keydown",_o),document.removeEventListener("mousemove",Ro),document.removeEventListener("mouseup",Bo),sn(),gn(),Zl(),mi(),At(),Oi(),D.value&&D.value.hide(),T.value&&T.value.hide(),ft.value={start:null,end:null,isSelecting:!1},C.value&&Uo()};return Se(()=>{x.value=document.querySelector(".coda-style-datatable table"),Ht(),window.addEventListener("resize",Ht),document.addEventListener("mousedown",Kl),document.addEventListener("keydown",_o),(async()=>{if(!1===u.autoLoadDirs||"false"===u.autoLoadDirs)return;const e=[...new Set(k.value.map(e=>e.dirTableId).filter(Boolean))];0!==e.length&&await Promise.all(e.map(e=>new Promise(t=>{Jt.value[e]?t():(en.value.add(e),c("load-directory-list",{dirTableId:e,callback:n=>{Jt.value[e]=n,Xt.value[e]=n,en.value.delete(e),t()}}))})))})(),tt.value=setInterval(()=>{rn()},3e5),Wi();const e=document.querySelector(".coda-style-datatable");e&&(e.addEventListener("mouseenter",ae,!0),e.addEventListener("mouseleave",le,!0))}),De(()=>{tt.value&&(clearInterval(tt.value),tt.value=null),nr(),document.removeEventListener("keydown",Gl,!0),me.value&&No();const e=document.querySelector(".coda-style-datatable");e&&(e.removeEventListener("mouseenter",ae,!0),e.removeEventListener("mouseleave",le,!0)),ne&&(clearTimeout(ne),ne=null)}),o({cleanup:nr,cancelCellEdit:El,startCellEdit:$l,isEditing:()=>null!==Dn.value,toggleSelectionMode:function(){Le.value=!Le.value,Le.value||po()},selectionModeEnabled:()=>Le.value,toggleFooter:Co,isFooterVisible:()=>ze.value,loadAllDirDataInBackground:mn,stopBackgroundLoading:yn,isBackgroundLoadingDirs:()=>un.value,backgroundLoadProgress:()=>cn.value}),(e,o)=>{var r,s,b;const I=P("Popover"),M=P("Button"),L=P("Dialog"),F=P("ContextMenu"),ne=A("tooltip");return a(),n("div",En,[U(I,{ref_key:"dirOverlay",ref:T,class:"dir-preview-popover"},{default:j(()=>{var e,t,i;return[V.value?(a(),n("div",Ln,[l("div",Fn,[l("span",Pn,Z($.value),1)]),l("div",An,Z((null==(e=V.value.rows[0])?void 0:e.val)||"—"),1),(null==(i=null==(t=V.value.rows[0])?void 0:t.items)?void 0:i.length)>0?(a(),n("div",_n,[(a(!0),n(z,null,Y(V.value.rows[0].items.slice(0,10),(e,t)=>(a(),n(z,{key:t},["value"===e.itemType?(a(),n("div",Rn,[l("span",Bn,Z(e.alias)+":",1),l("span",{class:"dir-preview-value",innerHTML:Gi(e.value,e.type)},null,8,Un)])):"subordinate"===e.itemType?(a(),n("div",Kn,[l("span",Hn,Z(e.alias)+":",1),l("span",Nn,Z(e.count),1)])):R("",!0)],64))),128))])):R("",!0)])):(a(),n("div",zn,[...o[27]||(o[27]=[l("i",{class:"pi pi-spin pi-spinner"},null,-1)])]))]}),_:1},512),U(I,{ref_key:"nestedOverlay",ref:O,class:"nested-preview-popover"},{default:j(()=>{var e;return[E.value?(a(),n("div",jn,[l("div",qn,[o[28]||(o[28]=l("i",{class:"pi pi-table"},null,-1)),l("span",Yn,Z(E.value.tableName),1),l("span",Wn,Z(E.value.totalCount),1)]),(null==(e=E.value.items)?void 0:e.length)>0?(a(),n("div",Gn,[(a(!0),n(z,null,Y(E.value.items.slice(0,5),(e,t)=>(a(),n("div",{key:t,class:"nested-preview-item"},[l("span",Zn,Z(t+1)+".",1),l("span",Xn,Z(e.val||e.value||"—"),1)]))),128)),E.value.totalCount>5?(a(),n("div",Jn," +"+Z(E.value.totalCount-5)+" ещё... ",1)):R("",!0)])):(a(),n("div",Qn,[...o[29]||(o[29]=[l("i",{class:"pi pi-inbox"},null,-1),l("span",null,"Нет записей",-1)])]))])):(a(),n("div",ea,[...o[30]||(o[30]=[l("i",{class:"pi pi-spin pi-spinner"},null,-1)])]))]}),_:1},512),(a(!0),n(z,null,Y(k.value,e=>(a(),_(I,{key:"filter-"+e.id,ref_for:!0,ref:t=>{t&&(oe.value[e.id]=t)},style:{width:"280px",maxHeight:"400px"},class:"column-filter-popover"},{default:j(()=>[l("div",ta,[l("div",na,[l("span",aa,"Фильтр: "+Z(e.value),1)]),l("div",la,[U(we(h),{modelValue:ce.value[e.id],"onUpdate:modelValue":t=>ce.value[e.id]=t,placeholder:"Поиск...",class:"w-full",size:"small"},{prefix:j(()=>[...o[31]||(o[31]=[l("i",{class:"pi pi-search"},null,-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),l("div",ia,[U(M,{label:"Все",size:"small",text:"",onClick:t=>function(e){const t=oo(e);ie.value[e]=new Set(t),Dt.value.length>0?Ot(Dt.value):Tt.value&&Lt(Tt.value)}(e.id)},null,8,["onClick"]),U(M,{label:"Очистить",size:"small",text:"",onClick:t=>{return n=e.id,ie.value[n]=new Set,ce.value[n]="",void(Dt.value.length>0?Ot(Dt.value):Tt.value&&Lt(Tt.value));var n}},null,8,["onClick"])]),l("div",oa,[(a(!0),n(z,null,Y(oo(e.id),t=>{var i;return a(),n("div",{key:t,class:"filter-value-item",onClick:n=>ro(e.id,t)},[U(we(re),{"model-value":null==(i=ie.value[e.id])?void 0:i.has(t),binary:!0,onClick:ke(n=>ro(e.id,t),["stop"])},null,8,["model-value","onClick"]),l("span",sa,Z(t||"(Пусто)"),1)],8,ra)}),128))])])]),_:2},1024))),128)),U(L,{visible:we(Xl),"onUpdate:visible":o[0]||(o[0]=e=>Me(Xl)?Xl.value=e:null),header:"Редактировать строку",style:{width:"50vw"},modal:!0,class:"row-edit-dialog",onShow:it},{footer:j(()=>[U(M,{label:"Отмена",icon:"pi pi-times",onClick:we(fi),text:""},null,8,["onClick"]),U(M,{ref_key:"rowEditSaveButton",ref:nt,label:"Сохранить",icon:"pi pi-check",onClick:we(hi)},null,8,["onClick"])]),default:j(()=>{var t;return[l("div",da,[(a(!0),n(z,null,Y(null==(t=we(ti))?void 0:t.headers,t=>{var o;return a(),n("div",{key:t.headerId,class:H(["form-field",{"has-expanding-content":er(t.type)}]),onDblclick:ke(n=>we(Nl)(t,e.row.cells[t.id]),["stop"])},[l("label",null,[X(Z(null==(o=k.value.find(e=>e.id===t.headerId))?void 0:o.value)+" ",1),l("i",{class:H(zo(t.type,t))},null,2)]),t.isNested?(a(),_(M,{key:0,label:"Открыть ("+(t.value||0)+")",icon:"fas fa-table",class:"w-full",severity:"secondary",onClick:e=>(e=>{const t=k.value.find(t=>t.id===e.headerId);Xl.value=!1,c("open-nested",{tableId:e.nestedTableId||(null==t?void 0:t.nestedTableId)||e.headerId,parentRowId:e.nestedLink,tableName:(null==t?void 0:t.value)||e.value})})(t)},null,8,["label","onClick"])):t.dirTableId?(a(),n(z,{key:1},["multi"===t.columnType?(a(),_(we(_t),{key:0,modelValue:t.dirValues,"onUpdate:modelValue":e=>t.dirValues=e,options:we(nn)(t.dirTableId),"option-label":"value","option-value":"id",multiple:!0,loading:we(tn)(t.dirTableId),disabled:we(tn)(t.dirTableId),placeholder:we(tn)(t.dirTableId)?"Загрузка...":"Выберите...",class:"w-full",onChange:e=>we(on)(t)},null,8,["modelValue","onUpdate:modelValue","options","loading","disabled","placeholder","onChange"])):(a(),_(we(Ke),{key:1,modelValue:t.dirRowId,"onUpdate:modelValue":e=>t.dirRowId=e,options:we(nn)(t.dirTableId),"option-label":"value","option-value":"id",filter:!0,"show-clear":!0,loading:we(tn)(t.dirTableId),disabled:we(tn)(t.dirTableId),placeholder:we(tn)(t.dirTableId)?"Загрузка...":"Выберите...",class:"w-full",onChange:e=>we(ln)(t)},null,8,["modelValue","onUpdate:modelValue","options","loading","disabled","placeholder","onChange"]))],64)):(a(),_(N(Wo(t.type)),i({key:2,modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,class:["w-full",{"p-invalid":we(ni)[t.headerId]}],binary:11===t.type,"show-icon":!0,dateFormat:9===t.type?"dd.mm.yy":"dd.mm.yy HH:mm","show-time":4===t.type,"show-seconds":4===t.type},{ref_for:!0},Go(t.type,t.dirTableId,we(Vn),u.database),{"onUpdate:modelValue":e=>((e,t)=>{e.value=t,er(e.type)&&xe(()=>{tr(e)})})(t,e),ref_for:!0,ref_key:"fieldRefs",ref:Qe}),null,16,["modelValue","onUpdate:modelValue","class","binary","dateFormat","show-time","show-seconds"]))],42,ua)}),128))])]}),_:1},8,["visible"]),U(L,{visible:we(Jl),"onUpdate:visible":o[2]||(o[2]=e=>Me(Jl)?Jl.value=e:null),header:"Подтверждение",style:{width:"400px"},modal:!0,onShow:ot},{footer:j(()=>[U(M,{label:"Отмена",icon:"pi pi-times",onClick:o[1]||(o[1]=e=>Jl.value=!1),text:""}),U(M,{ref_key:"confirmYesButton",ref:at,label:"Да",icon:"pi pi-check",onClick:we(ri)},null,8,["onClick"])]),default:j(()=>[l("div",ca,[o[32]||(o[32]=l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),l("span",null,Z(we(Ql)),1)])]),_:1},8,["visible"]),U(Gt,{visible:we(Ml),"onUpdate:visible":o[3]||(o[3]=e=>Me(Ml)?Ml.value=e:null),modelValue:we(Dl),"onUpdate:modelValue":o[4]||(o[4]=e=>Me(Dl)?Dl.value=e:null),header:we(Tl),onSave:we(Yl),onCancel:we(Wl)},null,8,["visible","modelValue","header","onSave","onCancel"]),U(Qt,{visible:p.value,"onUpdate:visible":o[5]||(o[5]=e=>p.value=e),modelValue:v.value,"onUpdate:modelValue":o[6]||(o[6]=e=>v.value=e),row:we(li),"parent-options":f.value,"first-header-id":null==(s=null==(r=k.value)?void 0:r[0])?void 0:s.id,onConfirm:Pi,onMakeIndependent:Ai,onCancel:Fi},null,8,["visible","modelValue","row","parent-options","first-header-id"]),U(bn,{visible:m.value,"onUpdate:visible":o[7]||(o[7]=e=>m.value=e),"button-label":g.value,"onUpdate:buttonLabel":o[8]||(o[8]=e=>g.value=e),"selected-action":y.value,"onUpdate:selectedAction":o[9]||(o[9]=e=>y.value=e),actions:d,"initial-params":w.value,onConfirm:Ri,onCancel:_i},null,8,["visible","button-label","selected-action","initial-params"]),U(Tn,{visible:de.value,"onUpdate:visible":o[10]||(o[10]=e=>de.value=e),rule:ue.value,"onUpdate:rule":o[11]||(o[11]=e=>ue.value=e),"existing-rules":se.value,onSave:fo,onDeleteRule:mo,onCancel:o[12]||(o[12]=e=>de.value=!1)},null,8,["visible","rule","existing-rules"]),U(On,{visible:pe.value,"onUpdate:visible":o[13]||(o[13]=e=>pe.value=e),"image-url":ve.value,filename:he.value,onDownload:yo,onError:bo},null,8,["visible","image-url","filename"]),U(F,{ref_key:"headerContextMenu",ref:wi,model:Ei.value},null,8,["model"]),U(F,{ref_key:"rowContextMenu",ref:D,model:Li.value},null,8,["model"]),U(F,{ref_key:"footerContextMenu",ref:Mo,model:To.value},null,8,["model"]),U(I,{ref_key:"typeMenu",ref:Ii,style:{width:"320px"},target:we(gi)},{default:j(()=>[l("div",pa,[(a(!0),n(z,null,Y(vt.value,e=>{var t;return a(),n("div",{key:e.value,class:H(["type-item",{"active-type":(null==(t=we(ki))?void 0:t.type)===e.value}]),onClick:t=>we(Ti)(e.value)},[l("i",{class:H(["fa",e.icon])},null,2),l("span",null,Z(e.label),1)],10,va)}),128))])]),_:1},8,["target"]),U(q,{name:"slide-down"},{default:j(()=>[Ae.value?(a(),n("div",ha,[l("div",fa,[l("span",ma," Выбрано: "+Z(Fe.value.size),1),l("div",ba,[U(M,{label:"Удалить",icon:"pi pi-trash",severity:"danger",size:"small",onClick:vo,disabled:null==u?void 0:u.disableEditing},null,8,["disabled"]),U(M,{label:"Экспорт",icon:"pi pi-file-excel",severity:"secondary",size:"small",onClick:ho}),U(M,{label:"Отменить",icon:"pi pi-times",text:"",size:"small",onClick:po})])])])):R("",!0)]),_:1}),l("div",{class:"table-container",id:"table-container-"+e.$attrs["data-tab-id"],style:{"max-height":"600px"},onScroll:o[26]||(o[26]=(...e)=>we(Nt)&&we(Nt)(...e)),onMousedown:$o,onMousemove:Oo,onMouseup:Eo},[l("table",{ref_key:"table",ref:x,style:K(ct.value),onClick:Bi},[l("thead",null,[l("tr",null,[l("th",{class:"row-counter-header",style:K(pt.value)},[l("div",ga,[Le.value?W((a(),_(we(re),{key:0,"model-value":uo.value,binary:!0,onChange:co,class:"select-all-checkbox"},null,8,["model-value"])),[[ne,"Выбрать все",void 0,{bottom:!0}]]):(a(),n("i",wa))])],4),(a(!0),n(z,null,Y(k.value,e=>{return a(),n("th",{key:e.id,"data-header-id":e.id,"data-term-id":e.termId,"data-is-main":e.isMain,"data-type":e.type,"data-dir-table-id":e.dirTableId,"data-nested":e.nested,style:K({width:`${e.width}px`,...ko(e.id)?{left:`${wo.value[e.id]}px`}:{}}),draggable:"true",onDragstart:t=>we(qt)(t,e.id),onDragover:ke(t=>we(Yt)(t,e.id),["prevent"]),onDrop:t=>we(Wt)(t,e.id),onDragend:o[16]||(o[16]=(...e)=>we(Zt)&&we(Zt)(...e)),onContextmenu:ke(t=>we(xi)(t,e),["prevent"]),class:H(["draggable-column",{"drop-left":"left"===we(jt)&&e.id===we(zt),"drop-right":"right"===we(jt)&&e.id===we(zt),"non-editable":t.disableEditing,"pinned-column":ko(e.id)}]),title:e.value},[l("div",Ia,[e.id===we(bi)?(a(),_(we(h),{key:0,ref_for:!0,ref_key:"headerEditorInput",ref:lt,modelValue:we(yi),"onUpdate:modelValue":o[14]||(o[14]=e=>Me(yi)?yi.value=e:null),onKeydown:[J(we(Di),["enter"]),J(we(Mi),["esc"])],onBlur:we(Di),class:"header-editor"},null,8,["modelValue","onKeydown","onBlur"])):W((a(),n("div",{key:1,class:H(["header-actions",{"disabled-sorting":!u.allDataLoaded}]),onClick:ke(t=>function(e,t){if(e&&u.allDataLoaded)if(t.shiftKey){const t=Be.value.findIndex(t=>t.headerId===e);if(t>=0){const e=Be.value[t].direction;Be.value[t].direction="asc"===e?"desc":"asc"}else Be.value.length<3||Be.value.shift(),Be.value.push({headerId:e,direction:"asc"})}else if(0===Be.value.findIndex(t=>t.headerId===e)&&1===Be.value.length){const e=Be.value[0].direction;Be.value[0].direction="asc"===e?"desc":"asc"}else Be.value=[{headerId:e,direction:"asc"}]}(e.id,t),["stop"])},[l("span",Ca,Z(e.value),1),(i=e.id,Be.value.some(e=>e.headerId===i)?(a(),n("span",Sa,[l("span",Da,Z(Io(e.id).order),1),l("i",{class:H("asc"===Io(e.id).direction?"pi pi-arrow-up":"pi pi-arrow-down")},null,2)])):R("",!0)),(null==u?void 0:u.disableTypeEditing)?R("",!0):(a(),n("span",{key:1,class:"type-icon",onClick:ke(t=>we(Vi)(t,e),["stop"]),title:jo(e.type,e)},[l("i",{class:H(zo(e.type,e))},null,2),o[33]||(o[33]=l("i",{class:"fas fa-caret-down"},null,-1))],8,Ma)),W(U(M,{icon:so(e.id)?"pi pi-filter-fill":"pi pi-filter",class:H(["p-button-text p-button-sm filter-button",{"filter-active":so(e.id)}]),disabled:!u.allDataLoaded,onClick:ke(t=>function(e,t){if(Ee.value&&Ee.value!==e){const e=oe.value[Ee.value];e&&e.hide()}Ee.value=e,ie.value[e]||(ie.value[e]=new Set),ce.value[e]||(ce.value[e]="");const n=oe.value[e];n&&n.toggle(t)}(e.id,t),["stop"])},null,8,["icon","class","disabled","onClick"]),[[ne,u.allDataLoaded?"Фильтровать":"Фильтры доступны только при загрузке всех данных",void 0,{top:!0}]]),U(M,{icon:"pi pi-bars",class:"p-button-text p-button-sm group-button",onClick:ke(t=>we(Et)(e.id),["stop"]),title:"Группировать по этому столбцу"},null,8,["onClick"])],10,xa)),[[ne,u.allDataLoaded?"":"Сортировка доступна только при загрузке всех данных",void 0,{top:!0}]])]),W(l("div",{class:"resizer",onMousedown:t=>((e,t)=>{C.value=!0,e.preventDefault(),e.stopPropagation();const n=e.currentTarget.closest("th");n&&(S.value={headerId:t,startX:e.clientX,startWidth:n.offsetWidth,currentTh:n,tableStartWidth:x.value.offsetWidth},n.classList.add("resizing"),document.addEventListener("mousemove",Ro),document.addEventListener("mouseup",Bo),document.body.style.cursor="col-resize",document.body.style.userSelect="none")})(t,e.id),onDblclick:ke(t=>(e=>{const t=document.querySelector(`th[data-header-id="${e}"]`),n=document.querySelectorAll(`td[data-header-id="${e}"]`);if(!t)return;const a=document.createElement("div");a.style.position="absolute",a.style.visibility="hidden",a.style.whiteSpace="nowrap",a.style.font=window.getComputedStyle(t).font,a.style.padding="0",a.style.margin="0",document.body.appendChild(a);let l=0;const i=t.querySelector(".header-content");if(i){const e=i.textContent||"";a.textContent=e,l=Math.max(l,a.offsetWidth)}Array.from(n).slice(0,100).forEach(e=>{const t=e.textContent||"";a.textContent=t,l=Math.max(l,a.offsetWidth)}),document.body.removeChild(a);const o=40+(t.querySelector(".filter-button")?30:0)+(t.querySelector(".sort-indicator")?20:0),r=Math.max(50,l+o);t.style.width=`${r}px`,t.style.minWidth=`${r}px`,t.style.maxWidth=`${r}px`,n.forEach(e=>{e.style.width=`${r}px`,e.style.minWidth=`${r}px`,e.style.maxWidth=`${r}px`});const s=k.value.map(t=>t.id===e?{...t,width:r}:t);k.value=s,c("update:table-config",{headers:s,tableWidth:x.value.offsetWidth})})(e.id),["stop"]),onClick:o[15]||(o[15]=ke(()=>{},["stop"]))},null,40,Ta),[[ne,{value:"Двойной клик — автоподбор ширины",showDelay:1e3},void 0,{left:!0}]])],46,ka);var i}),128)),(null==u?void 0:u.disableEditing)||(null==u?void 0:u.disableTypeEditing)||(null==u?void 0:u.isLoading)||(null==u?void 0:u.isLoadingMore)||!((null==(b=null==u?void 0:u.rows)?void 0:b.length)>0)?R("",!0):(a(),n("th",Va,[l("button",{class:H(["add-column-btn",{"is-loading":null==u?void 0:u.isAddingColumn}]),disabled:(null==u?void 0:u.isAddingColumn)||(null==u?void 0:u.disableEditing),onClick:qo,title:"Добавить колонку"},[(null==u?void 0:u.isAddingColumn)?(a(),n("i",Oa)):(a(),n("i",Ea))],10,$a)]))])]),l("tbody",null,[we(Rt)&&we(Bt).offset>0?(a(),n("tr",La,[l("td",{colspan:k.value.length+1,style:K({height:`${we(Bt).offset}px`,padding:0})},null,12,Fa)])):R("",!0),(a(!0),n(z,null,Y(we(Ut),(e,r)=>(a(),n(z,{key:"group"===e.type?`group-${e.key}`:e.data.id},["group"===e.type?(a(),n("tr",{key:0,class:"group-header",onClick:t=>we(Ft)(e.key)},[l("td",{colspan:k.value.length+1},[l("i",{class:H(["pi",we(Mt)[e.key]?"pi-chevron-down":"pi-chevron-right"])},null,2),X(" "+Z(we(Pt)(e.key))+" ("+Z(e.data.rows.length)+") ",1)],8,Aa)],8,Pa)):(a(),n("tr",{key:1,"data-row-id":e.data.id,class:"data-row",style:K(fe.value[e.data.id]?{height:`${fe.value[e.data.id]}px`}:{}),onFocusin:t=>we(fn)(t,e.data,u.autoLoadDirs),onMouseenter:t=>we(hn)(e.data,!0),onContextmenu:ke(t=>we(si)(t,e.data),["prevent"])},[l("td",{class:H(["row-counter-cell",{"row-selected":Le.value&&Fe.value.has(e.data.id)}]),style:K({...pt.value,...fe.value[e.data.id]?{height:`${fe.value[e.data.id]}px`}:{}})},[l("div",{class:"row-resizer",onMousedown:t=>((e,t)=>{e.preventDefault(),e.stopPropagation();const n=e.currentTarget.closest("tr");n&&(me.value=!0,be.value={rowId:t,startY:e.clientY,startHeight:n.offsetHeight,currentTr:n},n.classList.add("row-resizing"),document.addEventListener("mousemove",Ko),document.addEventListener("mouseup",Ho),document.body.style.cursor="row-resize",document.body.style.userSelect="none")})(t,e.data.id),onDblclick:ke(t=>(e=>{delete fe.value[e],Oe();const t=document.querySelector(`tr[data-row-id="${e}"]`);t&&(t.style.height="",t.querySelectorAll("td").forEach(e=>{e.style.height=""}))})(e.data.id),["stop"]),title:"Перетащите для изменения высоты строки (двойной клик - сброс)"},null,40,Ra),Le.value?(a(),n("div",Ba,[U(we(re),{"model-value":Fe.value.has(e.data.id),binary:!0,onClick:ke(t=>function(e,t,n){if(t.shiftKey&&null!==Pe.value){const e=Math.min(Pe.value,n),t=Math.max(Pe.value,n);for(let n=e;n<=t;n++){const e=It.value[n];e&&Fe.value.add(e.id)}}else t.ctrlKey||t.metaKey,Fe.value.has(e)?Fe.value.delete(e):Fe.value.add(e),Pe.value=n;Ae.value=Fe.value.size>0}(e.data.id,t,we(Bt).start+r),["stop"]),class:"row-select-checkbox"},null,8,["model-value","onClick"]),l("span",{class:"row-number",onClick:t=>we(vi)(e.data)},Z(lo(e.data.id)+1),9,Ua)])):(a(),n("div",Ka,[l("span",Ha,Z(lo(e.data.id)+1),1),(null==u?void 0:u.disableEditing)?R("",!0):W((a(),n("i",{key:0,class:"pi pi-pencil text-primary cursor-pointer row-edit-icon",onClick:t=>we(vi)(e.data)},null,8,Na)),[[ne,{value:"Редактировать строку",showDelay:1e3},void 0,{right:!0}]])]))],6),(a(!0),n(z,null,Y(k.value,r=>{var s,d,p,v,f,m,b,y,g;return W((a(),n("td",{key:r.id,"data-cell-id":null==(s=e.data.cells[r.id])?void 0:s.id,"data-row-id":e.data.id,"data-header-id":r.id,"data-label":r.value,style:K({width:`${r.width}px`,...ko(r.id)?{left:`${wo.value[r.id]}px`}:{},...go(r.id,null==(d=e.data.cells[r.id])?void 0:d.value,e.data.id),...fe.value[e.data.id]?{height:`${fe.value[e.data.id]}px`}:{}}),class:H({"selected-cell":io(r.id,e.data.id),"selected-range":Vo(r.id,e.data.id),"editing-cell":we(Fl)(r.id,e.data.id),"pinned-column":ko(r.id),"cell-changed":gt(r.id,e.data.id)}),onMousedown:ke(t=>we(Hl)(t,r.id,e.data.id),["stop"]),onDblclick:ke(t=>we($l)(r.id,e.data.id),["stop"])},[l("div",ja,[we(Pl)(r.id,e.data.id)?(a(),n(z,{key:1},[(null==(b=we(xl))?void 0:b.dirTableId)&&"multi"===we(xl).columnType?(a(),_(we(_t),{key:0,ref_for:!0,ref_key:"multiselectRef",ref:et,modelValue:we($n),"onUpdate:modelValue":o[18]||(o[18]=e=>Me($n)?$n.value=e:null),options:we(Vn),optionLabel:"value",optionValue:"id",multiple:!0,filter:!0,autoFilterFocus:!0,showToggleAll:!0,display:"chip",maxSelectedLabels:3,loading:ht.value,disabled:ht.value,placeholder:"Выберите значения...",class:"cell-editor seamless-editor",onKeydown:we(Rl),onShow:o[19]||(o[19]=e=>Sl.value=!0),onHide:we(_l),onClick:we(Al)},null,8,["modelValue","options","loading","disabled","onKeydown","onHide","onClick"])):(null==(y=we(xl))?void 0:y.dirTableId)?(a(),_(we(Ke),{key:1,modelValue:we(Mn),"onUpdate:modelValue":o[20]||(o[20]=e=>Me(Mn)?Mn.value=e:null),options:we(Vn),optionLabel:"value",optionValue:"id",filter:!0,showClear:!0,loading:ht.value,disabled:ht.value,placeholder:ht.value?"Загрузка...":"Выберите...",class:"cell-editor seamless-editor",onKeydown:we(Bl),onShow:o[21]||(o[21]=e=>Sl.value=!0),onHide:we(Ul),onClick:we(Al)},null,8,["modelValue","options","loading","disabled","placeholder","onKeydown","onHide","onClick"])):5===r.type?(a(),_(we(Ke),{key:2,ref_for:!0,ref_key:"cellEditorInput",ref:Cl,modelValue:we(Mn),"onUpdate:modelValue":o[22]||(o[22]=e=>Me(Mn)?Mn.value=e:null),options:we(Vn),optionLabel:"label",optionValue:"value",filter:!0,showClear:!0,loading:we(kn),disabled:we(kn),placeholder:we(kn)?"Загрузка...":"Выберите уровень доступа...",class:"cell-editor seamless-editor",onKeydown:we(Bl),onShow:o[23]||(o[23]=e=>Sl.value=!0),onHide:we(Ul),onClick:we(Al)},{option:j(e=>[l("div",{class:H(["grant-option",{"grant-option-system":we(Sn)(e.option.value)}])},[l("i",{class:H([e.option.icon||"pi pi-shield","grant-option-icon"])},null,2),l("span",al,Z(e.option.label),1),e.option.severity?(a(),_(we(Te),{key:0,severity:e.option.severity,class:"grant-option-badge"},null,8,["severity"])):R("",!0)],2)]),value:j(e=>[e.value?(a(),n("div",ll,[l("i",{class:H([we(Cn)(e.value),"grant-value-icon"])},null,2),l("span",null,Z(we(xn)(e.value)),1)])):(a(),n("span",il,"Выберите уровень доступа..."))]),_:1},8,["modelValue","options","loading","disabled","placeholder","onKeydown","onHide","onClick"])):10===r.type?(a(),n("div",ol,[l("input",{type:"file",id:`file-input-${e.data.id}-${r.id}`,class:"file-input-hidden",onChange:t=>we(zl)(t,r,e.data)},null,40,rl),l("label",{for:`file-input-${e.data.id}-${r.id}`,class:"file-editor-label",title:we(Mn)||"Выберите файл"},[o[36]||(o[36]=l("i",{class:"pi pi-upload file-editor-icon"},null,-1)),l("span",dl,Z(we(Mn)?we(ql)(we(Mn)):"Выберите файл..."),1)],8,sl),we(Mn)?(a(),n("i",{key:0,class:"pi pi-times file-editor-clear",onClick:ke(t=>we(jl)(r,e.data),["stop"]),title:"Удалить файл"},null,8,ul)):R("",!0)])):17===r.type?(a(),_(we(h),{key:4,ref_for:!0,ref_key:"cellEditorInput",ref:Cl,modelValue:we(Mn),"onUpdate:modelValue":o[24]||(o[24]=e=>Me(Mn)?Mn.value=e:null),onKeydown:[J(t=>we(Ll)(r.id,e.data.id),["enter"]),J(we(El),["esc"])],onBlur:t=>we(Ll)(r.id,e.data.id),class:"cell-editor seamless-editor",placeholder:"Введите путь к файлу..."},null,8,["modelValue","onKeydown","onBlur"])):(a(),_(N(Wo(r.type)),i({key:5,ref_for:!0,ref_key:"cellEditorInput",ref:Cl,modelValue:we(Mn),"onUpdate:modelValue":o[25]||(o[25]=e=>Me(Mn)?Mn.value=e:null),onKeydown:[J(t=>we(Ll)(r.id,e.data.id),["enter"]),J(we(El),["esc"])],onBlur:t=>we(Ll)(r.id,e.data.id),binary:11===r.type,showIcon:!0,dateFormat:9===r.type?"dd.mm.yy":"dd.mm.yy HH:mm",showTime:4===r.type,showSeconds:4===r.type,class:"cell-editor seamless-editor"},{ref_for:!0},Go(r.type,r.dirTableId,we(nn)(r.dirTableId),u.database)),null,16,["modelValue","onKeydown","onBlur","binary","dateFormat","showTime","showSeconds"]))],64)):(a(),n(z,{key:0},["regular"===r.columnType?(a(),n(z,{key:0},[11===r.type?(a(),n("div",{key:0,class:"cell-boolean-checkbox",onClick:o[17]||(o[17]=ke(()=>{},["stop"]))},[U(we(re),{modelValue:(g=e.data.cells[r.id].value,null!=g&&""!==g&&("boolean"==typeof g?g:"number"==typeof g?0!==g:"string"==typeof g?"X"===g||"1"===g||"true"===g||"да"===g.toLowerCase():Boolean(g))),binary:!0,"onUpdate:modelValue":t=>(async(e,t,n)=>{const a=kt.value.find(e=>e.id===t);if(!a)return;if(!a.cells[e])return;const l=n?"X":"",i=`${t}:${e}`;Vl.value.set(i,l),yt(e,t),c("cell-update",{rowId:t,headerId:e,value:l})})(r.id,e.data.id,t)},null,8,["modelValue","onUpdate:modelValue"])])):e.data.cells[r.id].nested?(a(),n("div",{key:2,class:"cell-nested",onDblclick:ke(t=>we(Nl)(r,e.data.cells[r.id]),["stop"]),onMouseenter:t=>Jo(t,r,e.data.cells[r.id],e.data.id),onMouseleave:Qo},[o[34]||(o[34]=l("i",{class:"fas fa-table"},null,-1)),X(" ("+Z(Gi(null==(p=e.data.cells[r.id])?void 0:p.value,r.type,e.data.id,r.id))+") ",1)],40,Wa)):(a(),n("span",qa,[[3,8].includes(r.type)?(a(),_(He,{key:0,text:e.data.cells[r.id].value,database:t.database},null,8,["text","database"])):(a(),n("div",{key:1,class:"cell-value",innerHTML:Gi(e.data.cells[r.id].value,r.type,e.data.id,r.id)},null,8,Ya))]))],64)):"dir"===r.columnType?(a(),n("div",{key:1,class:"cell-dir",onDblclick:ke(t=>we($l)(r.id,e.data.id),["stop"])},[e.data.cells[r.id].dirRowId&&e.data.cells[r.id].value?(a(),n("span",{key:0,class:"dir",onClick:ke(t=>Zo(r,e.data.cells[r.id].dirRowId),["stop"]),onMouseenter:t=>Xo(t,r,e.data.cells[r.id].dirRowId),onMouseleave:B},Z(e.data.cells[r.id].value),41,Za)):(a(),n("span",Xa))],40,Ga)):"multi"===r.columnType?(a(),n("div",{key:2,class:"cell-multi-dir",onDblclick:ke(t=>we($l)(r.id,e.data.id),["stop"])},[e.data.cells[r.id].dirValues&&e.data.cells[r.id].dirValues.length>0?(a(!0),n(z,{key:0},Y(e.data.cells[r.id].dirValues,(e,t)=>(a(),n("span",{key:t,class:"dir-tag",onClick:ke(t=>Zo(r,e.dirRowId),["stop"]),onMouseenter:t=>Xo(t,r,e.dirRowId),onMouseleave:B},Z(((e,t,n=null)=>{if(null==n?void 0:n.displayValue)return n.displayValue;const a=e.dirTableId;if(Jt.value[a]){const e=Jt.value[a].find(e=>e.id===t);return e?e.value:`ID: ${t}`}return"..."})(r,e.dirRowId,e)),41,Qa))),128)):(a(),n("span",el))],40,Ja)):"nested"===r.columnType?(a(),n("div",{key:3,class:"cell-nested",onClick:ke(t=>we(Nl)(r,e.data.cells[r.id]),["stop"]),onMouseenter:t=>Jo(t,r,e.data.cells[r.id],e.data.id),onMouseleave:Qo},[l("span",{class:H(["nested-badge",we(Xe)(null==(v=e.data.cells[r.id])?void 0:v.value)])},Z((null==(f=e.data.cells[r.id])?void 0:f.value)||0),3),l("span",nl,Z(we(Je)(null==(m=e.data.cells[r.id])?void 0:m.value,r.label)),1),o[35]||(o[35]=l("i",{class:"pi pi-chevron-right nested-arrow"},null,-1))],40,tl)):R("",!0)],64))])],46,za)),[[ne,gt(r.id,e.data.id)?"Ячейка изменена":"",void 0,{top:!0}]])}),128))],44,_a))],64))),128)),we(Rt)&&we(Kt)?(a(),n("tr",cl,[l("td",{colspan:k.value.length+1,style:K({height:we(Kt)-we(Bt).offset-we(Ut).length*we(32)+"px",padding:0})},null,12,pl)])):R("",!0)]),ze.value?(a(),n("tfoot",vl,[l("tr",hl,[l("td",{class:"row-counter-footer",style:K(pt.value)},[...o[37]||(o[37]=[l("div",{class:"footer-cell-content"},[l("i",{class:"pi pi-calculator"})],-1)])],4),(a(!0),n(z,null,Y(k.value,e=>(a(),n("td",{key:`footer-${e.id}`,style:K({width:`${e.width}px`,...ko(e.id)?{left:`${wo.value[e.id]}px`}:{}}),class:H({"footer-cell":!0,"pinned-column":ko(e.id)}),onContextmenu:ke(t=>function(e,t){var n;null==(n=Mo.value)||n.show(e),Do.value=t}(t,e),["prevent"])},[l("div",ml,Z(So(e.id)),1)],46,fl))),128))])])):R("",!0)],4),(null==u?void 0:u.disableEditing)||(null==u?void 0:u.disableTypeEditing)||(null==u?void 0:u.isLoading)||(null==u?void 0:u.isLoadingMore)?R("",!0):(a(),n("div",bl,[l("button",{class:H(["add-row-button coda-add-button",{"is-loading":null==u?void 0:u.isAddingRow}]),disabled:(null==u?void 0:u.isAddingRow)||(null==u?void 0:u.disableEditing),onClick:Yo},[l("span",gl,[(null==u?void 0:u.isAddingRow)?(a(),n("i",wl)):(a(),n("i",kl))]),o[38]||(o[38]=l("span",{class:"add-row-text"},"Новая строка",-1))],10,yl)]))],40,ya),l("div",{ref_key:"customTooltip",ref:G,class:H(["primevue-tooltip",{"tooltip-visible":Q.value}]),style:K(te.value)},[o[39]||(o[39]=l("span",{class:"tooltip-arrow"},null,-1)),l("span",Il,Z(ee.value),1)],6)])}}},[["__scopeId","data-v-e037decb"]]),Cl={class:"table-header-row"},Sl={class:"flex align-items-start gap-2"},Dl={class:"table-title"},Ml={class:"table-header-toolbar"},Tl={class:"flex gap-1"},Vl={class:"search-with-navigation"},$l={key:0,class:"search-navigation-controls"},Ol={class:"search-counter"},El={key:0,class:"text-center py-5"},Ll={key:1,class:"text-center py-5"},Fl={key:2,class:"mb-3"},Pl={class:"flex align-items-center justify-content-between"},Al={key:0,class:"bg-loading-overlay"},_l={class:"bg-loading-indicator"},Rl={class:"flex align-items-center gap-3"},Bl={class:"flex-1"},Ul={class:"flex justify-content-between align-items-center mb-1"},Kl={class:"text-sm"},Hl={class:"flex flex-column gap-3"},Nl={class:"field"},zl=["for"],jl={class:"flex flex-column gap-4"},ql={class:"field"},Yl={class:"field"},Wl={class:"flex justify-content-between mb-4"},Gl={class:"flex flex-column gap-3 mb-4 max-h-20rem overflow-y-auto"},Zl=["for"],Xl={class:"flex justify-content-between w-full"},Jl={key:0,class:"filter-empty-state"},Ql={key:1,class:"filter-conditions-list"},ei={class:"condition-header"},ti={class:"condition-title"},ni={class:"condition-fields"},ai={class:"field mb-3"},li=["for"],ii={class:"field mb-3"},oi=["for"],ri={key:0,class:"field"},si=["for"],di={key:1,class:"grid"},ui={class:"col-6"},ci={class:"field"},pi=["for"],vi={class:"col-6"},hi={class:"field"},fi=["for"],mi={class:"mt-3"},bi={class:"flex justify-content-between align-items-center w-full"},yi={class:"flex gap-2"},gi={key:0,class:"text-center py-5"},wi={key:1,class:"nested-table-content"},ki={class:"flex justify-content-between w-full"},Ii={key:0,class:"directory-table-content"},xi={class:"settings-content"},Ci={class:"settings-section"},Si={class:"settings-options"},Di={class:"settings-option"},Mi={class:"settings-option"},Ti={class:"settings-info-note"},Vi={class:"settings-section"},$i={class:"date-style-grid"},Oi="datatable_settings",Ei=ze({__name:"IntegramDataTableWrapper",props:{typeIdProp:{type:[String,Number],default:null},typeId:{type:[String,Number],default:null},databaseProp:{type:String,default:null},database:{type:String,default:null},serverUrl:{type:String,default:null},embedded:{type:Boolean,default:!1},parentId:{type:[String,Number],default:null},filterId:{type:[String,Number],default:null}},setup(t){let o=null,r=null,s=null;const d=t,u=$e(),c=Le(),p=Ce(()=>d.typeIdProp||d.typeId||u.params.typeId),v=Oe(),f=Ee(),{isAuthenticated:m,database:b}=Ae(),y=ye(!0),g=ye(!1),w=ye(null),k=ye(!1),I=ye(!1),x=ye(!1),C=ye(!1),S=ye(3),D=ye(""),M=ye("double-click"),T=ye(!1),V=ye(!1),$=ye(null),O=ye(!1);function E(){$.value&&($.value.toggleSelectionMode(),O.value=$.value.selectionModeEnabled())}const L=ye(!1);function F(){$.value&&($.value.toggleFooter(),L.value=$.value.isFooterVisible())}const B=ye("comfortable");function K(){const e=["compact","comfortable","spacious"],t=e.indexOf(B.value);B.value=e[(t+1)%e.length]}function G(){switch(B.value){case"compact":return"pi pi-bars";case"comfortable":default:return"pi pi-th-large";case"spacious":return"pi pi-stop"}}function Q(){switch(B.value){case"compact":return"Компактный";case"comfortable":default:return"Удобный";case"spacious":return"Просторный"}}const ee=ye(!1),te=ye({loaded:0,total:0});let ne=null;function ae(e){const t=!0===e||"true"===e;!t&&ne&&(clearInterval(ne),ne=null,$.value&&$.value.stopBackgroundLoading()),ze.value.autoLoadDirs=t,Ne({...ze.value}),t&&$.value&&(ee.value=!0,$.value.loadAllDirDataInBackground(t),ne=setInterval(()=>{$.value&&(te.value=$.value.backgroundLoadProgress(),ee.value=$.value.isBackgroundLoadingDirs(),ee.value||(clearInterval(ne),ne=null))},200))}const le=ye({visible:!1,tableId:null,parentRowId:null,tableName:"",loading:!1}),ie=ye({visible:!1,typeId:null,typeName:"",dirRowId:null}),oe=ye(!1),se=ye(!1),de=ye(""),ue=ye(""),ce=ye(!1),pe=ye([]),ve=ye(null);let he=null;const fe=ye([]),me=ye(-1),be=ye([]),ke=ye({}),Ie=ye(null),De=ye([]),Me=ye([]),Te=ye([]),Re=ye(1),Be=ye(50),Ke=ye(!1),He={autoLoadAll:!0,autoLoadDirs:!0,maxAutoLoadSize:2e4,backgroundChunkSize:1e3,backgroundDelay:150,dateStyle:"relative"};function Ne(e){try{localStorage.setItem(Oi,JSON.stringify(e))}catch(t){}}const ze=ye(function(){try{const e=localStorage.getItem(Oi);if(e){const t=JSON.parse(e);return{...He,...t}}return localStorage.setItem(Oi,JSON.stringify(He)),He}catch(e){try{localStorage.setItem(Oi,JSON.stringify(He))}catch{}return He}}()),je=ye([]),We=ye(!1),Ge=ye(0),Ze=ye(0),Xe=ye(0),Je=ye(!1),Qe=ye(!1),et=ye({value:"",requisites:{}}),tt=Object.freeze({label:"Таблицы",to:"/integram/table",icon:"pi pi-table"}),nt=Ce(()=>d.databaseProp||d.database||u.params.database||b.value||"A2025"),at=Ce(()=>d.serverUrl?d.serverUrl:_e.getServer()||"https://dronedoc.ru"),lt=Ce(()=>{var e;const t=[tt];return(null==(e=Ie.value)?void 0:e.val)&&t.push({label:Ie.value.val,icon:"pi pi-bars"}),t}),it=Ce(()=>De.value.filter(e=>!e.isNested)),ot=Ce(()=>be.value.map(e=>({id:e.id,value:e.value||e.title||`Column ${e.id}`}))),rt=Ce(()=>{let e=Je.value?je.value:Te.value;const t=ue.value.toLowerCase().trim();return t&&(e=e.filter(e=>e.values.some(e=>String(e.value||"").toLowerCase().includes(t)))),e}),st=Ce(()=>ze.value.autoLoadAll&&!Je.value&&!We.value&&de.value.trim().length>0),dt=Ce(()=>Me.value.filter(e=>10!==e.type)),ut=Ce(()=>pe.value.some(e=>"isEmpty"===e.operator||null!==e.value&&""!==e.value)),ct={text:[{label:"содержит",value:"contains"},{label:"равно",value:"equals"},{label:"начинается с",value:"startsWith"},{label:"заканчивается на",value:"endsWith"},{label:"пусто",value:"isEmpty"}],number:[{label:"равно",value:"equals"},{label:"больше",value:"greater"},{label:"меньше",value:"less"},{label:"между",value:"between"},{label:"пусто",value:"isEmpty"}],date:[{label:"равно",value:"equals"},{label:"между",value:"between"},{label:"пусто",value:"isEmpty"}],boolean:[{label:"равно",value:"equals"},{label:"не равно",value:"notEquals"}]};function pt(e){switch(e){case 3:case 8:case 12:default:return"text";case 13:case 14:return"number";case 9:case 4:return"date";case 11:return"boolean"}}function vt(e){return ct[pt(e)][0].value}async function ht(e=1){if(m.value)try{1===e?y.value=!0:g.value=!0,w.value=null,nt.value&&_e.setDatabase(nt.value);const n={pg:e,LIMIT:Be.value};d.parentId&&(n.F_U=d.parentId),d.filterId&&(n.F_I=d.filterId);const a=function(){const e={};let t=!1;return pe.value.forEach((n,a)=>{if(!n.headerId||!n.value)return;const l=Me.value.find(e=>e.id===n.headerId);if(!l||!l.termId)return;const i="val"===l.termId?`F_${p.value}`:`F_${l.termId}`;let o=String(n.value);switch(n.operator){case"contains":o=`%${o.replace(/%/g,"")}%`,t=!0;break;case"startsWith":o=`${o.replace(/%/g,"")}%`,t=!0;break;case"endsWith":o=`%${o.replace(/%/g,"")}`,t=!0}e[i]=o}),t&&(e.lnx=0),e}();Object.keys(a).length>0&&Object.assign(n,a);const l=await _e.getObjectList(p.value,n);if(Ie.value=l.type,l.req_type&&l.req_order&&(De.value=l.req_order.map(e=>{var t,n,a,i,o,r;return{id:e,alias:l.req_type[e]||`Req ${e}`,base:(null==(t=l.req_base)?void 0:t[e])||"SHORT",baseId:null==(n=l.req_base_id)?void 0:n[e],refType:(null==(a=l.ref_type)?void 0:a[e])||null,isMulti:(null==(o=null==(i=l.req_attrs)?void 0:i[e])?void 0:o.includes(":MULTI:"))||!1,isNested:!!(null==(r=l.arr_type)?void 0:r[e])}})),function(e,t=!0){var n;const a=[{id:"val",value:(null==(n=e.type)?void 0:n.val)||"Значение",type:3,width:200,termId:"val",isMain:!0,columnType:"regular"}];if(e.req_order&&e.req_order.forEach(t=>{var n,l,i,o,r,s,d;const u=(null==(n=e.req_type)?void 0:n[t])||`Req ${t}`,c=(null==(l=e.req_base)?void 0:l[t])||"SHORT",p=null==(i=e.ref_type)?void 0:i[t],v=(null==(r=null==(o=e.req_attrs)?void 0:o[t])?void 0:r.includes(":MULTI:"))||!1,h=!!(null==(s=e.arr_type)?void 0:s[t]);let f="regular";h?f="nested":p&&(f=v?"multi":"dir"),a.push({id:`req_${t}`,value:u,type:yt(c),width:150,termId:t,columnType:f,dirTableId:p?parseInt(p):null,isMulti:v,nested:h,nestedTableId:h?parseInt(t):null,attrs:(null==(d=e.req_attrs)?void 0:d[t])||null})}),Me.value=a,t&&0===be.value.length){be.value=[...a];const e={};a.forEach(t=>{e[t.id]=!0}),ke.value=e}const l=e.object||[],i=e.reqs||{};if(l.length>0){const e=l[0].id;i[e]}const o=l.map((t,n)=>{const a=[];return a.push({headerId:"val",value:t.val,type:3}),e.req_order&&e.req_order.forEach(n=>{var l,o,r,s,d,u,c;const p=(null==(l=i[t.id])?void 0:l[n])||"",v=(null==(o=e.req_base)?void 0:o[n])||"SHORT",h=null==(r=e.ref_type)?void 0:r[n],f=(null==(d=null==(s=e.req_attrs)?void 0:s[n])?void 0:d.includes(":MULTI:"))||!1,m=!!(null==(u=e.arr_type)?void 0:u[n]),b={headerId:`req_${n}`,value:p,type:yt(v)},y=`ref_${n}`,g=null==(c=i[t.id])?void 0:c[y];if(h&&g){const e=g.split(":",2);if(2===e.length){const t=parseInt(e[0]),n=e[1].split(",").map(e=>parseInt(e)).filter(e=>!isNaN(e));if(f){const e=p?p.split(",").map(e=>e.trim()):[];b.dirValues=n.map((t,n)=>({dirRowId:t,displayValue:e[n]||null})),b.dirTableId=t}else b.dirRowId=n[0]||null,b.dirTableId=t}}else h&&!g&&(f?b.dirValues=[]:b.dirRowId=null);m&&(b.nested=!0,b.nestedTableId=parseInt(n),b.nestedLink=t.id),a.push(b)}),{id:t.id,values:a}});Te.value=t?o:[...Te.value,...o]}(l,1===e),Ke.value=(l.object||[]).length>=Be.value,Re.value=e,1===e&&0===Xe.value)try{const e=await _e.getObjectCount(p.value);Xe.value=e.count||0}catch(t){}1===e&&((!0===ze.value.autoLoadAll||"true"===ze.value.autoLoadAll)&&setTimeout(()=>{!async function(){if(!1!==ze.value.autoLoadAll&&"false"!==ze.value.autoLoadAll&&!We.value)try{const e=await _e.getObjectCount(p.value);if(Xe.value=e.count||0,Xe.value<=Be.value)return Je.value=!0,void(je.value=[...Te.value]);if(Xe.value>ze.value.maxAutoLoadSize)return void v.add({severity:"warn",summary:"Большая таблица",detail:`Таблица содержит ${Xe.value.toLocaleString()} записей. Автозагрузка отключена (лимит: ${ze.value.maxAutoLoadSize.toLocaleString()}). Фильтрация работает только на текущей странице (${Be.value} записей).`,life:8e3});We.value=!0,Qe.value=!1;const t=[...Te.value];Ze.value=Te.value.length;const n=ze.value.backgroundChunkSize,a=Te.value.length,l=Xe.value-a,i=Math.ceil(l/n),o=2;for(let r=0;r<i;r++){const e=o+r;if(Qe.value)break;const a={pg:e,LIMIT:n};d.parentId&&(a.F_U=d.parentId),d.filterId&&(a.F_I=d.filterId);const l=await _e.getObjectList(p.value,a),s=l.object||[],u=l.reqs||{};s.forEach(e=>{const n=Me.value.map(t=>{var n;if("val"===t.id)return{headerId:t.id,value:e.val,type:t.type,columnType:t.columnType};{const a=t.termId,l=null==(n=u[e.id])?void 0:n[a],i={headerId:t.id,value:l||"",type:t.type,refType:t.refType,columnType:t.columnType,isMulti:t.isMulti};return(t.nested||"nested"===t.columnType)&&(i.nested=!0,i.nestedTableId=t.nestedTableId,i.nestedLink=e.id),i}});t.push({id:e.id,values:n})}),Ze.value=t.length,Ge.value=Math.round((r+1)/i*100),r<i-1&&await new Promise(e=>setTimeout(e,ze.value.backgroundDelay))}Qe.value||(je.value=t,Je.value=!0,v.add({severity:"success",summary:"Загрузка завершена",detail:`Загружено ${je.value.length} записей. Фильтрация работает по всем данным.`,life:3e3}))}catch(t){v.add({severity:"error",summary:"Ошибка фоновой загрузки",detail:t.message,life:5e3})}finally{We.value=!1}}()},500),(!0===ze.value.autoLoadDirs||"true"===ze.value.autoLoadDirs)&&setTimeout(()=>{ae(!0)},1e3))}catch(t){w.value=t.message,v.add({severity:"error",summary:"Ошибка",detail:"Не удалось загрузить данные: "+t.message,life:5e3})}finally{y.value=!1,g.value=!1}else c.replace("/integram/login")}function ft(){Qe.value=!0,We.value=!1,v.add({severity:"info",summary:"Загрузка отменена",detail:`Сохранено ${Ze.value} записей из ${Xe.value}`,life:3e3})}const mt={classic:"Классический",relative:"Относительный",chip:"Чип",smart:"Умный"};function bt(e){ze.value.dateStyle=e,Ne({...ze.value}),v.add({severity:"info",summary:"Стиль дат изменён",detail:mt[e]||e,life:2e3})}function yt(e){return{HTML:2,SHORT:3,DATETIME:4,GRANT:5,PWD:6,BUTTON:7,CHARS:8,LONG:8,DATE:9,TIME:9,FILE:10,BOOLEAN:11,BOOL:11,MEMO:12,NUMBER:13,SIGNED:14,CALCULATABLE:15,CALC:15,REPORT_COLUMN:16,REP_COL:16,PATH:17}[e]||3}function gt(e){return function(e){switch(e){case 4:case 9:return St;case 11:return re;case 13:case 14:return Ve;case 2:case 12:return Ue;default:return h}}(yt(e))}function wt(){M.value="double-click"===M.value?"single-click":"double-click",v.add({severity:"info",summary:"single-click"===M.value?"Режим редактирования включен":"Режим редактирования выключен",detail:"single-click"===M.value?"Кликните на ячейку для редактирования":"Двойной клик для редактирования",life:2e3})}function kt(e){const t={};be.value.forEach(n=>{t[n.id]=e}),ke.value=t}function It(){Me.value=be.value.filter(e=>!1!==ke.value[e.id]),V.value=!1,v.add({severity:"success",summary:"Колонки обновлены",life:2e3})}function xt(){he&&clearTimeout(he),he=setTimeout(()=>{ue.value=de.value,function(){if(!de.value.trim())return fe.value=[],void(me.value=-1);const e=[],t=de.value.toLowerCase();rt.value.forEach(n=>{Me.value.forEach(a=>{var l,i;String((null==(l=n.cells[a.id])?void 0:l.value)||"").toLowerCase().includes(t)&&e.push({rowId:n.id,headerId:a.id,value:null==(i=n.cells[a.id])?void 0:i.value})})}),fe.value=e,me.value=e.length>0?0:-1}()},300)}function Ct(){0!==fe.value.length&&(me.value=(me.value+1)%fe.value.length,Mt())}function Dt(){0!==fe.value.length&&(me.value=me.value<=0?fe.value.length-1:me.value-1,Mt())}function Mt(){if(me.value<0||!$.value)return;const e=fe.value[me.value];e&&$.value.scrollToCell&&$.value.scrollToCell(e.headerId,e.rowId)}function Tt(e){"F3"===e.key&&(e.preventDefault(),e.shiftKey?Dt():Ct())}function Vt(){0===pe.value.length&&$t(),ce.value=!0,xe(()=>{var e,t;null==(t=null==(e=ve.value)?void 0:e.$el)||t.focus()})}function $t(){const e=dt.value[0];pe.value.push({headerId:(null==e?void 0:e.id)||null,type:(null==e?void 0:e.type)||3,operator:vt((null==e?void 0:e.type)||3),value:null,value2:null})}async function Ot(){ce.value=!1,(!1===ze.value.autoLoadAll||"false"===ze.value.autoLoadAll)&&(Re.value=1,await ht()),v.add({severity:"success",summary:"Фильтр применён",life:2e3})}async function Et(){pe.value=[],$t(),Re.value=1,await ht()}function Lt(){ce.value=!1}function Ft(){var e,t;const n=document.querySelector(".coda-style-datatable");if(!n)return void v.add({severity:"warn",summary:"Таблица не найдена",life:3e3});const a=window.open("","_blank");a.document.write(`\n    <html>\n      <head>\n        <title>Печать таблицы - ${(null==(e=Ie.value)?void 0:e.val)||"Таблица"}</title>\n        <style>\n          body { margin: 20px; font-family: Arial, sans-serif; }\n          table { border-collapse: collapse; width: 100%; }\n          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }\n          th { background-color: #f2f2f2; font-weight: bold; }\n          .table-title { font-size: 1.5rem; margin-bottom: 15px; text-align: center; }\n          @media print {\n            body { -webkit-print-color-adjust: exact; }\n          }\n        </style>\n      </head>\n      <body>\n        <div class="table-title">${(null==(t=Ie.value)?void 0:t.val)||"Таблица"}</div>\n        ${n.innerHTML}\n      </body>\n    </html>\n  `),a.document.close(),a.focus(),setTimeout(()=>{a.print(),a.close()},500)}async function Pt(){var t;const n=document.querySelector(".coda-style-datatable");if(n)try{v.add({severity:"info",summary:"Загрузка библиотек...",life:1500}),o||(o=(await e(async()=>{const{default:e}=await import("./html2canvas.esm-DVPEA5ss.js");return{default:e}},[])).default),r||(r=(await e(async()=>{const{default:e}=await import("./jspdf.es.min-_anAD1HF.js").then(e=>e.j);return{default:e}},__vite__mapDeps([2,0,1]))).default),v.add({severity:"info",summary:"Создание PDF...",life:2e3});const a=await o(n,{scale:2,useCORS:!0,logging:!1,backgroundColor:"#ffffff"}),l=new r("landscape","mm","a4"),i=a.toDataURL("image/png"),s=280,d=a.height*s/a.width,u=(null==(t=Ie.value)?void 0:t.val)||"Таблица";l.setFontSize(16),l.text(u,10,15),l.addImage(i,"PNG",10,20,s,d),l.save(`${u.replace(/\s+/g,"_")}.pdf`),v.add({severity:"success",summary:"PDF создан",life:3e3})}catch(a){v.add({severity:"error",summary:"Ошибка экспорта",detail:"Не удалось создать PDF файл",life:5e3})}else v.add({severity:"warn",summary:"Таблица не найдена",life:3e3})}async function At(){var t,n;if(rt.value.length)try{s||(v.add({severity:"info",summary:"Загрузка библиотеки...",life:1500}),s=await e(()=>import("./xlsx-CZTGXfmz.js"),[]));const a=[],l=Me.value.map(e=>e.value);a.push(l),rt.value.forEach(e=>{const t=[];Me.value.forEach(n=>{const a=e.values.find(e=>e.headerId===n.id);t.push(a&&a.value||"")}),a.push(t)});const i=s.utils.aoa_to_sheet(a),o=s.utils.book_new(),r=((null==(t=Ie.value)?void 0:t.val)||"Таблица").substring(0,31);s.utils.book_append_sheet(o,i,r);const d=`${((null==(n=Ie.value)?void 0:n.val)||"Таблица").replace(/\s+/g,"_")}.xlsx`;s.writeFile(o,d),v.add({severity:"success",summary:"Excel создан",life:3e3})}catch(a){v.add({severity:"error",summary:"Ошибка экспорта",detail:"Не удалось создать Excel файл",life:5e3})}else v.add({severity:"warn",summary:"Нет данных",detail:"Нет данных для экспорта",life:3e3})}async function _t(e){const{rowId:t,headerId:n,value:a,dirRowId:l}=e;try{if("val"===n)await _e.saveObject(t,p.value,a,{});else{const e=n.replace("req_",""),i={},o=Me.value.find(e=>e.id===n);(null==o?void 0:o.dirTableId)&&null!=l?i[e]=String(l):i[e]=a,await _e.setObjectRequisites(t,i)}const e=Te.value.findIndex(e=>e.id===t);if(-1!==e){const t=Te.value[e].values.find(e=>e.headerId===n);t&&(t.value=a,void 0!==l&&(t.dirRowId=l))}v.add({severity:"success",summary:"Сохранено",detail:"Изменения сохранены",life:2e3})}catch(i){v.add({severity:"error",summary:"Ошибка",detail:"Не удалось сохранить: "+i.message,life:5e3})}}async function Rt(e){const{id:t,headers:n}=e;try{const e={};let a=null;n.forEach(t=>{if("val"===t.headerId)a=t.value;else{const n=t.headerId.replace("req_",""),a=Me.value.find(e=>e.id===t.headerId);(null==a?void 0:a.dirTableId)&&!a.isMulti?e[n]=t.dirRowId?String(t.dirRowId):"":(null==a?void 0:a.dirTableId)&&a.isMulti&&t.dirValues?e[n]=t.dirValues.map(e=>e.dirRowId).join(","):e[n]=t.value}}),null!==a?await _e.saveObject(t,p.value,a,e):await _e.setObjectRequisites(t,e);const l=Te.value.findIndex(e=>e.id===t);-1!==l&&n.forEach(e=>{const t=Te.value[l].values.find(t=>t.headerId===e.headerId);t&&(t.value=e.value,void 0!==e.dirRowId&&(t.dirRowId=e.dirRowId),void 0!==e.dirValues&&(t.dirValues=e.dirValues))}),v.add({severity:"success",summary:"Сохранено",detail:"Строка обновлена",life:2e3})}catch(a){v.add({severity:"error",summary:"Ошибка",detail:"Не удалось обновить строку: "+a.message,life:5e3})}}async function Bt(e){const{rowId:t,headerId:n,dirTableId:a,dirValues:l}=e;try{const e=n.replace("req_",""),a=Te.value.findIndex(e=>e.id===t),i=-1!==a?Te.value[a].values.find(e=>e.headerId===n):null,o=(null==i?void 0:i.dirValues)||[],r=new Set(o.map(e=>e.dirRowId)),s=new Set(l.map(e=>e.dirRowId)),d=l.filter(e=>!r.has(e.dirRowId)),u=o.filter(e=>!s.has(e.dirRowId));for(const n of d)await _e.addMultiselectItem(t,e,n.dirRowId);for(const t of u)t.msId&&await _e.removeMultiselectItem(t.msId);i&&(i.dirValues=l),v.add({severity:"success",summary:"Сохранено",detail:"Значения обновлены",life:2e3})}catch(i){v.add({severity:"error",summary:"Ошибка",detail:"Не удалось обновить: "+i.message,life:5e3})}}async function Ut(e){const{dirTableId:t,callback:n}=e;try{n(((await _e.getObjectList(t,{LIMIT:500})).object||[]).map(e=>({id:parseInt(e.id)||e.id,value:e.val})))}catch(a){n([])}}async function Kt(e){var t,n,a,l;const{dirTableId:i,dirRowId:o,callback:r}=e;try{const[e,s]=await Promise.all([_e.getObjectEditData(o),i?_e.getObjectList(i,{LIMIT:1}):null]);if(e&&e.obj){const i=[],d=[],u=e.obj.type_name||(null==(t=e.type)?void 0:t.val)||(null==(n=null==s?void 0:s.type)?void 0:n.val)||"Значение";i.push({id:"val",value:u}),d.push({headerId:"val",value:e.obj.val||""});const c=e=>e?"object"==typeof e?e.value??e.val??"":e:"",p=[],v=(null==s?void 0:s.arr_type)||e.arr_type,h=(null==s?void 0:s.req_type)||e.req_type;v&&Object.keys(v).forEach(e=>{v[e]&&p.push({typeId:parseInt(e),alias:(null==h?void 0:h[e])||`Таблица ${e}`})});const f=[],m=(null==s?void 0:s.req_order)||e.req_order||[];for(const t of m)if(null==v?void 0:v[t])f.push({itemType:"subordinate",typeId:parseInt(t),alias:(null==h?void 0:h[t])||"",objects:[],count:0});else{const n=c(null==(a=e.reqs)?void 0:a[t]);(n||0===n)&&f.push({itemType:"value",headerId:t,alias:(null==h?void 0:h[t])||"",value:n,type:(null==(l=e.req_base_id)?void 0:l[t])||null})}const b=f.filter(e=>"subordinate"===e.itemType);if(b.length>0){const e=b.map(async e=>{try{const t=await _e.getObjectList(e.typeId,{F_U:o,LIMIT:5});e.objects=((null==t?void 0:t.object)||[]).slice(0,5).map(e=>({id:e.id,val:e.val})),e.count=(null==t?void 0:t.count)||e.objects.length}catch(t){}});await Promise.all(e)}r({headers:i,rows:[{id:e.obj.id,val:e.obj.val,items:f}]})}else r(null)}catch(s){r(null)}}async function Ht(e){const{nestedTableId:t,parentRowId:n,tableName:a,callback:l}=e;if(t&&n)try{const e=await _e.getObjectList(t,{F_U:n,LIMIT:6}),i=((null==e?void 0:e.object)||[]).slice(0,5).map(e=>({id:e.id,val:e.val,value:e.val}));l({items:i,totalCount:(null==e?void 0:e.count)||i.length,tableName:a})}catch(i){l({items:[],totalCount:0})}else l({items:[],totalCount:0})}function Nt(){!g.value&&Ke.value&&ht(Re.value+1)}function zt(e){var t;const{tableId:n,parentRowId:a,tableName:l}=e,i=(null==(t=null==n?void 0:n.replace)?void 0:t.call(n,"req_",""))||n;a&&i&&(le.value={visible:!0,tableId:i,parentRowId:a,tableName:l||"Подчинённая таблица",loading:!1})}function jt(e){const{typeId:t,typeName:n,dirRowId:a}=e;t&&(ie.value={visible:!0,typeId:t,typeName:n||"Справочник",dirRowId:a||null})}async function qt(){if(le.value.tableId&&le.value.parentRowId)try{le.value.loading=!0,await _e.createObject(le.value.tableId,"Новая запись",{},le.value.parentRowId),v.add({severity:"success",summary:"Создано",detail:"Запись добавлена",life:2e3});const e=le.value.tableId,t=le.value.parentRowId;le.value.tableId=null,await xe(),le.value.tableId=e,le.value.parentRowId=t}catch(e){v.add({severity:"error",summary:"Ошибка",detail:"Не удалось создать запись: "+e.message,life:5e3})}finally{le.value.loading=!1}}function Yt(){T.value=!0}function Wt(){D.value="",S.value=3,C.value=!0}async function Gt(){if(D.value.trim())try{x.value=!0;const e=(await _e.addRequisite(p.value,S.value)).id;await _e.saveRequisiteAlias(e,D.value.trim()),v.add({severity:"success",summary:"Успешно",detail:`Колонка "${D.value}" добавлена!`,life:3e3}),C.value=!1,D.value="",await ht()}catch(e){v.add({severity:"error",summary:"Ошибка",detail:"Не удалось создать колонку: "+e.message,life:5e3})}finally{x.value=!1}else v.add({severity:"warn",summary:"Внимание",detail:"Введите название колонки",life:3e3})}const Zt=[{value:3,label:"Текст (короткий)"},{value:2,label:"Текст (длинный)"},{value:13,label:"Число"},{value:4,label:"Дата и время"},{value:9,label:"Дата"},{value:7,label:"Логический (Да/Нет)"}];async function Xt(){if(et.value.value)try{k.value=!0,I.value=!0;const e={};Object.entries(et.value.requisites).forEach(([t,n])=>{if(null!=n&&""!==n){const a=De.value.find(e=>e.id===t);a&&("BOOLEAN"===a.base||"BOOL"===a.base?e[t]=n?"X":"":("DATE"===a.base||"DATETIME"===a.base)&&n instanceof Date?e[t]="DATE"===a.base?n.toISOString().split("T")[0]:n.toISOString():e[t]=n)}});const t=u.query.F_U||null;await _e.createObject(p.value,et.value.value,e,t),v.add({severity:"success",summary:"Успешно",detail:"Запись создана!",life:3e3}),T.value=!1,et.value={value:"",requisites:{}},await ht()}catch(e){v.add({severity:"error",summary:"Ошибка",detail:"Не удалось создать запись: "+e.message,life:5e3})}finally{k.value=!1,I.value=!1}}function Jt(e){f.require({message:`Вы уверены, что хотите удалить запись #${e}?`,header:"Подтверждение удаления",icon:"pi pi-exclamation-triangle",acceptClass:"p-button-danger",accept:async()=>{try{await _e.deleteObject(e),Te.value=Te.value.filter(t=>t.id!==e),v.add({severity:"success",summary:"Удалено",detail:"Запись удалена",life:2e3})}catch(t){v.add({severity:"error",summary:"Ошибка",detail:"Не удалось удалить: "+t.message,life:5e3})}}})}async function Qt(e){try{await _e.moveObjectUp(e),v.add({severity:"success",summary:"Перемещено",detail:"Объект перемещён вверх",life:2e3}),await ht(1)}catch(t){v.add({severity:"error",summary:"Ошибка",detail:"Не удалось переместить: "+t.message,life:5e3})}}async function en({rowId:e,newParentId:t}){try{await _e.moveObjectToParent(e,t);const n=1===t?"Запись теперь независимая":`Запись переподчинена (ID родителя: ${t})`;v.add({severity:"success",summary:"Подчинённость изменена",detail:n,life:3e3}),await ht(1)}catch(n){v.add({severity:"error",summary:"Ошибка",detail:"Не удалось изменить подчинённость: "+n.message,life:5e3})}}async function tn({headerId:e,termId:t,action:n,label:a,params:l}){try{const i=a||"Кнопка";let o=`:ALIAS=${i}`;if(n.endpoint?o+=`:${n.endpoint}`:n.id&&(o+=`:${n.id}`),l)for(const[e,t]of Object.entries(l))t&&""!==t&&(o+=`:${e}=${t}`);o+=":",await _e.saveRequisiteAttributes(t,o);const r=Me.value.findIndex(t=>t.id===e);-1!==r&&(Me.value[r].attrs=o),v.add({severity:"success",summary:"Кнопка настроена",detail:`"${i}" → ${n.label}`,life:3e3})}catch(i){v.add({severity:"error",summary:"Ошибка",detail:"Не удалось сохранить настройки кнопки: "+i.message,life:5e3})}}async function nn({rowId:e,headerId:t,endpoint:n,params:a,actionType:l,refreshAction:i}){try{if("custom-url"===l){let e=n;if(a&&Object.keys(a).length>0){const t=new URLSearchParams(a).toString();e+=(e.includes("?")?"&":"?")+t}return void window.open(e,"_blank","noopener,noreferrer")}if("api-macro"===l){const t=new URLSearchParams;if(a)for(const[e,n]of Object.entries(a))n&&""!==n&&t.append(e,n);if(await _e.post(n,t),v.add({severity:"success",summary:"Действие выполнено",detail:`Запрос успешно выполнен: ${n}`,life:3e3}),"delete-row"===i){const t=Te.value.findIndex(t=>t.id===e);-1!==t&&Te.value.splice(t,1)}else if("reload-table"===i)await ht(page.value);else if("reload-cell"===i){const t=await _e.getObjectEditData(e);(null==t?void 0:t.obj)&&-1!==Te.value.findIndex(t=>t.id===e)&&await ht(page.value)}}}catch(o){v.add({severity:"error",summary:"Ошибка действия",detail:"Не удалось выполнить действие: "+o.message,life:5e3})}}async function an({action:e,headerId:t,termId:n}){var a;if("delete"===e){const e=Me.value.find(e=>e.id===t);let i=n||(null==e?void 0:e.termId);if("val"===i||"val"===t)return void v.add({severity:"warn",summary:"Невозможно удалить",detail:"Главную колонку удалить нельзя",life:5e3});if("string"==typeof i&&"val"!==i&&(i=parseInt(i,10)),!i||isNaN(i))return void v.add({severity:"error",summary:"Ошибка",detail:"Не найден ID реквизита для удаления",life:5e3});try{const e=await _e.deleteRequisite(i,!0),n=Array.isArray(e)?null==(a=e[0])?void 0:a.error:(null==e?void 0:e.error)||(null==e?void 0:e.failed);if(n)throw new Error(n);const l=Me.value.findIndex(e=>e.id===t);if(-1!==l){const e=Me.value[l];Me.value.splice(l,1),v.add({severity:"success",summary:"Колонка удалена",detail:e.value||`Колонка #${i}`,life:3e3})}Te.value.forEach(e=>{if(e.values){const n=e.values.findIndex(e=>e.headerId===t);-1!==n&&e.values.splice(n,1)}})}catch(l){v.add({severity:"error",summary:"Ошибка удаления",detail:l.message||"Не удалось удалить колонку через API",life:5e3})}}}async function ln({rowId:e,headerId:t,termId:n,baseType:a,file:l,callback:i}){var o,r;try{v.add({severity:"info",summary:"Загрузка файла",detail:`Загружаем ${l.name}...`,life:2e3});const a=await _e.uploadRequisiteFile(e,n,l);let d=l.name;try{const t=await _e.getObjectEditData(e);if(null==(o=null==t?void 0:t.reqs)?void 0:o[n]){const e=t.reqs[n];d=e.value||e||l.name}}catch(s){}const u=Te.value.findIndex(t=>t.id===e);if(-1!==u){const e=Te.value[u],n=null==(r=e.values)?void 0:r.findIndex(e=>e.headerId===t);-1!==n&&void 0!==n?Te.value[u].values[n].value=d:e.values&&Te.value[u].values.push({headerId:t,value:d,type:10})}v.add({severity:"success",summary:"Файл загружен",detail:l.name,life:3e3}),i&&i({success:!0,filename:d,result:a})}catch(d){v.add({severity:"error",summary:"Ошибка загрузки",detail:d.message||"Не удалось загрузить файл",life:5e3}),i&&i({success:!1,error:d.message})}}const on=e=>{var t;"Escape"===e.key&&(null==(t=$.value)?void 0:t.isEditing)&&$.value.isEditing()&&($.value.cancelCellEdit(),e.stopPropagation(),e.preventDefault())};return Se(async()=>{document.addEventListener("keydown",on),document.addEventListener("keydown",Tt),m.value?await ht():c.replace("/integram/login")}),ge(p,async e=>{e&&(Re.value=1,Te.value=[],await ht())}),Fe(()=>{document.removeEventListener("keydown",on),document.removeEventListener("keydown",Tt),he&&(clearTimeout(he),he=null),ne&&(clearInterval(ne),ne=null)}),(e,o)=>{var r;const s=P("Badge"),d=P("Button"),u=P("InputIcon"),c=P("IconField"),p=P("ProgressSpinner"),f=P("Message"),m=P("Card"),b=P("ProgressBar"),ee=P("Dialog"),te=P("Dropdown"),ne=P("ConfirmDialog"),ue=P("IntegramDataTableWrapper",!0),he=A("tooltip");return a(),n("div",{class:H(["integram-datatable-wrapper",`row-density-${B.value}`])},[t.embedded?R("",!0):(a(),_(qe,{key:0,items:lt.value,database:nt.value},null,8,["items","database"])),U(m,null,{title:j(()=>{var e;return[l("div",Cl,[l("div",Sl,[l("span",Dl,Z((null==(e=Ie.value)?void 0:e.val)||"Таблица"),1),W(U(s,{value:Xe.value||rt.value.length,class:"records-badge"},null,8,["value"]),[[he,Xe.value?`Всего записей в таблице: ${Xe.value.toLocaleString()}`:"",void 0,{bottom:!0}]])]),l("div",Ml,[l("div",Tl,[W(U(d,{icon:"pi pi-refresh",size:"small",text:"",rounded:"",onClick:ht,loading:y.value},null,8,["loading"]),[[he,"Обновить",void 0,{bottom:!0}]]),W(U(d,{icon:"pi pi-pencil",size:"small",text:"",rounded:"",onClick:wt,class:H({"p-button-primary":"single-click"===M.value})},null,8,["class"]),[[he,"single-click"===M.value?"Режим редактирования":"Включить редактирование",void 0,{bottom:!0}]]),W(U(d,{icon:ut.value?"pi pi-filter-fill":"pi pi-filter",size:"small",text:"",rounded:"",onClick:Vt},null,8,["icon"]),[[he,"Фильтры",void 0,{bottom:!0}]]),W(U(d,{icon:"pi pi-check-square",size:"small",text:"",rounded:"",class:H({"p-button-primary":O.value}),onClick:E},null,8,["class"]),[[he,"Выделение строк",void 0,{bottom:!0}]]),W(U(d,{icon:"pi pi-calculator",size:"small",text:"",rounded:"",class:H({"p-button-primary":L.value}),onClick:F},null,8,["class"]),[[he,"Футер с агрегациями",void 0,{bottom:!0}]]),W(U(d,{icon:"pi pi-eye-slash",size:"small",text:"",rounded:"",onClick:o[0]||(o[0]=e=>V.value=!0)},null,512),[[he,"Колонки",void 0,{bottom:!0}]]),W(U(d,{icon:"pi pi-print",size:"small",text:"",rounded:"",onClick:Ft},null,512),[[he,"Печать",void 0,{bottom:!0}]]),W(U(d,{icon:"pi pi-file-excel",size:"small",text:"",rounded:"",onClick:At},null,512),[[he,"Excel",void 0,{bottom:!0}]]),W(U(d,{icon:"pi pi-file-pdf",size:"small",text:"",rounded:"",onClick:Pt},null,512),[[he,"PDF",void 0,{bottom:!0}]]),W(U(d,{icon:G(),size:"small",text:"",rounded:"",onClick:K},null,8,["icon"]),[[he,`Плотность строк: ${Q()}`,void 0,{bottom:!0}]]),W(U(d,{icon:"pi pi-cog",size:"small",text:"",rounded:"",onClick:o[1]||(o[1]=e=>se.value=!0)},null,512),[[he,"Настройки",void 0,{bottom:!0}]]),W(U(d,{icon:"pi pi-question-circle",size:"small",text:"",rounded:"",onClick:o[2]||(o[2]=e=>oe.value=!0)},null,512),[[he,"Справка",void 0,{bottom:!0}]]),o[31]||(o[31]=l("span",{class:"toolbar-separator"},null,-1)),W(U(d,{icon:"pi pi-plus",size:"small",text:"",rounded:"",onClick:Yt,loading:I.value},null,8,["loading"]),[[he,"Новая строка",void 0,{bottom:!0}]]),W(U(d,{icon:"pi pi-plus-circle",size:"small",text:"",rounded:"",onClick:Wt,loading:x.value},null,8,["loading"]),[[he,"Новая колонка",void 0,{bottom:!0}]])]),l("div",Vl,[U(c,{iconPosition:"left",class:"header-search"},{default:j(()=>[U(u,{class:"pi pi-search"}),U(we(h),{modelValue:de.value,"onUpdate:modelValue":o[3]||(o[3]=e=>de.value=e),placeholder:"Поиск...",onInput:xt},null,8,["modelValue"])]),_:1}),fe.value.length>0?(a(),n("div",$l,[l("span",Ol,Z(me.value+1)+" / "+Z(fe.value.length),1),W(U(d,{icon:"pi pi-chevron-up",size:"small",text:"",rounded:"",onClick:Dt},null,512),[[he,"Предыдущий (Shift+F3)",void 0,{bottom:!0}]]),W(U(d,{icon:"pi pi-chevron-down",size:"small",text:"",rounded:"",onClick:Ct},null,512),[[he,"Следующий (F3)",void 0,{bottom:!0}]])])):R("",!0)])])])]}),content:j(()=>[y.value?(a(),n("div",El,[U(p),o[32]||(o[32]=l("p",{class:"mt-2 text-color-secondary"},"Загрузка данных...",-1))])):w.value?(a(),n("div",Ll,[U(f,{severity:"error",closable:!1},{default:j(()=>[X(Z(w.value),1)]),_:1}),U(d,{label:"Повторить",icon:"pi pi-refresh",onClick:ht,class:"mt-3"})])):R("",!0),st.value?(a(),n("div",Fl,[U(f,{severity:"warn",closable:!1},{default:j(()=>[l("div",Pl,[l("span",null,[X(" Фильтрация работает только на загруженных "+Z(Te.value.length)+" записях. ",1),ze.value.autoLoadAll?R("",!0):(a(),n(z,{key:0},[X(" Включите автозагрузку в настройках для поиска по всем данным. ")],64))])])]),_:1})])):R("",!0),y.value||w.value?R("",!0):(a(),_(xl,{key:3,ref_key:"dataTableRef",ref:$,headers:Me.value,rows:rt.value,disableEditing:!1,disableTypeEditing:!1,editMode:M.value,isLoading:y.value,isLoadingMore:g.value,isAddingRow:I.value,isAddingColumn:x.value,allDataLoaded:Je.value,dateStyle:ze.value.dateStyle,serverUrl:at.value,autoLoadDirs:ze.value.autoLoadDirs,database:nt.value,onCellUpdate:_t,onRowUpdate:Rt,onCellMultiUpdate:Bt,onLoadDirectoryList:Ut,onLoadDirRow:Kt,onLoadNestedPreview:Ht,onLoadMore:Nt,onAddRow:Yt,onAddColumn:Wt,onRowDelete:Jt,onRowMoveUp:Qt,onOpenNested:zt,onRowChangeParent:en,onOpenDirectory:jt,onButtonActionChange:tn,onButtonClick:nn,onUploadFile:ln,onHeaderAction:an},null,8,["headers","rows","editMode","isLoading","isLoadingMore","isAddingRow","isAddingColumn","allDataLoaded","dateStyle","serverUrl","autoLoadDirs","database"]))]),_:1}),(a(),_(Pe,{to:"body"},[U(q,{name:"slide-up"},{default:j(()=>[We.value?(a(),n("div",Al,[l("div",_l,[l("div",Rl,[o[34]||(o[34]=l("i",{class:"pi pi-spin pi-spinner"},null,-1)),l("div",Bl,[l("div",Ul,[o[33]||(o[33]=l("span",{class:"font-medium"},"Загрузка всех данных",-1)),l("span",Kl,Z(Ze.value)+" / "+Z(Xe.value),1)]),U(b,{value:Ge.value,showValue:!1,style:{height:"6px"}},null,8,["value"])]),W(U(d,{icon:"pi pi-times",text:"",rounded:"",size:"small",severity:"secondary",onClick:ft},null,512),[[he,"Отменить",void 0,{left:!0}]])])])])):R("",!0)]),_:1})])),U(ee,{visible:T.value,"onUpdate:visible":o[6]||(o[6]=e=>T.value=e),modal:"",header:"Создать: "+((null==(r=Ie.value)?void 0:r.val)||"Запись"),style:{width:"40rem"},breakpoints:{"960px":"75vw","640px":"95vw"}},{footer:j(()=>[U(d,{label:"Отмена",text:"",onClick:o[5]||(o[5]=e=>T.value=!1)}),U(d,{label:"Создать",icon:"pi pi-check",loading:k.value,disabled:!et.value.value,onClick:Xt},null,8,["loading","disabled"])]),default:j(()=>[l("div",Hl,[l("div",Nl,[o[35]||(o[35]=l("label",{for:"newObjectValue",class:"font-bold"},"Значение *",-1)),U(we(h),{id:"newObjectValue",modelValue:et.value.value,"onUpdate:modelValue":o[4]||(o[4]=e=>et.value.value=e),placeholder:"Введите значение",class:"w-full",onKeydown:J(Xt,["enter"])},null,8,["modelValue"])]),(a(!0),n(z,null,Y(it.value,e=>{return a(),n("div",{key:e.id,class:"field"},[l("label",{for:"req_"+e.id},Z(e.alias),9,zl),e.refType?(a(),_(Ye,{key:0,modelValue:et.value.requisites[e.id],"onUpdate:modelValue":t=>et.value.requisites[e.id]=t,reqId:e.id,refTypeId:e.refType,database:nt.value,objectId:0,multi:e.isMulti,allowCreate:!0},null,8,["modelValue","onUpdate:modelValue","reqId","refTypeId","database","multi"])):(a(),_(N(gt(e.base)),i({key:1,id:"req_"+e.id,modelValue:et.value.requisites[e.id],"onUpdate:modelValue":t=>et.value.requisites[e.id]=t,placeholder:"Введите "+e.alias,class:"w-full"},{ref_for:!0},(t=e.base,function(e,t="edit"){const n="filter"===t?"dd.mm.yy":"yy-mm-dd";switch(e){case 4:return{dateFormat:n,showTime:!0,showSeconds:"filter"===t};case 9:return{dateFormat:n};case 11:return{binary:!0};case 2:case 12:return{rows:3};default:return{}}}(yt(t),"edit"))),null,16,["id","modelValue","onUpdate:modelValue","placeholder"]))]);var t}),128))])]),_:1},8,["visible","header"]),U(ee,{visible:C.value,"onUpdate:visible":o[10]||(o[10]=e=>C.value=e),modal:"",header:"Добавить колонку",style:{width:"28rem"},breakpoints:{"640px":"95vw"}},{footer:j(()=>[U(d,{label:"Отмена",text:"",onClick:o[9]||(o[9]=e=>C.value=!1)}),U(d,{label:"Добавить",icon:"pi pi-plus",loading:x.value,disabled:!D.value.trim(),onClick:Gt},null,8,["loading","disabled"])]),default:j(()=>[l("div",jl,[l("div",ql,[o[36]||(o[36]=l("label",{for:"newColumnAlias",class:"font-bold block mb-2"},"Название колонки *",-1)),U(we(h),{id:"newColumnAlias",modelValue:D.value,"onUpdate:modelValue":o[7]||(o[7]=e=>D.value=e),placeholder:"Например: Статус",class:"w-full",onKeydown:J(Gt,["enter"])},null,8,["modelValue"])]),l("div",Yl,[o[37]||(o[37]=l("label",{for:"newColumnType",class:"font-bold block mb-2"},"Тип данных",-1)),U(te,{id:"newColumnType",modelValue:S.value,"onUpdate:modelValue":o[8]||(o[8]=e=>S.value=e),options:Zt,optionLabel:"label",optionValue:"value",placeholder:"Выберите тип",class:"w-full"},null,8,["modelValue"])])])]),_:1},8,["visible"]),U(ne),U(ee,{visible:V.value,"onUpdate:visible":o[14]||(o[14]=e=>V.value=e),header:"Управление колонками",modal:!0,style:{width:"450px"},breakpoints:{"960px":"75vw","640px":"90vw"}},{footer:j(()=>[l("div",Xl,[U(d,{label:"Отменить",onClick:o[13]||(o[13]=e=>V.value=!1),text:"",size:"small"}),U(d,{label:"Применить",onClick:It,size:"small",icon:"pi pi-check"})])]),default:j(()=>[l("div",Wl,[U(d,{label:"Показать все",onClick:o[11]||(o[11]=e=>kt(!0)),size:"small",icon:"pi pi-eye",outlined:""}),U(d,{label:"Скрыть все",onClick:o[12]||(o[12]=e=>kt(!1)),size:"small",icon:"pi pi-eye-slash",outlined:"",severity:"secondary"})]),l("div",Gl,[(a(!0),n(z,null,Y(ot.value,e=>(a(),n("div",{key:e.id,class:"flex align-items-center p-2 surface-hover border-round"},[U(we(re),{modelValue:ke.value[e.id],"onUpdate:modelValue":t=>ke.value[e.id]=t,inputId:"col-"+e.id,binary:!0,class:"mr-3"},null,8,["modelValue","onUpdate:modelValue","inputId"]),l("label",{for:"col-"+e.id,class:H(["flex-grow-1 cursor-pointer",{"text-color-secondary":!ke.value[e.id]}])},Z(e.value),11,Zl)]))),128))])]),_:1},8,["visible"]),U(ee,{visible:ce.value,"onUpdate:visible":o[15]||(o[15]=e=>ce.value=e),header:"Фильтрация данных",modal:!0,style:{width:"600px"},breakpoints:{"960px":"90vw"}},{footer:j(()=>[l("div",bi,[U(d,{label:"Сбросить все",icon:"pi pi-filter-slash",onClick:Et,severity:"danger",text:"",size:"small"}),l("div",yi,[U(d,{label:"Отмена",onClick:Lt,text:""}),U(d,{ref_key:"filterApplyButton",ref:ve,label:"Применить",icon:"pi pi-check",onClick:Ot},null,512)])])]),default:j(()=>[0===pe.value.length?(a(),n("div",Jl,[o[38]||(o[38]=l("i",{class:"pi pi-filter",style:{"font-size":"2rem",color:"var(--text-color-secondary)"}},null,-1)),o[39]||(o[39]=l("p",{class:"mt-3 mb-3 text-color-secondary"},"Условия фильтрации не заданы",-1)),U(d,{label:"Добавить условие",icon:"pi pi-plus",outlined:"",onClick:$t})])):(a(),n("div",Ql,[(a(!0),n(z,null,Y(pe.value,(e,t)=>{return a(),n("div",{key:t,class:"filter-condition-item"},[l("div",ei,[l("h4",ti,"Условие "+Z(t+1),1),W(U(d,{icon:"pi pi-trash",text:"",rounded:"",severity:"danger",size:"small",onClick:e=>async function(e){pe.value.splice(e,1),Re.value=1,await ht(),0===pe.value.length&&(ce.value=!1)}(t)},null,8,["onClick"]),[[he,"Удалить условие",void 0,{left:!0}]])]),l("div",ni,[l("div",ai,[l("label",{for:`column-${t}`},"Столбец",8,li),U(te,{id:`column-${t}`,modelValue:e.headerId,"onUpdate:modelValue":t=>e.headerId=t,options:dt.value,optionLabel:"value",optionValue:"id",placeholder:"Выберите столбец",class:"w-full",onChange:e=>function(e){const t=dt.value.find(t=>t.id===pe.value[e].headerId);t&&(pe.value[e].type=t.type,pe.value[e].operator=vt(t.type),pe.value[e].value=null,pe.value[e].value2=null)}(t)},null,8,["id","modelValue","onUpdate:modelValue","options","onChange"])]),l("div",ii,[l("label",{for:`operator-${t}`},"Оператор",8,oi),U(te,{id:`operator-${t}`,modelValue:e.operator,"onUpdate:modelValue":t=>e.operator=t,options:(o=e.type,ct[pt(o)]),optionLabel:"label",optionValue:"value",placeholder:"Выберите оператор",class:"w-full"},null,8,["id","modelValue","onUpdate:modelValue","options"])]),"isEmpty"!==e.operator?(a(),n(z,{key:0},[(i=e.operator,"between"!==i?(a(),n("div",ri,[l("label",{for:`value-${t}`},"Значение",8,si),[3,8,12].includes(e.type)?(a(),_(we(h),{key:0,id:`value-${t}`,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,class:"w-full",placeholder:"Введите значение..."},null,8,["id","modelValue","onUpdate:modelValue"])):[13,14].includes(e.type)?(a(),_(we(Ve),{key:1,id:`value-${t}`,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,class:"w-full",placeholder:"Введите число..."},null,8,["id","modelValue","onUpdate:modelValue"])):[4,9].includes(e.type)?(a(),_(we(St),{key:2,id:`value-${t}`,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,class:"w-full",showIcon:!0,dateFormat:"dd.mm.yy",showTime:4===e.type},null,8,["id","modelValue","onUpdate:modelValue","showTime"])):[2,12].includes(e.type)?(a(),_(we(Ue),{key:3,id:`value-${t}`,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,class:"w-full",rows:3},null,8,["id","modelValue","onUpdate:modelValue"])):(a(),_(we(h),{key:4,id:`value-${t}`,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,class:"w-full",placeholder:"Введите значение..."},null,8,["id","modelValue","onUpdate:modelValue"]))])):(a(),n("div",di,[l("div",ui,[l("div",ci,[l("label",{for:`value-from-${t}`},"От",8,pi),[3,8,12].includes(e.type)?(a(),_(we(h),{key:0,id:`value-from-${t}`,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,class:"w-full"},null,8,["id","modelValue","onUpdate:modelValue"])):[13,14].includes(e.type)?(a(),_(we(Ve),{key:1,id:`value-from-${t}`,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,class:"w-full"},null,8,["id","modelValue","onUpdate:modelValue"])):[4,9].includes(e.type)?(a(),_(we(St),{key:2,id:`value-from-${t}`,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,showIcon:!0,dateFormat:"dd.mm.yy",showTime:4===e.type},null,8,["id","modelValue","onUpdate:modelValue","showTime"])):R("",!0)])]),l("div",vi,[l("div",hi,[l("label",{for:`value-to-${t}`},"До",8,fi),[3,8,12].includes(e.type)?(a(),_(we(h),{key:0,id:`value-to-${t}`,modelValue:e.value2,"onUpdate:modelValue":t=>e.value2=t,class:"w-full"},null,8,["id","modelValue","onUpdate:modelValue"])):[13,14].includes(e.type)?(a(),_(we(Ve),{key:1,id:`value-to-${t}`,modelValue:e.value2,"onUpdate:modelValue":t=>e.value2=t,class:"w-full"},null,8,["id","modelValue","onUpdate:modelValue"])):[4,9].includes(e.type)?(a(),_(we(St),{key:2,id:`value-to-${t}`,modelValue:e.value2,"onUpdate:modelValue":t=>e.value2=t,showIcon:!0,dateFormat:"dd.mm.yy",showTime:4===e.type},null,8,["id","modelValue","onUpdate:modelValue","showTime"])):R("",!0)])])])))],64)):R("",!0)])]);var i,o}),128)),l("div",mi,[U(d,{label:"Добавить условие",icon:"pi pi-plus",text:"",class:"w-full",onClick:$t})])]))]),_:1},8,["visible"]),U(ee,{visible:le.value.visible,"onUpdate:visible":o[17]||(o[17]=e=>le.value.visible=e),header:le.value.tableName||"Подчинённая таблица",modal:!0,style:{width:"80vw",maxWidth:"1200px"},breakpoints:{"1200px":"90vw","640px":"98vw"},maximizable:!0,class:"nested-table-dialog"},{footer:j(()=>[l("div",ki,[U(d,{label:"Добавить запись",icon:"pi pi-plus",onClick:qt,outlined:""}),U(d,{label:"Закрыть",onClick:o[16]||(o[16]=e=>le.value.visible=!1)})])]),default:j(()=>[le.value.loading?(a(),n("div",gi,[U(p),o[40]||(o[40]=l("p",{class:"mt-2 text-color-secondary"},"Загрузка...",-1))])):le.value.tableId?(a(),n("div",wi,[(a(),_(ue,{key:le.value.tableId+"-"+le.value.parentRowId,typeId:le.value.tableId,database:nt.value,parentId:le.value.parentRowId,embedded:!0},null,8,["typeId","database","parentId"]))])):R("",!0)]),_:1},8,["visible","header"]),U(ee,{visible:ie.value.visible,"onUpdate:visible":o[19]||(o[19]=e=>ie.value.visible=e),header:ie.value.typeName||"Справочник",modal:!0,style:{width:"80vw",maxWidth:"1200px"},breakpoints:{"1200px":"90vw","640px":"98vw"},maximizable:!0,class:"directory-table-dialog"},{footer:j(()=>[U(d,{label:"Закрыть",onClick:o[18]||(o[18]=e=>ie.value.visible=!1)})]),default:j(()=>[ie.value.typeId?(a(),n("div",Ii,[(a(),_(ue,{key:"dir-"+ie.value.typeId+"-"+ie.value.dirRowId,typeId:ie.value.typeId,database:nt.value,filterId:ie.value.dirRowId,embedded:!0},null,8,["typeId","database","filterId"]))])):R("",!0)]),_:1},8,["visible","header"]),U(ee,{visible:oe.value,"onUpdate:visible":o[21]||(o[21]=e=>oe.value=e),header:"Справка по таблице",modal:!0,style:{width:"800px",maxHeight:"90vh"},breakpoints:{"960px":"95vw"},class:"help-dialog"},{footer:j(()=>[U(d,{label:"Понятно",icon:"pi pi-check",onClick:o[20]||(o[20]=e=>oe.value=!1)})]),default:j(()=>[o[41]||(o[41]=l("div",{class:"help-content"},[l("div",{class:"help-section"},[l("div",{class:"help-section-header"},[l("i",{class:"pi pi-info-circle"}),l("h3",null,"Обзор")]),l("div",{class:"help-info-block"},[l("p",null,"Интерактивная таблица данных с поддержкой редактирования, фильтрации, сортировки и работы со связанными данными (справочниками и подчинёнными таблицами).")])]),l("div",{class:"help-section"},[l("div",{class:"help-section-header"},[l("i",{class:"pi pi-arrows-alt"}),l("h3",null,"Навигация и выделение")]),l("div",{class:"help-grid"},[l("div",{class:"help-card"},[l("div",{class:"help-card-icon"},"🖱️"),l("div",{class:"help-card-title"},"Клик по ячейке"),l("div",{class:"help-card-desc"},"Выделяет ячейку. Для справочников и подчинённых таблиц — открывает их в модальном окне.")]),l("div",{class:"help-card"},[l("div",{class:"help-card-icon"},"👆👆"),l("div",{class:"help-card-title"},"Двойной клик"),l("div",{class:"help-card-desc"},"Входит в режим редактирования ячейки (если включён режим двойного клика).")]),l("div",{class:"help-card"},[l("div",{class:"help-card-icon"},"🔲"),l("div",{class:"help-card-title"},"Выделение диапазона"),l("div",{class:"help-card-desc"},"Зажмите мышь и проведите по ячейкам для выделения. Внизу появится статус-бар с агрегациями (сумма, среднее, мин/макс).")])])]),l("div",{class:"help-section"},[l("div",{class:"help-section-header"},[l("i",{class:"pi pi-eye"}),l("h3",null,"Предварительный просмотр")]),l("div",{class:"help-info-block"},[l("h4",null,"Наведение на справочник"),l("p",null,"При наведении курсора на значение справочника (ссылку) появляется всплывающее окно с детальной информацией о записи: все поля, включая подчинённые таблицы (показывается количество).")]),l("div",{class:"help-info-block mt-3"},[l("h4",null,"Клик по справочнику"),l("p",null,"Открывает справочник в модальном окне с фильтрацией по конкретной записи.")])]),l("div",{class:"help-section"},[l("div",{class:"help-section-header"},[l("i",{class:"pi pi-pencil"}),l("h3",null,"Редактирование")]),l("div",{class:"help-grid"},[l("div",{class:"help-card"},[l("div",{class:"help-card-icon"},"✏️"),l("div",{class:"help-card-title"},"Режим редактирования"),l("div",{class:"help-card-desc"},[X("Нажмите кнопку "),l("i",{class:"pi pi-pencil"}),X(" в тулбаре для переключения между режимами: одинарный клик / двойной клик.")])]),l("div",{class:"help-card"},[l("div",{class:"help-card-icon"},"💾"),l("div",{class:"help-card-title"},"Сохранение"),l("div",{class:"help-card-desc"},[l("kbd",null,"Enter"),X(" — сохранить изменения."),l("br"),l("kbd",null,"Esc"),X(" — отменить редактирование.")])]),l("div",{class:"help-card"},[l("div",{class:"help-card-icon"},"🟢"),l("div",{class:"help-card-title"},"Индикатор изменений"),l("div",{class:"help-card-desc"},"Зелёный треугольник в углу ячейки означает, что она была изменена в текущей сессии.")])])]),l("div",{class:"help-section"},[l("div",{class:"help-section-header"},[l("i",{class:"pi pi-arrows-v"}),l("h3",null,"Автозаполнение (протяжка)")]),l("div",{class:"help-info-block"},[l("p",null,"При выделении ячейки в правом нижнем углу появляется маркер заполнения (маленький квадрат). Потяните его вниз или вправо для автозаполнения:"),l("ul",{class:"help-list"},[l("li",null,[l("strong",null,"Числовые последовательности:"),X(" 1, 2, 3 → 4, 5, 6...")]),l("li",null,[l("strong",null,"Дни недели:"),X(" Понедельник, Вторник → Среда, Четверг...")]),l("li",null,[l("strong",null,"Месяцы:"),X(" Январь, Февраль → Март, Апрель...")]),l("li",null,[l("strong",null,"Копирование:"),X(" одиночное значение копируется во все ячейки")])])])]),l("div",{class:"help-section"},[l("div",{class:"help-section-header"},[l("i",{class:"pi pi-bars"}),l("h3",null,"Панель инструментов")]),l("div",{class:"help-toolbar-grid"},[l("div",{class:"help-toolbar-item"},[l("i",{class:"pi pi-refresh"}),l("span",null,"Обновить данные")]),l("div",{class:"help-toolbar-item"},[l("i",{class:"pi pi-pencil"}),l("span",null,"Режим редактирования")]),l("div",{class:"help-toolbar-item"},[l("i",{class:"pi pi-filter"}),l("span",null,"Фильтры")]),l("div",{class:"help-toolbar-item"},[l("i",{class:"pi pi-check-square"}),l("span",null,"Режим выделения строк")]),l("div",{class:"help-toolbar-item"},[l("i",{class:"pi pi-calculator"}),l("span",null,"Футер с агрегациями")]),l("div",{class:"help-toolbar-item"},[l("i",{class:"pi pi-eye-slash"}),l("span",null,"Видимость колонок")]),l("div",{class:"help-toolbar-item"},[l("i",{class:"pi pi-print"}),l("span",null,"Печать таблицы")]),l("div",{class:"help-toolbar-item"},[l("i",{class:"pi pi-file-excel"}),l("span",null,"Экспорт в Excel")]),l("div",{class:"help-toolbar-item"},[l("i",{class:"pi pi-file-pdf"}),l("span",null,"Экспорт в PDF")]),l("div",{class:"help-toolbar-item"},[l("i",{class:"pi pi-cog"}),l("span",null,"Настройки")]),l("div",{class:"help-toolbar-item"},[l("i",{class:"pi pi-plus"}),l("span",null,"Новая строка")]),l("div",{class:"help-toolbar-item"},[l("i",{class:"pi pi-plus-circle"}),l("span",null,"Новая колонка")])])]),l("div",{class:"help-section"},[l("div",{class:"help-section-header"},[l("i",{class:"pi pi-th-large"}),l("h3",null,"Заголовки колонок")]),l("div",{class:"help-grid"},[l("div",{class:"help-card"},[l("div",{class:"help-card-icon"},"↕️"),l("div",{class:"help-card-title"},"Сортировка"),l("div",{class:"help-card-desc"},[X("Клик по заголовку сортирует данные. Повторный клик меняет направление. "),l("kbd",null,"Ctrl"),X("+клик для мультисортировки.")])]),l("div",{class:"help-card"},[l("div",{class:"help-card-icon"},"↔️"),l("div",{class:"help-card-title"},"Изменение ширины"),l("div",{class:"help-card-desc"},"Потяните границу между заголовками для изменения ширины колонки.")]),l("div",{class:"help-card"},[l("div",{class:"help-card-icon"},"📌"),l("div",{class:"help-card-title"},"Закрепление"),l("div",{class:"help-card-desc"},'ПКМ по заголовку → "Закрепить колонку". Закреплённые колонки остаются видимы при горизонтальной прокрутке.')])])]),l("div",{class:"help-section"},[l("div",{class:"help-section-header"},[l("i",{class:"pi pi-list"}),l("h3",null,"Контекстное меню (ПКМ)")]),l("div",{class:"help-info-block"},[l("h4",null,"По заголовку колонки"),l("ul",{class:"help-list"},[l("li",null,"Сортировка по возрастанию / убыванию"),l("li",null,"Закрепить / открепить колонку"),l("li",null,"Показать дубликаты (выделяет повторяющиеся значения цветом)"),l("li",null,"Скрыть колонку")])]),l("div",{class:"help-info-block mt-3"},[l("h4",null,"По строке"),l("ul",{class:"help-list"},[l("li",null,"Редактировать строку (форма со всеми полями)"),l("li",null,"Переместить вверх (изменить порядок)"),l("li",null,"Изменить родителя (для иерархических таблиц)"),l("li",null,"Удалить строку")])])]),l("div",{class:"help-section"},[l("div",{class:"help-section-header"},[l("i",{class:"pi pi-key"}),l("h3",null,"Горячие клавиши")]),l("div",{class:"help-shortcuts"},[l("div",{class:"help-shortcut"},[l("kbd",null,"Enter"),l("span",null,"Сохранить редактирование")]),l("div",{class:"help-shortcut"},[l("kbd",null,"Esc"),l("span",null,"Отменить редактирование")]),l("div",{class:"help-shortcut"},[l("kbd",null,"F3"),l("span",null,"Следующее совпадение поиска")]),l("div",{class:"help-shortcut"},[l("kbd",null,"Shift"),X(" + "),l("kbd",null,"F3"),l("span",null,"Предыдущее совпадение поиска")]),l("div",{class:"help-shortcut"},[l("kbd",null,"Ctrl"),X(" + клик по заголовку "),l("span",null,"Мультисортировка")])])]),l("div",{class:"help-section"},[l("div",{class:"help-section-header"},[l("i",{class:"pi pi-copy"}),l("h3",null,"Поиск дубликатов")]),l("div",{class:"help-info-block"},[l("p",null,'ПКМ по заголовку колонки → "Показать дубликаты". Повторяющиеся значения будут выделены разными цветами (каждая группа своим цветом). В подсказке показывается количество повторений.')])])],-1))]),_:1},8,["visible"]),U(ee,{visible:se.value,"onUpdate:visible":o[30]||(o[30]=e=>se.value=e),header:"Настройки таблицы",modal:!0,style:{width:"600px",maxHeight:"90vh"},breakpoints:{"960px":"95vw"},class:"settings-dialog"},{footer:j(()=>[U(d,{label:"Готово",icon:"pi pi-check",onClick:o[29]||(o[29]=e=>se.value=!1)})]),default:j(()=>[l("div",xi,[l("div",Ci,[o[45]||(o[45]=l("div",{class:"settings-section-header"},[l("i",{class:"pi pi-download"}),l("h3",null,"Загрузка данных")],-1)),l("div",Si,[l("div",Di,[U(we(re),{modelValue:ze.value.autoLoadAll,"onUpdate:modelValue":o[22]||(o[22]=e=>ze.value.autoLoadAll=e),inputId:"settingsAutoLoadCheckbox",binary:"",onChange:o[23]||(o[23]=e=>{return t=ze.value.autoLoadAll,ze.value.autoLoadAll=t,Ne({...ze.value}),void v.add({severity:"info",summary:"Настройки сохранены",detail:t?"Автозагрузка включена":"Автозагрузка выключена",life:2e3});var t})},null,8,["modelValue"]),o[42]||(o[42]=l("div",{class:"settings-option-content"},[l("label",{for:"settingsAutoLoadCheckbox",class:"settings-option-label"}," Автоматически загружать все данные "),l("small",{class:"settings-option-desc"}," Загрузит все строки таблицы в фоне. Фильтрация и поиск будут работать по всем записям. ")],-1))]),l("div",Mi,[U(we(re),{modelValue:ze.value.autoLoadDirs,"onUpdate:modelValue":o[24]||(o[24]=e=>ze.value.autoLoadDirs=e),inputId:"settingsAutoLoadDirsCheckbox",binary:"",onChange:o[25]||(o[25]=e=>ae(ze.value.autoLoadDirs))},null,8,["modelValue"]),o[43]||(o[43]=l("div",{class:"settings-option-content"},[l("label",{for:"settingsAutoLoadDirsCheckbox",class:"settings-option-label"}," Автозагрузка справочников "),l("small",{class:"settings-option-desc"}," Загрузит данные всех справочников с задержкой 500мс между запросами. ")],-1))]),l("div",Ti,[o[44]||(o[44]=l("i",{class:"pi pi-info-circle"},null,-1)),l("span",null,"Для таблиц > "+Z(ze.value.maxAutoLoadSize.toLocaleString())+" записей автозагрузка отключена.",1)])])]),l("div",Vi,[o[49]||(o[49]=l("div",{class:"settings-section-header"},[l("i",{class:"pi pi-calendar"}),l("h3",null,"Отображение дат")],-1)),l("div",$i,[l("div",{class:H(["date-style-card",{active:"classic"===ze.value.dateStyle}]),onClick:o[26]||(o[26]=e=>bt("classic"))},[...o[46]||(o[46]=[l("div",{class:"date-style-preview classic"},[l("span",{class:"date-dir-preview"},"18.12.2024")],-1),l("div",{class:"date-style-name"},"Классический",-1),l("div",{class:"date-style-desc"},"Стиль справочника",-1)])],2),l("div",{class:H(["date-style-card",{active:"relative"===ze.value.dateStyle}]),onClick:o[27]||(o[27]=e=>bt("relative"))},[...o[47]||(o[47]=[l("div",{class:"date-style-preview relative"},[l("span",{class:"date-dir-preview today"},"Сегодня")],-1),l("div",{class:"date-style-name"},"Относительный",-1),l("div",{class:"date-style-desc"},"Стиль справочника + относит.",-1)])],2),l("div",{class:H(["date-style-card",{active:"pill"===ze.value.dateStyle}]),onClick:o[28]||(o[28]=e=>bt("pill"))},[...o[48]||(o[48]=[l("div",{class:"date-style-preview pill"},[l("span",{class:"date-nested-preview"},"Сегодня")],-1),l("div",{class:"date-style-name"},"Капсула",-1),l("div",{class:"date-style-desc"},"Как вложенные таблицы",-1)])],2)])])])]),_:1},8,["visible"])],2)}}},[["__scopeId","data-v-7c198f65"]]);export{Ei as default};
