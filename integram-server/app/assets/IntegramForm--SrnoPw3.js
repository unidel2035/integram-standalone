import{_ as D,y as i,c as r,A as l,w as p,D as w,d as _,I as x,J as S,o as a,b as f,a as n,t as v,F as B,r as T,g as L,h as M,f as N}from"./index-D6FYndJO.js";import{I as P}from"./IntegramBreadcrumb-DEnfToFO.js";import"./integramApiClient-C3_j8SPw.js";import"./index-B9ygI19o.js";import"./unifiedAuthService-xCuNj-Bd.js";const Q={__name:"IntegramForm",props:{session:{type:Object,required:!0}},emits:["navigate"],setup(V,{expose:o,emit:I}){o();const t=I,y=w(),u=_(null),s=_(null),c=_([]),b=x(()=>{var d;const m=[{label:"Формы",icon:"pi pi-file",to:s.value?"/integram/form":void 0}];return(d=s.value)!=null&&d.name&&m.push({label:s.value.name,icon:"pi pi-file"}),m});function h(){u.value&&(s.value={id:u.value,name:"Демонстрационная форма",description:"Пример формы с различными панелями",panels:[{title:"Таблица данных",type:"table",width:"col-12",paginator:!0,rows:10,columns:[{field:"id",header:"ID"},{field:"name",header:"Название"},{field:"value",header:"Значение"}],data:[{id:1,name:"Item 1",value:100},{id:2,name:"Item 2",value:200},{id:3,name:"Item 3",value:300}]},{title:"График",type:"chart",width:"col-12 md:col-6",chartType:"bar",chartData:{labels:["Jan","Feb","Mar","Apr"],datasets:[{label:"Sales",data:[65,59,80,81],backgroundColor:"#42A5F5"}]}},{title:"Текстовый блок",type:"text",width:"col-12 md:col-6",content:"<h4>Заголовок</h4><p>Это пример текстового контента в панели.</p>"}]})}function g(m){return m.width||"col-12"}function F(){y.add({severity:"info",summary:"Выполнение запроса",detail:"Функционал будет реализован через API",life:3e3})}function k(){s.value=null,u.value=null}function C(){t("navigate","formBuilder")}S(()=>{c.value=[{id:"1",name:"Демо форма 1"},{id:"2",name:"Демо форма 2"}]});const e={emit:t,toast:y,selectedFormId:u,selectedForm:s,availableForms:c,breadcrumbItems:b,loadForm:h,panelClass:g,executePanelQuery:F,resetForm:k,createNewForm:C,ref:_,computed:x,onMounted:S,get useToast(){return w},IntegramBreadcrumb:P};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}},A={class:"integram-form-page integram-touch-friendly"},j={key:0,class:"mb-4"},q={class:"integram-field"},O={key:1},H={class:"mb-3"},J={key:0,class:"text-500 mb-3"},z={class:"grid"},E={key:0},U={key:1},G={key:2},K=["innerHTML"],R={key:3},W={class:"text-sm bg-gray-100 p-2 border-round"},X={key:4},Y={key:2,class:"integram-empty-state"},Z={class:"empty-action"};function $(V,o,I,t,y,u){const s=i("Select"),c=i("Button"),b=i("Column"),h=i("DataTable"),g=i("Chart"),F=i("Message"),k=i("Panel"),C=i("Card");return a(),r("div",A,[l(t.IntegramBreadcrumb,{items:t.breadcrumbItems},null,8,["items"]),l(C,null,{title:p(()=>[...o[1]||(o[1]=[n("div",{class:"flex align-items-center justify-content-between"},[n("span",null,"Формы")],-1)])]),content:p(()=>[t.selectedForm?f("",!0):(a(),r("div",j,[n("div",q,[o[2]||(o[2]=n("label",{for:"formSelect"},"Выберите форму",-1)),l(s,{id:"formSelect",modelValue:t.selectedFormId,"onUpdate:modelValue":o[0]||(o[0]=e=>t.selectedFormId=e),options:t.availableForms,optionLabel:"name",optionValue:"id",placeholder:"Выберите форму",class:"w-full",onChange:t.loadForm},null,8,["modelValue","options"])])])),t.selectedForm?(a(),r("div",O,[n("div",H,[l(c,{icon:"pi pi-arrow-left",label:"Назад к выбору",onClick:t.resetForm,text:"","aria-label":"Вернуться к списку форм"})]),n("h4",null,v(t.selectedForm.name),1),t.selectedForm.description?(a(),r("p",J,v(t.selectedForm.description),1)):f("",!0),n("div",z,[(a(!0),r(B,null,T(t.selectedForm.panels,(e,m)=>(a(),r("div",{key:m,class:L(t.panelClass(e))},[l(k,{header:e.title,toggleable:!0},{default:p(()=>[e.type==="table"?(a(),r("div",E,[l(h,{value:e.data||[],paginator:e.paginator,rows:e.rows||10},{default:p(()=>[(a(!0),r(B,null,T(e.columns,d=>(a(),M(b,{key:d.field,field:d.field,header:d.header},null,8,["field","header"]))),128))]),_:2},1032,["value","paginator","rows"])])):e.type==="chart"?(a(),r("div",U,[l(g,{type:e.chartType||"bar",data:e.chartData,options:e.chartOptions},null,8,["type","data","options"])])):e.type==="text"?(a(),r("div",G,[n("div",{innerHTML:e.content},null,8,K)])):e.type==="query"?(a(),r("div",R,[o[3]||(o[3]=n("p",{class:"mb-2"},"SQL Query:",-1)),n("pre",W,v(e.query),1),l(c,{label:"Выполнить запрос",icon:"pi pi-play",onClick:d=>t.executePanelQuery(e),class:"mt-2","aria-label":"Выполнить SQL запрос"},null,8,["onClick"])])):(a(),r("div",X,[l(F,{severity:"warn"},{default:p(()=>[N(" Неизвестный тип панели: "+v(e.type),1)]),_:2},1024)]))]),_:2},1032,["header"])],2))),128))])])):f("",!0),!t.selectedForm&&t.availableForms.length===0?(a(),r("div",Y,[o[4]||(o[4]=n("i",{class:"pi pi-inbox empty-icon"},null,-1)),o[5]||(o[5]=n("p",{class:"empty-title"},"Формы не найдены",-1)),o[6]||(o[6]=n("p",{class:"empty-description"},"Создайте первую форму для отображения данных",-1)),n("div",Z,[l(c,{label:"Создать форму",icon:"pi pi-plus",onClick:t.createNewForm,"aria-label":"Создать новую форму"})])])):f("",!0)]),_:1})])}const re=D(Q,[["render",$],["__scopeId","data-v-8fef1e88"],["__file","/home/hive/integram-standalone/src/components/integram/IntegramForm.vue"]]);export{re as default};
