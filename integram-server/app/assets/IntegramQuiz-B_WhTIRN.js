import{I as e}from"./IntegramBreadcrumb-Br9bSfo2.js";import{D as l,J as a,r as u,K as t,c as s,a as n,A as i,w as o,y as v,o as c,b as r,t as d,F as p,d as m,h as b}from"./index-m6PXRYQN.js";import{_ as f}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./integramApiClient-BsYdo77J.js";import"./index-CcrxTH1M.js";import"./unifiedAuthService-6fZILgG8.js";const y={class:"integram-quiz-container"},x={class:"mb-3"},g={key:0,class:"mb-4"},h={class:"field"},k={key:1},q={class:"mb-3"},V={key:0,class:"text-500 mb-3"},j={class:"mb-4"},w={class:"flex justify-content-between align-items-center mb-2"},I={class:"text-500"},_={class:"question-content"},C={class:"mb-3"},S={key:0,class:"flex flex-column gap-2"},A=["for"],B={key:1,class:"flex flex-column gap-2"},Q=["for"],$={key:2},L={key:3},U={class:"flex justify-content-between"},z={key:2,class:"text-center py-5"},P={class:"text-500"},M={key:3,class:"text-center py-5"},R=f({__name:"IntegramQuiz",props:{session:{type:Object,required:!0}},setup(f){const R=l(),D=a(()=>[{label:"Квиз",icon:"pi pi-question-circle",to:void 0}]),F=u(null),J=u(null),K=u(0),N=u([]),O=u(!1),T=u([]),E=a(()=>J.value&&J.value.questions?J.value.questions[K.value]:null);function G(){F.value&&(J.value={id:F.value,name:"Демонстрационный опрос",description:"Пример опроса с различными типами вопросов",questions:[{text:"Как вы оцениваете систему Integram?",type:"rating"},{text:"Какие функции вы используете чаще всего?",type:"multiple",options:[{label:"Работа с таблицами",value:"tables"},{label:"Отчеты",value:"reports"},{label:"Формы",value:"forms"},{label:"Запросы",value:"queries"}]},{text:"Какой тип баз данных вы предпочитаете?",type:"single",options:[{label:"SQL (PostgreSQL, MySQL)",value:"sql"},{label:"NoSQL (MongoDB, Redis)",value:"nosql"},{label:"Графовые БД",value:"graph"},{label:"Другое",value:"other"}]},{text:"Какие улучшения вы хотели бы видеть?",type:"text"}]},N.value=new Array(J.value.questions.length),N.value[K.value]="multiple"===J.value.questions[K.value].type?[]:null)}function H(){K.value<J.value.questions.length-1&&(K.value++,void 0===N.value[K.value]&&(N.value[K.value]="multiple"===J.value.questions[K.value].type?[]:null))}function W(){K.value>0&&K.value--}function X(){O.value=!0,R.add({severity:"success",summary:"Опрос завершен",detail:"Ваши ответы сохранены",life:3e3})}function Y(){J.value=null,F.value=null,K.value=0,N.value=[],O.value=!1}function Z(e,l){return null==e?"Не отвечено":"multiple"===l?Array.isArray(e)?e.join(", "):"Не выбрано":"rating"===l?`⭐ ${e}/5`:e.toString()}return t(()=>{T.value=[{id:"1",name:"Демо опрос 1"},{id:"2",name:"Демо опрос 2"}]}),(l,a)=>{const u=v("Select"),t=v("Button"),f=v("ProgressBar"),R=v("RadioButton"),ee=v("Checkbox"),le=v("Textarea"),ae=v("Rating"),ue=v("Panel"),te=v("Card");return c(),s("div",y,[n("div",x,[i(e,{items:D.value},null,8,["items"])]),i(te,null,{title:o(()=>[...a[5]||(a[5]=[n("div",{class:"flex align-items-center justify-content-between"},[n("span",null,"Опросы")],-1)])]),content:o(()=>[J.value?r("",!0):(c(),s("div",g,[n("div",h,[a[6]||(a[6]=n("label",{for:"quizSelect"},"Выберите опрос",-1)),i(u,{id:"quizSelect",modelValue:F.value,"onUpdate:modelValue":a[0]||(a[0]=e=>F.value=e),options:T.value,optionLabel:"name",optionValue:"id",placeholder:"Выберите опрос",class:"w-full",onChange:G},null,8,["modelValue","options"])])])),J.value&&!O.value?(c(),s("div",k,[n("div",q,[i(t,{icon:"pi pi-arrow-left",label:"Назад к выбору",onClick:Y,text:""})]),n("h4",null,d(J.value.name),1),J.value.description?(c(),s("p",V,d(J.value.description),1)):r("",!0),n("div",j,[n("div",w,[n("span",null,"Вопрос "+d(K.value+1)+" из "+d(J.value.questions.length),1),n("span",I,d(Math.round(K.value/J.value.questions.length*100))+"%",1)]),i(f,{value:K.value/J.value.questions.length*100},null,8,["value"])]),i(ue,{header:`Вопрос ${K.value+1}`,class:"mb-3"},{default:o(()=>[n("div",_,[n("h5",C,d(E.value.text),1),"single"===E.value.type?(c(),s("div",S,[(c(!0),s(p,null,m(E.value.options,(e,l)=>(c(),s("div",{key:l,class:"field-radiobutton"},[i(R,{modelValue:N.value[K.value],"onUpdate:modelValue":a[1]||(a[1]=e=>N.value[K.value]=e),inputId:`option-${l}`,value:e.value},null,8,["modelValue","inputId","value"]),n("label",{for:`option-${l}`,class:"ml-2"},d(e.label),9,A)]))),128))])):"multiple"===E.value.type?(c(),s("div",B,[(c(!0),s(p,null,m(E.value.options,(e,l)=>(c(),s("div",{key:l,class:"field-checkbox"},[i(ee,{modelValue:N.value[K.value],"onUpdate:modelValue":a[2]||(a[2]=e=>N.value[K.value]=e),inputId:`option-${l}`,value:e.value},null,8,["modelValue","inputId","value"]),n("label",{for:`option-${l}`,class:"ml-2"},d(e.label),9,Q)]))),128))])):"text"===E.value.type?(c(),s("div",$,[i(le,{modelValue:N.value[K.value],"onUpdate:modelValue":a[3]||(a[3]=e=>N.value[K.value]=e),rows:4,class:"w-full",placeholder:"Введите ваш ответ..."},null,8,["modelValue"])])):"rating"===E.value.type?(c(),s("div",L,[i(ae,{modelValue:N.value[K.value],"onUpdate:modelValue":a[4]||(a[4]=e=>N.value[K.value]=e),cancel:!1},null,8,["modelValue"])])):r("",!0)])]),_:1},8,["header"]),n("div",U,[i(t,{label:"Назад",icon:"pi pi-arrow-left",onClick:W,disabled:0===K.value,outlined:""},null,8,["disabled"]),K.value<J.value.questions.length-1?(c(),b(t,{key:0,label:"Далее",icon:"pi pi-arrow-right",iconPos:"right",onClick:H})):(c(),b(t,{key:1,label:"Завершить",icon:"pi pi-check",onClick:X,severity:"success"}))])])):r("",!0),O.value?(c(),s("div",z,[a[7]||(a[7]=n("i",{class:"pi pi-check-circle text-6xl text-green-500 mb-3"},null,-1)),a[8]||(a[8]=n("h3",null,"Опрос завершен!",-1)),a[9]||(a[9]=n("p",{class:"text-500 mb-3"},"Спасибо за ваши ответы",-1)),i(ue,{header:"Ваши ответы",class:"text-left mt-4"},{default:o(()=>[(c(!0),s(p,null,m(N.value,(e,l)=>(c(),s("div",{key:l,class:"mb-3 pb-3 border-bottom-1 surface-border"},[n("h5",null,d(J.value.questions[l].text),1),n("p",P,d(Z(e,J.value.questions[l].type)),1)]))),128))]),_:1}),i(t,{label:"Пройти другой опрос",icon:"pi pi-refresh",onClick:Y,class:"mt-3"})])):r("",!0),J.value||0!==T.value.length?r("",!0):(c(),s("div",M,[...a[10]||(a[10]=[n("i",{class:"pi pi-inbox text-5xl text-400 mb-3"},null,-1),n("p",{class:"text-500"},"Опросы не найдены",-1)])]))]),_:1})])}}},[["__scopeId","data-v-43a51281"]]);export{R as default};
