import{D as e,K as s,N as a,L as t,c as o,A as r,a as l,y as c,F as n,o as i}from"./index-DSwq2M__.js";import{_ as m}from"./_plugin-vue_export-helper-BCo6x5W8.js";const u={class:"callback-container"},d={class:"callback-content"},p=m({__name:"OAuthCallback",setup(m){const p=t(),_=a(),g=e();function f(e){return{invalid_state:"Неверный токен безопасности. Попробуйте еще раз.",oauth_failed:"Не удалось выполнить вход. Попробуйте еще раз.",access_denied:"Вы отклонили запрос на авторизацию."}[e]||"Произошла ошибка при входе"}return s(()=>{const{accessToken:e,refreshToken:s,userId:a,token:t,_xsrf:o,error:r}=_.query;r?(g.add({severity:"error",summary:"Ошибка авторизации",detail:f(r),life:5e3}),setTimeout(()=>{p.push("/login")},2e3)):e&&s?(localStorage.setItem("accessToken",e),localStorage.setItem("refreshToken",s),a&&localStorage.setItem("id",a),t&&localStorage.setItem("token",t),o&&localStorage.setItem("_xsrf",o),localStorage.setItem("session_timestamp",Date.now().toString()),g.add({severity:"success",summary:"Успешная авторизация",detail:"Вход выполнен успешно",life:3e3}),setTimeout(()=>{p.push("/welcome")},1e3)):p.push("/login")}),(e,s)=>{const a=c("Toast"),t=c("ProgressSpinner");return i(),o(n,null,[r(a),l("div",u,[l("div",d,[r(t),s[0]||(s[0]=l("p",{class:"callback-message"},"Обработка авторизации...",-1))])])],64)}}},[["__scopeId","data-v-a3176ca6"]]);export{p as default};
