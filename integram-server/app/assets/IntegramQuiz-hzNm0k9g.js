import{I as A}from"./IntegramBreadcrumb-bt1ieLIm.js";import{_ as L,y as m,c as o,a as n,A as r,w as z,D as S,I as V,d as v,J as D,o as l,b as f,t as d,F as I,r as C,h as P}from"./index-BrdfL8RF.js";import"./integramApiClient-C3_j8SPw.js";import"./index-B9ygI19o.js";import"./unifiedAuthService-xCuNj-Bd.js";const R={__name:"IntegramQuiz",props:{session:{type:Object,required:!0}},setup(j,{expose:t}){t();const x=S(),e=V(()=>[{label:"Квиз",icon:"pi pi-question-circle",to:void 0}]),Q=v(null),c=v(null),a=v(0),u=v([]),p=v(!1),g=v([]),h=V(()=>!c.value||!c.value.questions?null:c.value.questions[a.value]);function k(){Q.value&&(c.value={id:Q.value,name:"Демонстрационный опрос",description:"Пример опроса с различными типами вопросов",questions:[{text:"Как вы оцениваете систему Integram?",type:"rating"},{text:"Какие функции вы используете чаще всего?",type:"multiple",options:[{label:"Работа с таблицами",value:"tables"},{label:"Отчеты",value:"reports"},{label:"Формы",value:"forms"},{label:"Запросы",value:"queries"}]},{text:"Какой тип баз данных вы предпочитаете?",type:"single",options:[{label:"SQL (PostgreSQL, MySQL)",value:"sql"},{label:"NoSQL (MongoDB, Redis)",value:"nosql"},{label:"Графовые БД",value:"graph"},{label:"Другое",value:"other"}]},{text:"Какие улучшения вы хотели бы видеть?",type:"text"}]},u.value=new Array(c.value.questions.length),u.value[a.value]=c.value.questions[a.value].type==="multiple"?[]:null)}function q(){a.value<c.value.questions.length-1&&(a.value++,u.value[a.value]===void 0&&(u.value[a.value]=c.value.questions[a.value].type==="multiple"?[]:null))}function y(){a.value>0&&a.value--}function w(){p.value=!0,x.add({severity:"success",summary:"Опрос завершен",detail:"Ваши ответы сохранены",life:3e3})}function i(){c.value=null,Q.value=null,a.value=0,u.value=[],p.value=!1}function s(b,B){return b==null?"Не отвечено":B==="multiple"?Array.isArray(b)?b.join(", "):"Не выбрано":B==="rating"?`⭐ ${b}/5`:b.toString()}D(()=>{g.value=[{id:"1",name:"Демо опрос 1"},{id:"2",name:"Демо опрос 2"}]});const _={toast:x,breadcrumbItems:e,selectedQuizId:Q,activeQuiz:c,currentQuestion:a,answers:u,quizCompleted:p,availableQuizzes:g,currentQuestionData:h,loadQuiz:k,nextQuestion:q,previousQuestion:y,submitQuiz:w,resetQuiz:i,formatAnswer:s,IntegramBreadcrumb:A,ref:v,computed:V,onMounted:D,get useToast(){return S}};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},U={class:"integram-quiz-container"},M={class:"mb-3"},N={key:0,class:"mb-4"},T={class:"field"},F={key:1},O={class:"mb-3"},E={key:0,class:"text-500 mb-3"},J={class:"mb-4"},G={class:"flex justify-content-between align-items-center mb-2"},H={class:"text-500"},K={class:"question-content"},W={class:"mb-3"},X={key:0,class:"flex flex-column gap-2"},Y=["for"],Z={key:1,class:"flex flex-column gap-2"},$=["for"],ee={key:2},te={key:3},ne={class:"flex justify-content-between"},le={key:2,class:"text-center py-5"},oe={class:"text-500"},ie={key:3,class:"text-center py-5"};function ae(j,t,x,e,Q,c){const a=m("Select"),u=m("Button"),p=m("ProgressBar"),g=m("RadioButton"),h=m("Checkbox"),k=m("Textarea"),q=m("Rating"),y=m("Panel"),w=m("Card");return l(),o("div",U,[n("div",M,[r(e.IntegramBreadcrumb,{items:e.breadcrumbItems},null,8,["items"])]),r(w,null,{title:z(()=>[...t[5]||(t[5]=[n("div",{class:"flex align-items-center justify-content-between"},[n("span",null,"Опросы")],-1)])]),content:z(()=>[e.activeQuiz?f("",!0):(l(),o("div",N,[n("div",T,[t[6]||(t[6]=n("label",{for:"quizSelect"},"Выберите опрос",-1)),r(a,{id:"quizSelect",modelValue:e.selectedQuizId,"onUpdate:modelValue":t[0]||(t[0]=i=>e.selectedQuizId=i),options:e.availableQuizzes,optionLabel:"name",optionValue:"id",placeholder:"Выберите опрос",class:"w-full",onChange:e.loadQuiz},null,8,["modelValue","options"])])])),e.activeQuiz&&!e.quizCompleted?(l(),o("div",F,[n("div",O,[r(u,{icon:"pi pi-arrow-left",label:"Назад к выбору",onClick:e.resetQuiz,text:""})]),n("h4",null,d(e.activeQuiz.name),1),e.activeQuiz.description?(l(),o("p",E,d(e.activeQuiz.description),1)):f("",!0),n("div",J,[n("div",G,[n("span",null,"Вопрос "+d(e.currentQuestion+1)+" из "+d(e.activeQuiz.questions.length),1),n("span",H,d(Math.round(e.currentQuestion/e.activeQuiz.questions.length*100))+"%",1)]),r(p,{value:e.currentQuestion/e.activeQuiz.questions.length*100},null,8,["value"])]),r(y,{header:`Вопрос ${e.currentQuestion+1}`,class:"mb-3"},{default:z(()=>[n("div",K,[n("h5",W,d(e.currentQuestionData.text),1),e.currentQuestionData.type==="single"?(l(),o("div",X,[(l(!0),o(I,null,C(e.currentQuestionData.options,(i,s)=>(l(),o("div",{key:s,class:"field-radiobutton"},[r(g,{modelValue:e.answers[e.currentQuestion],"onUpdate:modelValue":t[1]||(t[1]=_=>e.answers[e.currentQuestion]=_),inputId:`option-${s}`,value:i.value},null,8,["modelValue","inputId","value"]),n("label",{for:`option-${s}`,class:"ml-2"},d(i.label),9,Y)]))),128))])):e.currentQuestionData.type==="multiple"?(l(),o("div",Z,[(l(!0),o(I,null,C(e.currentQuestionData.options,(i,s)=>(l(),o("div",{key:s,class:"field-checkbox"},[r(h,{modelValue:e.answers[e.currentQuestion],"onUpdate:modelValue":t[2]||(t[2]=_=>e.answers[e.currentQuestion]=_),inputId:`option-${s}`,value:i.value},null,8,["modelValue","inputId","value"]),n("label",{for:`option-${s}`,class:"ml-2"},d(i.label),9,$)]))),128))])):e.currentQuestionData.type==="text"?(l(),o("div",ee,[r(k,{modelValue:e.answers[e.currentQuestion],"onUpdate:modelValue":t[3]||(t[3]=i=>e.answers[e.currentQuestion]=i),rows:4,class:"w-full",placeholder:"Введите ваш ответ..."},null,8,["modelValue"])])):e.currentQuestionData.type==="rating"?(l(),o("div",te,[r(q,{modelValue:e.answers[e.currentQuestion],"onUpdate:modelValue":t[4]||(t[4]=i=>e.answers[e.currentQuestion]=i),cancel:!1},null,8,["modelValue"])])):f("",!0)])]),_:1},8,["header"]),n("div",ne,[r(u,{label:"Назад",icon:"pi pi-arrow-left",onClick:e.previousQuestion,disabled:e.currentQuestion===0,outlined:""},null,8,["disabled"]),e.currentQuestion<e.activeQuiz.questions.length-1?(l(),P(u,{key:0,label:"Далее",icon:"pi pi-arrow-right",iconPos:"right",onClick:e.nextQuestion})):(l(),P(u,{key:1,label:"Завершить",icon:"pi pi-check",onClick:e.submitQuiz,severity:"success"}))])])):f("",!0),e.quizCompleted?(l(),o("div",le,[t[7]||(t[7]=n("i",{class:"pi pi-check-circle text-6xl text-green-500 mb-3"},null,-1)),t[8]||(t[8]=n("h3",null,"Опрос завершен!",-1)),t[9]||(t[9]=n("p",{class:"text-500 mb-3"},"Спасибо за ваши ответы",-1)),r(y,{header:"Ваши ответы",class:"text-left mt-4"},{default:z(()=>[(l(!0),o(I,null,C(e.answers,(i,s)=>(l(),o("div",{key:s,class:"mb-3 pb-3 border-bottom-1 surface-border"},[n("h5",null,d(e.activeQuiz.questions[s].text),1),n("p",oe,d(e.formatAnswer(i,e.activeQuiz.questions[s].type)),1)]))),128))]),_:1}),r(u,{label:"Пройти другой опрос",icon:"pi pi-refresh",onClick:e.resetQuiz,class:"mt-3"})])):f("",!0),!e.activeQuiz&&e.availableQuizzes.length===0?(l(),o("div",ie,[...t[10]||(t[10]=[n("i",{class:"pi pi-inbox text-5xl text-400 mb-3"},null,-1),n("p",{class:"text-500"},"Опросы не найдены",-1)])])):f("",!0)]),_:1})])}const me=L(R,[["render",ae],["__scopeId","data-v-4eb9bdba"],["__file","/home/hive/integram-standalone/src/components/integram/IntegramQuiz.vue"]]);export{me as default};
