import{c as e,o as l,W as a,J as t,r,U as o,A as i,w as n,y as s,N as u,L as d,u as c,b as v,a as p,h as m,t as b,j as f,f as g}from"./index-CaUq7SZf.js";import{I as y}from"./IntegramBreadcrumb-DtRSJ3Ex.js";import{_ as q}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./integramApiClient-BsYdo77J.js";import"./index-CcrxTH1M.js";import"./unifiedAuthService-6fZILgG8.js";const I={__name:"SmartQTable",setup:a=>(a,t)=>(l(),e("div",null,"SmartQTable Component Placeholder"))},x={__name:"SmartQReportList",setup:a=>(a,t)=>(l(),e("div",null,"SmartQReportList Component Placeholder"))},_={__name:"SmartQReportEditor",setup:a=>(a,t)=>(l(),e("div",null,"SmartQReportEditor Component Placeholder"))},k={class:"smartq-page"},C={class:"flex align-items-center justify-content-between"},R={class:"flex gap-2 align-items-center ml-auto"},h={key:0},S={key:1},w={class:"surface-ground border-round p-3 mb-3"},j={for:"reportId",class:"block mb-2 font-medium"},Q={class:"flex gap-2"},$={key:2,class:"text-center py-6 surface-ground border-round"},E={class:"m-0 mb-2"},L={class:"text-color-secondary m-0 mb-3"},P={key:2},T={key:3},V=q({__name:"SmartQ",setup(q){const{t:V}=a(),A=u(),B=d(),U=t(()=>[{label:"Умный запрос",icon:"pi pi-search"}]),M=r("list"),N=r(null),z=r(null),J=r(null),W=r(null),D=r(0),F=t(()=>[{label:V("smartq.nav.reports"),icon:"pi pi-list",value:"list"},{label:V("smartq.nav.editor"),icon:"pi pi-pencil",value:"editor"},{label:V("smartq.nav.designer"),icon:"pi pi-cog",value:"designer"}]);function G(){if(A.query.reportId){const e=parseInt(A.query.reportId);N.value=e,z.value=e,M.value="editor",D.value=1}else if(A.query.view){const e={viewer:"editor",editor:"designer",list:"list",designer:"designer",create:"create"};M.value=e[A.query.view]||A.query.view,H()}else M.value="list",D.value=0}function H(){D.value={list:0,editor:1,designer:2,create:2}[M.value]||0}function K(e){M.value=e,H(),O()}function O(){const e={};"editor"===M.value&&z.value?e.reportId=z.value:e.view=M.value,B.replace({query:e})}function X(){N.value?(W.value=null,z.value=N.value,M.value="editor",H(),O()):W.value=V("smartq.errors.noReportId")}function Y(e){N.value=e,z.value=e,M.value="editor",H(),O()}function Z(e){J.value=e,M.value="designer",H(),O()}function ee(){J.value=null,M.value="create",H(),O()}function le(e){e&&e.id?Y(e.id):K("list")}function ae(){K("list")}function te(e){W.value="string"==typeof e?e:e.message||V("smartq.errors.unknown")}return G(),o(()=>A.query,()=>{G()},{deep:!0}),o(D,e=>{const l=["list","editor","designer"][e]||"list";M.value!==l&&K(l)}),(a,t)=>{const r=s("Button"),o=s("TabMenu"),u=s("InputNumber"),d=s("Message"),q=s("Card"),V=c("tooltip");return l(),e("div",k,[i(y,{items:U.value},null,8,["items"]),i(q,null,{title:n(()=>[p("div",C,[t[6]||(t[6]=p("span",null,"Умный запрос",-1)),p("div",R,[i(r,{icon:"pi pi-plus",label:"Создать",onClick:t[0]||(t[0]=e=>K("create")),size:"small"})])])]),content:n(()=>[i(o,{model:F.value,activeIndex:D.value,"onUpdate:activeIndex":t[1]||(t[1]=e=>D.value=e),class:"mb-3"},null,8,["model","activeIndex"]),"list"===M.value?(l(),e("div",h,[i(x,{onViewReport:Y,onEditReport:Z,onCreateReport:ee})])):"editor"===M.value?(l(),e("div",S,[p("div",w,[p("label",j,b(a.$t("smartq.selectReport")),1),p("div",Q,[i(u,{id:"reportId",modelValue:N.value,"onUpdate:modelValue":t[2]||(t[2]=e=>N.value=e),placeholder:a.$t("smartq.reportIdPlaceholder"),class:"flex-1"},null,8,["modelValue","placeholder"]),i(r,{label:a.$t("smartq.loadReport"),icon:"pi pi-search",onClick:X,disabled:!N.value},null,8,["label","disabled"]),f(i(r,{icon:"pi pi-cog",onClick:t[3]||(t[3]=e=>Z(z.value)),disabled:!z.value,severity:"secondary",outlined:""},null,8,["disabled"]),[[V,a.$t("smartq.reports.design"),void 0,{top:!0}]])])]),W.value?(l(),m(d,{key:0,severity:"error",onClose:t[4]||(t[4]=e=>W.value=null),closable:"",class:"mb-3"},{default:n(()=>[g(b(W.value),1)]),_:1})):v("",!0),z.value?(l(),m(I,{key:1,"report-id":z.value,onError:te},null,8,["report-id"])):(l(),e("div",$,[t[7]||(t[7]=p("i",{class:"pi pi-table text-5xl text-color-secondary mb-3 block"},null,-1)),p("h4",E,b(a.$t("smartq.noReportLoaded")),1),p("p",L,b(a.$t("smartq.enterReportIdToStart")),1),i(r,{label:a.$t("smartq.nav.browseReports"),icon:"pi pi-list",onClick:t[5]||(t[5]=e=>K("list")),outlined:""},null,8,["label"])]))])):"designer"===M.value?(l(),e("div",P,[i(_,{"report-id":J.value,onSaved:le,onCancelled:ae},null,8,["report-id"])])):"create"===M.value?(l(),e("div",T,[i(_,{onSaved:le,onCancelled:ae})])):v("",!0)]),_:1})])}}},[["__scopeId","data-v-b3469336"]]);export{V as default};
