const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AppConfigurator-BfPuxXqu.js","assets/index-CaUq7SZf.js","assets/index-qS_NbCi9.css","assets/_plugin-vue_export-helper-BCo6x5W8.js","assets/logger-DLAyPY85.js","assets/authStore-CmOaKBKq.js","assets/index-CcrxTH1M.js","assets/unifiedAuthService-6fZILgG8.js","assets/integramApiClient-BsYdo77J.js","assets/useTimer-yAmo2CsE.js","assets/SafeRouterView-B0-J6TPH.js","assets/AppConfigurator-DtDg3kqf.css","assets/Profile-D77AroWd.js","assets/Profile-DcxP_ZbR.css","assets/NotificationCenter-DpL_kbrR.js","assets/NotificationCenter-18FEumSr.css","assets/AgentStatusPanel-BReYKwIn.js","assets/AgentStatusPanel-BhpO3-rI.css","assets/Chat-BODX9HTF.js","assets/Chat-DQlTyrGk.css","assets/ReleaseNotesModal-Bb_LJ3uA.js"])))=>i.map(i=>d[i]);
import{J as e,E as t,r as a,K as l,P as i,c as o,a as n,b as s,f as r,t as u,g as c,A as d,w as m,y as p,o as v,N as g,L as f,S as y,U as h,u as b,j as w,h as k,V as x,G as S,C as I,F as M,d as _,v as C,T as A,D as L,n as D,e as E,W as T,k as N,X as O,Y as P,Z as K,_ as R,$ as V,a0 as j}from"./index-CaUq7SZf.js";import{_ as J}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{l as $}from"./logger-DLAyPY85.js";import{u as z}from"./authStore-CmOaKBKq.js";import{i as U}from"./integramApiClient-BsYdo77J.js";import{u as W}from"./useTimer-yAmo2CsE.js";import{_ as H}from"./SafeRouterView-B0-J6TPH.js";const B=t({preset:"Aura",primary:"cyan",surface:"neutral",darkTheme:(()=>{if("undefined"==typeof window)return!1;const e=localStorage.getItem("darkTheme");return!!e&&JSON.parse(e)})(),menuMode:"static"}),q=t({staticMenuDesktopInactive:!1,overlayMenuActive:!1,profileSidebarVisible:!1,configSidebarVisible:!1,staticMenuMobileActive:!1,menuHoverActive:!1,activeMenuItem:null,sidebarCollapsed:(()=>{if("undefined"==typeof window)return!0;const e=localStorage.getItem("sidebarCollapsed");return!e||JSON.parse(e)})()});function F(){const t=()=>{B.darkTheme=!B.darkTheme,"undefined"!=typeof window&&(localStorage.setItem("darkTheme",JSON.stringify(B.darkTheme)),document.documentElement.classList.toggle("app-dark",B.darkTheme))},a=e(()=>q.overlayMenuActive||q.staticMenuMobileActive),l=e(()=>B.darkTheme),i=e(()=>B.primary),o=e(()=>B.surface);return{layoutConfig:B,layoutState:q,toggleMenu:()=>{"overlay"===B.menuMode&&(q.overlayMenuActive=!q.overlayMenuActive),window.innerWidth>991?q.staticMenuDesktopInactive=!q.staticMenuDesktopInactive:q.staticMenuMobileActive=!q.staticMenuMobileActive},toggleSidebarCollapse:()=>{if(q.sidebarCollapsed=!q.sidebarCollapsed,"undefined"!=typeof window){const e=q.sidebarCollapsed;queueMicrotask(()=>{localStorage.setItem("sidebarCollapsed",JSON.stringify(e))})}},isSidebarActive:a,isDarkTheme:l,getPrimary:i,getSurface:o,setActiveMenuItem:e=>{q.activeMenuItem=null!=e?e&&"object"==typeof e&&"value"in e?e.value:e:null},toggleDarkMode:()=>{document.startViewTransition?document.startViewTransition(()=>t(event)):t()}}}"undefined"!=typeof window&&document.documentElement.classList.toggle("app-dark",B.darkTheme);const Q="1.0.0",G={class:"layout-footer"},X={class:"flex flex-col gap-3"},Y={class:"flex items-center justify-between flex-wrap gap-2"},Z={class:"text-sm"},ee=["title"],te={key:0,class:"deployment-info text-xs text-muted-color flex flex-wrap gap-3 justify-center items-center"},ae={key:0,class:"flex items-center gap-1"},le={key:1,class:"flex items-center gap-1"},ie={key:2,class:"flex items-center gap-1"},oe=["title"],ne={key:1,class:"deployment-info text-xs text-muted-color text-center"},se={class:"flex flex-wrap gap-4 text-sm justify-center"},re=J({__name:"AppFooter",setup(e){const t=a(Q),g=a(!1),f=a(null),y=a(!0);let h=null;const b=async()=>{try{f.value=await async function(){return{version:"1.0.0",environment:"development",deployedAt:(new Date).toISOString(),branch:"main",commit:"unknown"}}()}catch(e){}finally{y.value=!1}};l(async()=>{await b(),h=setInterval(b,3e5)}),i(()=>{h&&clearInterval(h)});const w=e=>{if(!e)return"Unknown";try{return new Date(e).toLocaleString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(t){return e}},k=e=>{switch(e){case"synchronized":return"text-green-500";case"branch-mismatch":return"text-orange-500";case"unknown":case"error":return"text-red-500";default:return"text-muted-color"}},x=e=>{switch(e){case"synchronized":return"✓";case"branch-mismatch":return"⚠";case"unknown":case"error":return"✗";default:return"?"}},S=e=>{switch(e){case"synchronized":return"Синхронизирован с dev";case"branch-mismatch":return"Ветка не соответствует dev";case"unknown":return"Статус неизвестен";case"error":return"Ошибка получения статуса";default:return e}};return(e,a)=>{const l=p("router-link");return v(),o("div",G,[n("div",X,[n("div",Y,[n("p",Z,[a[2]||(a[2]=r("© 2025 Integram ",-1)),n("a",{href:"https://github.com/unidel2035/dronedoc2025/blob/master/CHANGELOG.md",target:"_blank",rel:"noopener noreferrer",class:"text-sm text-muted-color hover:text-primary transition-colors",onMouseenter:a[0]||(a[0]=e=>g.value=!0),onMouseleave:a[1]||(a[1]=e=>g.value=!1),title:`View changelog for version ${t.value}`}," v"+u(t.value),41,ee)])]),!y.value&&f.value?(v(),o("div",te,[f.value.lastCommitDate?(v(),o("span",ae,[a[3]||(a[3]=n("i",{class:"pi pi-clock"},null,-1)),n("span",null,"Обновлено: "+u(w(f.value.lastCommitDate)),1)])):s("",!0),f.value.branch?(v(),o("span",le,[a[4]||(a[4]=n("i",{class:"pi pi-code-branch"},null,-1)),n("span",null,"Ветка: "+u(f.value.branch),1)])):s("",!0),f.value.commitHash?(v(),o("span",ie,[a[5]||(a[5]=n("i",{class:"pi pi-hashtag"},null,-1)),n("span",null,u(f.value.commitHash),1)])):s("",!0),f.value.deploymentStatus?(v(),o("span",{key:3,class:c(["flex items-center gap-1 font-semibold",k(f.value.deploymentStatus)]),title:f.value.lastCommitMessage},[n("span",null,u(x(f.value.deploymentStatus)),1),n("span",null,u(S(f.value.deploymentStatus)),1)],10,oe)):s("",!0)])):y.value?(v(),o("div",ne,[...a[6]||(a[6]=[n("i",{class:"pi pi-spin pi-spinner"},null,-1),r(" Загрузка информации о развертывании... ",-1)])])):s("",!0),n("div",se,[d(l,{to:"/legal/terms-of-service",class:"text-muted-color hover:text-primary transition-colors"},{default:m(()=>[...a[7]||(a[7]=[r(" Условия использования ",-1)])]),_:1}),d(l,{to:"/legal/privacy-policy",class:"text-muted-color hover:text-primary transition-colors"},{default:m(()=>[...a[8]||(a[8]=[r(" Политика конфиденциальности ",-1)])]),_:1}),d(l,{to:"/legal/cookie-policy",class:"text-muted-color hover:text-primary transition-colors"},{default:m(()=>[...a[9]||(a[9]=[r(" Cookies ",-1)])]),_:1}),d(l,{to:"/legal/refund-policy",class:"text-muted-color hover:text-primary transition-colors"},{default:m(()=>[...a[10]||(a[10]=[r(" Возврат средств ",-1)])]),_:1}),d(l,{to:"/legal/acceptable-use-policy",class:"text-muted-color hover:text-primary transition-colors"},{default:m(()=>[...a[11]||(a[11]=[r(" Правила использования ",-1)])]),_:1}),d(l,{to:"/legal/dmca-policy",class:"text-muted-color hover:text-primary transition-colors"},{default:m(()=>[...a[12]||(a[12]=[r(" DMCA ",-1)])]),_:1})])])])}}},[["__scopeId","data-v-10adb43d"]]),ue=["role","aria-expanded","draggable"],ce=["aria-expanded","tabindex"],de={key:0,class:"pi pi-bars drag-handle"},me=["innerHTML"],pe=["href","target","data-key","data-parent","aria-label"],ve=["href","target","data-key","data-parent","aria-label"],ge={key:0,class:"pi pi-bars drag-handle"},fe=["innerHTML"],ye={key:4,class:"pi pi-fw pi-angle-down layout-submenu-toggler"},he={key:0,class:"pi pi-bars drag-handle"},be=["innerHTML"],we={key:4,class:"pi pi-fw pi-angle-down layout-submenu-toggler"},ke={class:"layout-submenu",role:"group"},xe={class:"submenu-overlay-content"},Se={class:"submenu-overlay-header"},Ie={class:"font-semibold"},Me={class:"submenu-overlay-items"},_e=["onClick","onMouseenter","onMouseleave"],Ce={key:1,class:"submenu-overlay-group"},Ae={class:"submenu-overlay-group-label"},Le={class:"submenu-overlay-group-items"},De=["onClick","onMouseenter","onMouseleave"],Ee=J({__name:"AppMenuItem",props:{item:{type:Object,default:()=>({})},index:{type:Number,default:0},root:{type:Boolean,default:!0},parentItemKey:{type:String,default:null},searchQuery:{type:String,default:""},collapsed:{type:Boolean,default:!1}},emits:["rename","duplicate","toggle-visibility","delete","add-child","drag-drop","toggle-collapsed"],setup(t,{emit:l}){const i=g(),r=f(),{onLinkHover:d,onLinkLeave:L}={prefetchRoute:()=>{},isPrefetched:()=>!1},{layoutState:D,setActiveMenuItem:E,toggleMenu:T}=F(),N=t,O=l,P=a(!1),K=a(null),R=a(),V=a(!1),j=a(""),J=a(!1),z=a(!1),U=a();let W="",H=null;y(()=>{K.value=N.parentItemKey?N.parentItemKey+"-"+N.index:String(N.index);const e=D.activeMenuItem;N.root&&N.item.items&&N.item.items.length>0?(N.item.label,P.value=!0):P.value=N.root||!(e!==K.value&&!e)&&e.startsWith(K.value+"-")}),h(()=>D.activeMenuItem,e=>{N.root&&N.item.items&&N.item.items.length>0?(N.item.label,P.value=!0):P.value=N.root||e===K.value||!!e&&e.startsWith(K.value+"-")}),h(()=>N.searchQuery,e=>{if(e&&""!==e.trim()&&N.item.items&&N.item.items.length>0)P.value=!0;else if(!e||""===e.trim())if(N.root&&N.item.items&&N.item.items.length>0)N.item.label,P.value=!0;else{const e=D.activeMenuItem;P.value=e===K.value||!!e&&e.startsWith(K.value+"-")}});const B=e(()=>((e,t)=>{if(!t||""===t.trim()||!e)return e;const a=new RegExp(`(${t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return e.replace(a,'<mark class="search-highlight">$1</mark>')})(N.item.label,N.searchQuery));function q(e,t){var a;if(t.disabled)return void e.preventDefault();if(N.collapsed&&t.items&&t.items.length>0)return e.preventDefault(),void(null==(a=U.value)||a.toggle(e));if(t.to&&!t.items){e.preventDefault(),r.push(t.to),(D.staticMenuMobileActive||D.overlayMenuActive)&&T();const a=K.value;return void E(a)}if((t.to||t.url)&&(D.staticMenuMobileActive||D.overlayMenuActive)&&T(),t.command&&t.command({originalEvent:e,item:t}),N.root&&t.items&&t.items.length>0){const e=(t.label,!0);P.value=!e,O("toggle-collapsed",{item:t,collapsed:e})}const l=t.items&&P.value?N.parentItemKey:K.value;E(l)}function Q(e,t){var a;e&&(e.preventDefault(),e.stopPropagation()),null==(a=U.value)||a.hide(),t.to&&r.push(t.to),(D.staticMenuMobileActive||D.overlayMenuActive)&&T()}function G(e){if(!e.to)return!1;const t=i.path.replace(/\/$/,"")||"/",a=e.to.replace(/\/$/,"")||"/";return t===a||("/workspaces"===a?"/workspaces"===t:!(!a.startsWith("/workspace/")||!t.startsWith("/workspace/"))&&t===a)}function X(){return"Страницы"!==N.item.label}function Y(e){X()?(J.value=!0,e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",JSON.stringify({index:N.index,parentItemKey:N.parentItemKey}))):e.preventDefault()}function Z(e){X()&&(e.preventDefault(),e.dataTransfer.dropEffect="move",z.value=!0)}function ee(){z.value=!1}function te(e){if(e.preventDefault(),e.stopPropagation(),X()){z.value=!1;try{const t=JSON.parse(e.dataTransfer.getData("text/plain"));O("drag-drop",{draggedIndex:t.index,draggedParentKey:t.parentItemKey,targetIndex:N.index,targetParentKey:N.parentItemKey})}catch(t){$.error("Error parsing drag data:",t)}}}function ae(){J.value=!1,z.value=!1}const le=e(()=>{const e=[];return N.root||(e.push({label:"Переименовать",icon:"pi pi-pencil",command:()=>oe()},{label:"Дублировать",icon:"pi pi-copy",command:()=>O("duplicate",N.item)}),N.item.to||e.push({label:"Добавить подпункт",icon:"pi pi-plus",command:()=>O("add-child",N.item)}),e.push({separator:!0},{label:!1!==N.item.visible?"Скрыть":"Показать",icon:!1!==N.item.visible?"pi pi-eye-slash":"pi pi-eye",command:()=>O("toggle-visibility",N.item)},{separator:!0},{label:"Удалить",icon:"pi pi-trash",command:()=>O("delete",N.item)}),N.item.to&&e.splice(e.length-2,0,{label:"Копировать ссылку",icon:"pi pi-link",command:()=>re()})),e}),ie=e=>{N.root||(e.preventDefault(),R.value.show(e))},oe=()=>{V.value=!0,j.value=N.item.label},ne=()=>{j.value&&j.value!==N.item.label&&O("rename",{item:N.item,newLabel:j.value}),V.value=!1},se=()=>{V.value=!1,j.value=""},re=()=>{N.item.to&&navigator.clipboard.writeText(N.item.to)};function Ee(){return Array.from(document.querySelectorAll('.layout-menu a[tabindex="0"]:not([style*="display: none"])'))}function Te(e){switch(e.key){case"ArrowUp":e.preventDefault(),function(){const e=Ee(),t=e.indexOf(document.activeElement);t>0&&e[t-1].focus()}();break;case"ArrowDown":e.preventDefault(),function(){const e=Ee(),t=e.indexOf(document.activeElement);t<e.length-1&&e[t+1].focus()}();break;case"ArrowRight":N.item.items&&!P.value&&(e.preventDefault(),E(K.value));break;case"ArrowLeft":P.value&&N.item.items?(e.preventDefault(),E(N.parentItemKey)):N.parentItemKey&&(e.preventDefault(),function(){if(N.parentItemKey){const e=document.querySelector(`[data-key="${N.parentItemKey}"]`);e&&e.focus()}}());break;case"Home":e.preventDefault(),function(){const e=Ee();e.length>0&&e[0].focus()}();break;case"End":e.preventDefault(),function(){const e=Ee();e.length>0&&e[e.length-1].focus()}();break;case" ":N.item.items&&(e.preventDefault(),q(e,N.item));break;case"Escape":P.value&&(e.preventDefault(),E(N.parentItemKey))}}function Ne(e){if(e.ctrlKey||e.metaKey||e.altKey||e.key.length>1)return;clearTimeout(H),W+=e.key.toLowerCase();const t=Ee(),a=t.indexOf(document.activeElement);for(let l=a+1;l<t.length;l++)if(t[l].textContent.trim().toLowerCase().startsWith(W))return void t[l].focus();for(let l=0;l<=a;l++)if(t[l].textContent.trim().toLowerCase().startsWith(W))return void t[l].focus();H=setTimeout(()=>{W=""},1e3)}return(e,a)=>{const l=p("InputText"),i=p("router-link"),r=p("app-menu-item",!0),g=p("ContextMenu"),f=p("OverlayPanel"),y=b("tooltip");return v(),o("li",{class:c({"layout-root-menuitem":t.root,"active-menuitem":P.value,"menu-item-dragging":J.value,"menu-item-drag-over":z.value}),role:t.root?"none":"treeitem","aria-expanded":t.item.items?P.value:void 0,draggable:X(),onDragstart:Y,onDragover:Z,onDragleave:ee,onDrop:te,onDragend:ae,onContextmenu:ie},[t.root&&!1!==t.item.visible&&!t.collapsed?(v(),o("div",{key:0,class:c(["layout-menuitem-root-text",{"collapsible-group":t.item.items&&t.item.items.length>0}]),onClick:a[0]||(a[0]=e=>t.item.items&&t.item.items.length>0?q(e,t.item):null),role:"button","aria-expanded":t.item.items?P.value:void 0,tabindex:t.item.items&&t.item.items.length>0?0:-1,onKeydown:[a[1]||(a[1]=x(e=>t.item.items&&t.item.items.length>0?q(e,t.item):null,["enter"])),a[2]||(a[2]=x(S(e=>t.item.items&&t.item.items.length>0?q(e,t.item):null,["prevent"]),["space"]))]},[X()?(v(),o("i",de)):s("",!0),n("span",{innerHTML:B.value},null,8,me),t.item.items&&t.item.items.length>0?(v(),o("i",{key:1,class:c(["pi pi-fw layout-group-toggler",P.value?"pi-chevron-down":"pi-chevron-right"])},null,2)):s("",!0)],42,ce)):s("",!0),t.root&&!1!==t.item.visible&&t.collapsed&&t.item.icon?w((v(),o("a",{key:1,href:t.item.url,onClick:a[3]||(a[3]=e=>q(e,t.item,t.index)),onKeydown:Te,onKeypress:Ne,class:c(t.item.class),target:t.item.target,tabindex:"0","data-key":K.value,"data-parent":t.parentItemKey,"aria-label":t.item.label},[n("i",{class:c([t.item.icon,"layout-menuitem-icon"])},null,2)],42,pe)),[[y,t.item.label,void 0,{right:!0}]]):s("",!0),t.root||t.item.to&&!t.item.items||!1===t.item.visible?s("",!0):w((v(),o("a",{key:2,href:t.item.url,onClick:a[5]||(a[5]=e=>q(e,t.item,t.index)),onKeydown:Te,onKeypress:Ne,class:c(t.item.class),target:t.item.target,tabindex:"0","data-key":K.value,"data-parent":t.parentItemKey,"aria-label":t.item.label},[X()&&!t.collapsed?(v(),o("i",ge)):s("",!0),t.item.icon?(v(),o("i",{key:1,class:c([t.item.icon,"layout-menuitem-icon"])},null,2)):s("",!0),V.value||t.collapsed?V.value&&!t.collapsed?(v(),k(l,{key:3,modelValue:j.value,"onUpdate:modelValue":a[4]||(a[4]=e=>j.value=e),onBlur:ne,onKeyup:[x(ne,["enter"]),x(se,["esc"])],autofocus:"",class:"layout-menuitem-text p-inputtext-sm",style:{width:"100%","max-width":"200px"}},null,8,["modelValue"])):s("",!0):(v(),o("span",{key:2,class:"layout-menuitem-text",innerHTML:B.value},null,8,fe)),t.item.items&&!t.collapsed?(v(),o("i",ye)):s("",!0)],42,ve)),[[y,t.collapsed?t.item.label:null,void 0,{right:!0}]]),t.item.to&&!t.item.items&&!1!==t.item.visible?w((v(),k(i,{key:3,onClick:a[7]||(a[7]=e=>q(e,t.item,t.index)),onKeydown:Te,onKeypress:Ne,onMouseenter:a[8]||(a[8]=e=>I(d)(t.item.to)),onMouseleave:a[9]||(a[9]=e=>I(L)(t.item.to)),class:c([t.item.class,{"active-route":G(t.item)}]),tabindex:"0",to:t.item.to,"data-key":K.value,"data-parent":t.parentItemKey,"aria-label":t.item.label,"aria-current":G(t.item)?"page":void 0},{default:m(()=>[t.root||!X()||t.collapsed?s("",!0):(v(),o("i",he)),t.item.icon?(v(),o("i",{key:1,class:c([t.item.icon,"layout-menuitem-icon"])},null,2)):s("",!0),V.value||t.collapsed?V.value&&!t.collapsed?(v(),k(l,{key:3,modelValue:j.value,"onUpdate:modelValue":a[6]||(a[6]=e=>j.value=e),onBlur:ne,onKeyup:[x(ne,["enter"]),x(se,["esc"])],autofocus:"",class:"layout-menuitem-text p-inputtext-sm",style:{width:"100%","max-width":"200px"}},null,8,["modelValue"])):s("",!0):(v(),o("span",{key:2,class:"layout-menuitem-text",innerHTML:B.value},null,8,be)),t.item.items&&!t.collapsed?(v(),o("i",we)):s("",!0)]),_:1},8,["class","to","data-key","data-parent","aria-label","aria-current"])),[[y,t.collapsed?t.item.label:null,void 0,{right:!0}]]):s("",!0),t.item.items&&!1!==t.item.visible&&!t.collapsed?(v(),k(A,{key:4,name:"layout-submenu"},{default:m(()=>[w(n("ul",ke,[(v(!0),o(M,null,_(t.item.items,(l,i)=>(v(),k(r,{key:l,index:i,item:l,parentItemKey:K.value,root:!1,"search-query":t.searchQuery,collapsed:t.collapsed,onRename:a[10]||(a[10]=t=>e.$emit("rename",t)),onDuplicate:a[11]||(a[11]=t=>e.$emit("duplicate",t)),onToggleVisibility:a[12]||(a[12]=t=>e.$emit("toggle-visibility",t)),onDelete:a[13]||(a[13]=t=>e.$emit("delete",t)),onAddChild:a[14]||(a[14]=t=>e.$emit("add-child",t)),onDragDrop:a[15]||(a[15]=t=>e.$emit("drag-drop",t))},null,8,["index","item","parentItemKey","search-query","collapsed"]))),128))],512),[[C,P.value]])]),_:1})):s("",!0),t.root?s("",!0):(v(),k(g,{key:5,ref_key:"menuRef",ref:R,model:le.value},null,8,["model"])),t.item.items&&t.item.items.length>0&&t.collapsed?(v(),k(f,{key:6,ref_key:"submenuOverlay",ref:U,dismissable:!0,showCloseIcon:!1},{default:m(()=>[n("div",xe,[n("div",Se,[t.item.icon?(v(),o("i",{key:0,class:c([t.item.icon,"mr-2"])},null,2)):s("",!0),n("span",Ie,u(t.item.label),1)]),n("div",Me,[(v(!0),o(M,null,_(t.item.items,(e,t)=>(v(),o(M,{key:t},[!1===e.visible||e.items?!1!==e.visible&&e.items?(v(),o("div",Ce,[n("div",Ae,[e.icon?(v(),o("i",{key:0,class:c([e.icon,"mr-2"])},null,2)):s("",!0),n("span",null,u(e.label),1)]),n("div",Le,[(v(!0),o(M,null,_(e.items,(e,t)=>w((v(),o("div",{key:t,class:"submenu-overlay-item submenu-overlay-item-nested",onClick:t=>Q(t,e),onMouseenter:t=>e.to&&I(d)(e.to),onMouseleave:t=>e.to&&I(L)(e.to),role:"menuitem",tabindex:"0"},[e.icon?(v(),o("i",{key:0,class:c([e.icon,"mr-2"])},null,2)):s("",!0),n("span",null,u(e.label),1)],40,De)),[[C,!1!==e.visible]])),128))])])):s("",!0):(v(),o("div",{key:0,class:"submenu-overlay-item",onClick:t=>Q(t,e),onMouseenter:t=>e.to&&I(d)(e.to),onMouseleave:t=>e.to&&I(L)(e.to),role:"menuitem",tabindex:"0"},[e.icon?(v(),o("i",{key:0,class:c([e.icon,"mr-2"])},null,2)):s("",!0),n("span",null,u(e.label),1)],40,_e))],64))),128))])])]),_:1},512)):s("",!0)],42,ue)}}},[["__scopeId","data-v-485a4b7a"]]),Te=()=>Promise.resolve(!0),Ne={key:0,class:"flex justify-content-center align-items-center h-full"},Oe={key:1},Pe={key:0,class:"search-results-info px-3 py-2 text-sm text-600"},Ke={class:"layout-menu",role:"tree","aria-label":"Главное меню навигации"},Re={key:1,class:"menu-separator"},Ve={key:1,class:"px-3 py-4 text-center text-500"},je={__name:"AppMenu",props:{searchQuery:{type:String,default:""},collapsed:{type:Boolean,default:!1}},emits:["menu-loaded"],setup(t,{emit:i}){const r=z(),c=t,m=a("");let g=null;h(()=>c.searchQuery,e=>{clearTimeout(g);const t=e&&""!==e.trim()?150:50;g=setTimeout(()=>{m.value=e||""},t)},{flush:"post"});let f=null;const y=()=>(f||(f=L()),f),b=i,w=a([]),x=a(!1),S=a(!0),I=a([]),C=a(!1),A=[{label:"Workspaces",icon:"pi pi-fw pi-folder-open",items:[]},{label:"Документы",icon:"pi pi-fw pi-file",items:[]},{label:"Разработчикам",icon:"pi pi-fw pi-code",items:[{label:"API",icon:"pi pi-fw pi-server",url:"/app/api/v2/docs/",target:"_self"},{label:"Песочница",icon:"pi pi-fw pi-play",url:"/app/api/v2/sandbox",target:"_self"}]}],D=[{label:"Главная",icon:"pi pi-fw pi-home",items:[{label:"Добро пожаловать",icon:"pi pi-fw pi-home",to:"/"},{label:"О платформе",icon:"pi pi-fw pi-info-circle",to:"/about"}]},{label:"Начать работу",icon:"pi pi-fw pi-sign-in",items:[{label:"Вход",icon:"pi pi-fw pi-sign-in",to:"/login"},{label:"Регистрация",icon:"pi pi-fw pi-user-plus",to:"/register"}]}],E=()=>{try{const e=localStorage.getItem("apiBase");return!e||""===e||e===window.location.hostname||"localhost"===e||"app.integram.io"===e}catch(e){return $.error("Ошибка при чтении apiBase из localStorage:",e),!0}},T=async()=>{if(!C.value&&(localStorage.getItem("token")||localStorage.getItem("my_token")))try{const e=r.primaryUserId||localStorage.getItem("id")||"default-user";$.debug("Loading user workspaces...",{userId:e,authStorePrimaryUserId:r.primaryUserId,localStorageId:localStorage.getItem("id"),apiUrl:"http://localhost:8081"});const t=await Promise.resolve([]);I.value=t||[],C.value=!0,$.debug("Loaded workspaces:",{count:I.value.length,workspaces:I.value.map(e=>({id:e.id,name:e.name}))}),N()}catch(e){$.error("Failed to load user workspaces:",{error:e.message,stack:e.stack}),I.value=[],C.value=!0,N()}},N=()=>{let e=w.value.find(e=>"Workspaces"===e.label);e||(e={label:"Workspaces",icon:"pi pi-fw pi-folder-open",items:[]},w.value.unshift(e));const t=[{label:"Все Workspaces",icon:"pi pi-fw pi-list",to:"/workspaces"}];I.value.length>0&&I.value.forEach(e=>{t.push({label:e.name,icon:e.agentEnabled?"pi pi-fw pi-bolt":"pi pi-fw pi-folder",to:`/workspace/${e.id}`,workspaceId:e.id})}),e.items=t,$.debug("Workspaces section populated:",{itemCount:t.length})},O=async()=>{try{JSON.stringify(w.value);await Te()}catch(e){$.error("Error saving menu config:",e)}},P=(e,t)=>{for(let a=0;a<e.length;a++){if(e[a]===t)return{parent:e,index:a,item:e[a]};if(e[a].items){const l=P(e[a].items,t);if(l)return l}}return null},K=async e=>{const{item:t,newLabel:a}=e,l=t.label;if(t.label=a,t.id||t.dbId)try{await(i=t.id||t.dbId,o={label:a},{id:i,...o}),$.debug("Menu item renamed in database:",{id:t.id||t.dbId,newLabel:a}),y().add({severity:"success",summary:"Успешно",detail:"Пункт меню переименован",life:2e3})}catch(n){return $.error("Failed to rename menu item in database:",n),t.label=l,void y().add({severity:"error",summary:"Ошибка",detail:"Не удалось переименовать пункт меню в базе данных",life:3e3})}var i,o;await O()},R=async e=>{const t=P(w.value,e);if(t){const l=JSON.parse(JSON.stringify(e));l.label=`${e.label} (копия)`,delete l.id,delete l.dbId;const i=w.value.find(t=>t.items&&t.items.includes(e));if(i&&i.fromAppMenu)try{const e=await{label:l.label,path:l.to||"/",icon:l.icon||"pi pi-fw pi-file",group:i.label||"Страницы"};l.id=e.id,$.debug("Menu item duplicated in database:",e),y().add({severity:"success",summary:"Успешно",detail:"Пункт меню дублирован",life:2e3})}catch(a){return $.error("Failed to duplicate menu item in database:",a),void y().add({severity:"error",summary:"Ошибка",detail:"Не удалось дублировать пункт меню в базе данных",life:3e3})}t.parent.splice(t.index+1,0,l),await O()}},V=async e=>{e.visible=!1===e.visible,await O()},j=async e=>{const t=P(w.value,e);if(t){if(e.id||e.dbId)try{await(e.id||e.dbId,!0),$.debug("Menu item deleted from database:",{id:e.id||e.dbId}),y().add({severity:"success",summary:"Успешно",detail:"Пункт меню удалён",life:2e3})}catch(a){return $.error("Failed to delete menu item from database:",a),void y().add({severity:"error",summary:"Ошибка",detail:"Не удалось удалить пункт меню из базы данных",life:3e3})}t.parent.splice(t.index,1),await O()}},J=async e=>{e.items||(e.items=[]);const t={label:"Новый пункт",icon:"pi pi-fw pi-file",to:"/new-path"};if(e.fromAppMenu)try{const a=await{label:t.label,path:t.to,icon:t.icon,group:e.label||"Страницы"};t.id=a.id,$.debug("New menu item created in database:",a),y().add({severity:"success",summary:"Успешно",detail:"Новый пункт меню создан",life:2e3})}catch(a){return $.error("Failed to create menu item in database:",a),void y().add({severity:"error",summary:"Ошибка",detail:"Не удалось создать пункт меню в базе данных",life:3e3})}e.items.push(t),await O()},W=async()=>{S.value=!0,await(async()=>{try{return localStorage.getItem("token")?(x.value=!0,$.debug("User role detection (using default admin access):",{isAdmin:x.value}),x.value):($.warn("No authentication token found"),x.value=!1,!1)}catch(e){return $.error("Ошибка при проверке роли пользователя:",e),x.value=!1,!1}})(),$.debug("User role check:",{isAdmin:x.value,shouldShowBase:E()});let e=!1;if(x.value){const t=[];if(t)try{w.value=JSON.parse(t),e=!0,$.debug("Loaded custom menu from localStorage for admin")}catch(a){$.error("Error parsing local menu config:",a)}if(!e)try{const t=await Promise.resolve([]);t&&t.response&&t.response.config&&(w.value=JSON.parse(t.response.config),e=!0,$.debug("Loaded custom menu from server for admin"))}catch{}}if(e||(x.value&&E()?w.value=[...A]:w.value=[...D]),!localStorage.getItem("token")&&!localStorage.getItem("my_token"))return $.info("Non-authorized user detected, using public menu only"),void(S.value=!1);let t=w.value.find(e=>"Документы"===e.label);t||(w.value.push({label:"Документы",icon:"pi pi-fw pi-file",items:[{label:"Все страницы",icon:"pi pi-fw pi-list",to:"/pages"}]}),t=w.value[w.value.length-1]);try{let e=localStorage.getItem("my_token")||localStorage.getItem("token"),a=localStorage.getItem("my_xsrf")||localStorage.getItem("_xsrf");const l=localStorage.getItem("user")||localStorage.getItem("my_user");if(e&&l){const l=localStorage.getItem("apiBase")||window.location.hostname;U.setServer(`https://${l}`),U.setCredentials("my",e,a,"my");const i=await U.get("report/MyRoleMenu",{JSON_KV:!0});i&&Array.isArray(i)&&i.length>0&&(t.items=i.map(e=>({label:e.Name||e.Name,to:e.HREF||e.HREF,icon:"pi pi-fw pi-link"})),$.debug("Loaded MyRoleMenu items:",t.items.length))}}catch(l){$.error("Failed to load MyRoleMenu:",l)}S.value=!1},H=async e=>{const{draggedIndex:t,draggedParentKey:a,targetIndex:l,targetParentKey:i}=e;if(t===l&&a===i)return;const o=JSON.parse(JSON.stringify(w.value));if(!a&&!i){const e=o[t],a=["Документы","Workspaces"];if(a.includes(e.label)||a.includes(o[l].label))return void y().add({severity:"warn",summary:"Недоступно",detail:"Нельзя перемещать этот раздел (он генерируется автоматически)",life:3e3});o.splice(t,1);const i=t<l?l-1:l;return o.splice(i,0,e),w.value=o,void(await B())}const n=parseInt((null==a?void 0:a.split("-")[0])||"0"),s=parseInt((null==i?void 0:i.split("-")[0])||"0"),r=w.value[n],u=w.value[s],c=["Документы","Workspaces"];if(c.includes(null==r?void 0:r.label)||c.includes(null==u?void 0:u.label))return void y().add({severity:"warn",summary:"Недоступно",detail:"Нельзя перемещать элементы этого раздела (они генерируются автоматически)",life:3e3});const d=a?a.split("-").map(e=>parseInt(e)):[],m=i?i.split("-").map(e=>parseInt(e)):[];let p=o;for(let y=0;y<d.length;y++)p=p[d[y]].items;let v=o;for(let y=0;y<m.length;y++)v=v[m[y]].items;const g=p[t];p.splice(t,1);let f=l;a===i&&t<l&&f--,v.splice(f,0,g),w.value=o,await B()},B=async()=>{try{const e=["Документы","Workspaces"],t=w.value.filter(t=>!e.includes(t.label));JSON.stringify(t);await Te(),y().add({severity:"success",summary:"Сохранено",detail:"Порядок меню автоматически сохранён",life:2e3})}catch{y().add({severity:"error",summary:"Ошибка",detail:"Не удалось сохранить порядок меню",life:3e3})}};l(async()=>{await W(),await T()});const q=(e,t)=>e&&0!==e.length?e.reduce((e,a)=>{const l={...a};let i=!1;if(l.label&&l.label.toLowerCase().includes(t)&&(i=!0),l.items&&l.items.length>0){const e=q(l.items,t);e.length>0&&(l.items=e,i=!0)}return i&&e.push(l),e},[]):[],F=e(()=>{let e=w.value;if(m.value&&""!==m.value.trim()){const t=m.value.toLowerCase().trim();e=q(e,t)}return e});h(()=>c.searchQuery,async e=>{e&&""!==e.trim()&&(C.value||await T())});const Q=e(()=>{if(!m.value||""===m.value.trim())return 0;let e=0;const t=a=>{a.forEach(a=>{a.label&&e++,a.items&&t(a.items)})};return t(F.value),e});return h(w,e=>{b("menu-loaded",e)},{deep:!0,immediate:!0}),(e,a)=>{const l=p("ProgressSpinner");return S.value?(v(),o("div",Ne,[d(l)])):(v(),o("div",Oe,[m.value&&""!==m.value.trim()?(v(),o("div",Pe," Найдено: "+u(Q.value)+" элементов ",1)):s("",!0),n("ul",Ke,[(v(!0),o(M,null,_(F.value,(e,a)=>(v(),o(M,{key:e.label||a},[e.separator?s("",!0):(v(),k(Ee,{key:0,item:e,index:a,"search-query":m.value,collapsed:t.collapsed,onRename:K,onDuplicate:R,onToggleVisibility:V,onDelete:j,onAddChild:J,onDragDrop:H},null,8,["item","index","search-query","collapsed"])),e.separator?(v(),o("li",Re)):s("",!0)],64))),128))]),m.value&&""!==m.value.trim()&&0===F.value.length?(v(),o("div",Ve," Ничего не найдено ")):s("",!0)]))}}},Je={__name:"SmartSearchResults",props:{results:{type:Object,default:()=>({})},query:{type:String,default:""},loading:{type:Boolean,default:!1}},emits:["navigate"],setup:e=>(e,t)=>s("",!0)},$e={class:"sidebar-header"},ze={class:"sidebar-search p-3"},Ue={key:0,id:"smart-search-extras",class:"smart-search-extras"},We=J({__name:"AppSidebar",setup(t){const r=g(),{layoutState:u,toggleSidebarCollapse:f}=F(),y=a(""),k=a(null),x=a(null),S=a(!1),M=a([]),_=e=>{var t,a,l,i;if("/"!==e.key||e.ctrlKey||e.metaKey||e.altKey||"INPUT"!==(null==(t=document.activeElement)?void 0:t.tagName)&&"TEXTAREA"!==(null==(a=document.activeElement)?void 0:a.tagName)&&(e.preventDefault(),null==(i=null==(l=k.value)?void 0:l.$el)||i.focus()),"Escape"===e.key&&y.value&&(y.value=""),"ArrowDown"===e.key&&y.value&&A.value){e.preventDefault();const t=document.querySelector(".search-item");t&&t.focus()}};h(y,e=>{if(!e||""===e.trim())return x.value=null,void(S.value=!1);var t;S.value=!0,M.value,t=e=>{x.value=e,S.value=!1},setTimeout(()=>{t({routes:[],agents:[],"integrамResults":[],aiResults:[]})},100)},{flush:"post"}),h(()=>r.path,()=>{y.value=""}),h(()=>u.sidebarCollapsed,(e,t)=>{!0===t&&!1===e&&(y.value="")},{flush:"post"});const C=()=>{y.value=""},A=e(()=>!!x.value&&(x.value.routes.length>0||x.value.agents.length>0||x.value.integrамResults.length>0||x.value.aiResults.length>0));return l(()=>{document.addEventListener("keydown",_),y.value=""}),i(()=>{document.removeEventListener("keydown",_)}),(e,t)=>{const a=p("Button"),l=p("InputIcon"),i=p("InputText"),r=p("IconField"),g=b("tooltip");return v(),o("div",{class:c(["layout-sidebar",{"sidebar-collapsed":I(u).sidebarCollapsed}])},[n("div",$e,[w(d(a,{icon:I(u).sidebarCollapsed?"pi pi-angle-right":"pi pi-angle-left",onClick:I(f),class:"p-button-text p-button-rounded sidebar-toggle-btn","aria-label":"Переключить меню"},null,8,["icon","onClick"]),[[g,I(u).sidebarCollapsed?"Развернуть меню":"Свернуть меню",void 0,{right:!0}]])]),n("div",ze,[d(r,{iconPosition:"left"},{default:m(()=>[d(l,{class:"pi pi-search","aria-hidden":"true"}),d(i,{ref_key:"searchInputRef",ref:k,modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=e=>y.value=e),placeholder:"Поиск...",class:"w-full",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",role:"searchbox","aria-label":"Поиск по меню и страницам","aria-controls":"smart-search-extras"},null,8,["modelValue"])]),_:1})]),n("div",null,[d(je,{"search-query":y.value,collapsed:I(u).sidebarCollapsed,onMenuLoaded:t[1]||(t[1]=e=>M.value=e)},null,8,["search-query","collapsed"])]),A.value&&!I(u).sidebarCollapsed?(v(),o("div",Ue,[d(Je,{results:x.value,query:y.value,loading:S.value,onNavigate:C},null,8,["results","query","loading"])])):s("",!0)],2)}}},[["__scopeId","data-v-bcf7f825"]]),He=[{name:"blue",file:"/demo/images/dd2.svg",color:"#3b82f6",label:"Синий"},{name:"red",file:"/demo/images/dd3.svg",color:"#ef4444",label:"Красный"},{name:"green",file:"/demo/images/dd4.svg",color:"#22c55e",label:"Зелёный"},{name:"purple",file:"/demo/images/dd5.svg",color:"#a855f7",label:"Фиолетовый"},{name:"cyan",file:"/demo/images/dd6.svg",color:"#06b6d4",label:"Голубой"},{name:"pink",file:"/demo/images/dd7.svg",color:"#ec4899",label:"Розовый"},{name:"gray",file:"/demo/images/dd8.svg",color:"#6b7280",label:"Серый"}],Be=[{name:"cyan",color:"#06b6d4",label:"Голубой"},{name:"blue",color:"#3b82f6",label:"Синий"},{name:"indigo",color:"#6366f1",label:"Индиго"},{name:"violet",color:"#8b5cf6",label:"Фиолетовый"},{name:"purple",color:"#a855f7",label:"Пурпурный"},{name:"pink",color:"#ec4899",label:"Розовый"},{name:"red",color:"#ef4444",label:"Красный"},{name:"orange",color:"#f97316",label:"Оранжевый"},{name:"amber",color:"#f59e0b",label:"Янтарный"},{name:"yellow",color:"#eab308",label:"Жёлтый"},{name:"lime",color:"#84cc16",label:"Лайм"},{name:"green",color:"#22c55e",label:"Зелёный"},{name:"emerald",color:"#10b981",label:"Изумрудный"},{name:"teal",color:"#14b8a6",label:"Бирюзовый"},{name:"sky",color:"#0ea5e9",label:"Небесный"},{name:"slate",color:"#64748b",label:"Сланцевый"}],qe=a((()=>{if("undefined"==typeof window)return null;const e=localStorage.getItem("logoConfig");return e?JSON.parse(e):null})()||{type:"preset",preset:"orange",color:"cyan",customSvg:null});function Fe(){const t=()=>{"undefined"!=typeof window&&localStorage.setItem("logoConfig",JSON.stringify(qe.value))},a=e(()=>{if("dynamic"===qe.value.type){const e=Be.find(e=>e.name===qe.value.color);return(null==e?void 0:e.color)||"#06b6d4"}return null}),l=e(()=>"preset"===qe.value.type?He.find(e=>e.name===qe.value.preset):null),i=e(()=>"custom"===qe.value.type),o=e(()=>"preset"===qe.value.type),n=e(()=>"dynamic"===qe.value.type),s=e(()=>"custom"===qe.value.type&&qe.value.customSvg?qe.value.customSvg:null);return{logoConfig:qe,presetLogos:He,dynamicLogoColors:Be,setPresetLogo:e=>{qe.value={type:"preset",preset:e,color:null,customSvg:null},t()},setDynamicColor:e=>{qe.value={type:"dynamic",preset:null,color:e,customSvg:null},t()},setCustomLogo:e=>{qe.value={type:"custom",preset:null,color:null,customSvg:e},t()},resetLogo:()=>{qe.value={type:"preset",preset:"orange",color:null,customSvg:null},t()},getCurrentColor:a,getCurrentPreset:l,isCustomLogo:i,isPresetLogo:o,isDynamicLogo:n,getLogoSvg:s}}const Qe=["innerHTML"],Ge=["src","alt"],Xe=["width","height"],Ye={transform:"translate(0 -20)"},Ze=["fill"],et=["fill"],tt=["fill"],at=["fill"],lt=["fill"],it=["fill"],ot=["fill"],nt=J({__name:"LogoDisplay",props:{width:{type:String,default:"200"},height:{type:String,default:"40"}},setup(t){const{getCurrentColor:a,getCurrentPreset:l,isCustomLogo:i,isPresetLogo:s,getLogoSvg:r}=Fe(),u=e(()=>a.value||"var(--primary-color)");return(e,a)=>I(i)&&I(r)?(v(),o("div",{key:0,innerHTML:I(r),class:"custom-logo-container"},null,8,Qe)):I(s)&&I(l)?(v(),o("img",{key:1,src:I(l).file,alt:I(l).label,style:D({height:t.height+"px",width:"auto"}),class:"preset-logo"},null,12,Ge)):(v(),o("svg",{key:2,width:t.width,height:t.height,viewBox:"0 0 512 60",xmlns:"http://www.w3.org/2000/svg",style:{overflow:"visible"}},[n("g",Ye,[n("path",{d:"M7.67 16.58c3.08-.62 6.22-.99 9.37-.9 8.94.14 18.1-.65 26.82 1.77 7.63 2.86 14.49 8.13 18.76 15.12 6.42 11.56 6.29 26.83-1.41 37.77-4.52 6.21-10.87 11.26-18.29 13.5-2.86.96-5.83 1.72-8.88 1.65-8.82-.05-17.64.05-26.46-.14-.06-4.25-.05-8.5-.03-12.74 7.81-.08 15.62.02 23.43.01 9.06.55 17.61-5.5 21.44-13.51.11-.52.31-1.58.42-2.11 1.44-5.52 1.18-11.77-1.68-16.82-2.57-4.85-7.06-8.47-12.1-10.53-10.38-1.97-20.99-.41-31.48-1.08.09-4 .1-8 .09-11.99z",fill:u.value},null,8,Ze),n("path",{d:"M78.36 16.41c10.56.19 21.15-.38 31.69.36 1.32.4 2.65.73 4 1.06 7.81 2.09 14.51 8.11 16.31 16.16 1.08 7.14-1.82 14.45-7.12 19.27-1.72 1.67-4.5 2.86-3.99 5.71 4.92 3.24 7.89 8.65 9.92 14.03.32.97.64 1.94.97 2.9 1.36 3.15 2.86 6.25 3.76 9.57-5.04.03-10.07.01-15.11-.05-.84-2.52-1.69-5.04-2.53-7.56-.48-1.27-.94-2.54-1.39-3.81-1.81-4.52-5.3-8.04-9.51-10.37-8.86-2-17.8.17-26.74-.3-.27-1.1-.52-2.2-.78-3.29.67-3.17.48-6.42.44-9.63 5.82-1.29 11.86-.77 17.76-.35 3.65-.23 7.29-.56 10.94-.86 1.1-.35 2.21-.67 3.32-.96 1.74-1.3 3.37-2.73 4.91-4.26.38-.99.77-1.98 1.17-2.95.04-1.81.06-3.61.1-5.41-1.78-2.31-3.88-4.35-6.2-6.1-10.63-.51-21.27-.12-31.9-.15-.11-4.34-.09-8.68-.02-13.01z",fill:u.value},null,8,et),n("path",{d:"M158.05 19.37c7.46-4.61 16.58-4.51 25.01-3.68 9.98 1.95 19.03 8.35 23.97 17.27 4.9 8.53 5.81 19.07 3.22 28.47-5.47 19.22-28.89 30.28-47.37 22.84-9.98-3.86-18.62-11.81-22.2-22.02-1.83-5.57-2.89-11.63-1.36-17.39 2.03-10.78 9.53-19.9 18.73-25.49z",fill:u.value},null,8,tt),a[0]||(a[0]=n("path",{class:"pulsing-path",d:"m 169.00438,40.595867 c 2.62405,-1.508147 5.83199,-1.475432 8.79723,-1.2039 3.51045,0.637936 6.69378,2.731675 8.43141,5.649823 1.72357,2.790562 2.04366,6.238688 1.13263,9.313867 -1.92406,6.28776 -10.16201,9.906002 -16.66232,7.472031 -3.51045,-1.262787 -6.54956,-3.863603 -7.80882,-7.203771 -0.6437,-1.822207 -1.01655,-3.804716 -0.47838,-5.689081 0.71405,-3.526641 3.35217,-6.510219 6.58825-8.338969 z",fill:"var(--surface-card)",id:"svg_5-3",opacity:"1",style:{fill:"var(--surface-card)"}},null,-1)),n("path",{d:"M267.64 16.52c4.57-.23 9.15-.21 13.72.01.12 22.65.09 45.3-.02 67.94-2.92 2.07-7.22.39-10.68.97-8.66-10.49-16.56-21.59-24.86-32.37-2.59-3.69-5.78-6.94-8.14-10.8-.45 1.87-1.02 3.75-.96 5.7-.1 12.48.11 24.96-.15 37.44-4.33-.26-8.84.58-13.02-.9.26-22.66-.03-45.34-.01-68 3.22-.04 6.43-.05 9.65-.03 11.62 13.06 21.97 27.18 32.72 40.96.37.02 1.1.07 1.46.09.27-13.67.16-27.34.29-41.01z",fill:u.value},null,8,at),n("path",{d:"M293.62 16.46c6.13-.2 12.26-.07 18.39-.09 5.69.11 11.53-.44 17.02 1.42 9.76 3.45 17.85 11.27 21.28 21.08 2.57 10.12 2.65 21.91-3.73 30.7-5.37 8.13-14.08 13.67-23.55 15.72-9.56.39-19.13.01-28.7.18-.12-4.32-.11-8.64.02-12.95 7.9.04 15.8.12 23.7.04 2.12.04 4.14-.61 6.15-1.2 5.82-2.2 10.64-6.52 13.23-12.21 1.82-4.87 1.35-10.15.91-15.22-2.43-6.84-7.88-12.76-15.2-14.21-9.8-1.43-19.87.65-29.61-1.16.14-4.03.12-8.07.09-12.1z",fill:u.value},null,8,lt),n("path",{d:"M378.34 21.17c8.25-5.8 18.94-6.86 28.64-5.05 2.04.52 4.04 1.2 5.98 2.04 8.24 3.7 15.46 10.43 18.87 18.88.47 1.3.93 2.6 1.42 3.9 2.1 8.33 2.07 17.47-1.86 25.28-4.18 7.91-10.89 14.7-19.28 18.06-7.69 2.85-16.26 3.08-24.16.97-8.75-2.63-16.01-8.89-20.97-16.42-4.96-7.93-5.63-17.83-3.82-26.8.12-.53.38-1.59.5-2.12 2.63-7.67 8.27-13.96 14.68-18.74z",fill:u.value},null,8,it),n("path",{d:"M445.77 39.99c5.84-14.09 20.79-24.4 36.22-23.48 6.96 0 13.92.02 20.89-.06.47 4.3 1.12 8.81-.21 13.02-9.19-.09-18.44-.54-27.6.28-1.04.37-2.09.73-3.13 1.06-6.94 2.86-12.34 8.88-14.28 16.15-.46 4.42-.51 8.96.97 13.21 1.33 2.33 2.8 4.59 4.39 6.76 2.69 2.22 5.59 4.18 8.87 5.41 10.31.32 20.62.17 30.93.11.59 4.32.88 8.79-.15 13.07-7.87-.13-15.75-.26-23.62-.2-4.36.06-8.79-.38-12.9-1.86-10.09-4.25-17.46-13.34-21.03-23.53-2.11-6.57-1.41-13.47.65-19.94z",fill:u.value},null,8,ot)])],8,Xe))}},[["__scopeId","data-v-9702941f"]]),st=["width","height"],rt={__name:"FlagRU",props:{width:{type:[String,Number],default:24},height:{type:[String,Number],default:16}},setup:e=>(t,a)=>(v(),o("svg",{width:e.width,height:e.height,viewBox:"0 0 900 600",xmlns:"http://www.w3.org/2000/svg"},[...a[0]||(a[0]=[n("rect",{fill:"#fff",width:"900",height:"600"},null,-1),n("rect",{fill:"#0039a6",y:"200",width:"900",height:"200"},null,-1),n("rect",{fill:"#d52b1e",y:"400",width:"900",height:"200"},null,-1)])],8,st))},ut=["width","height"],ct={__name:"FlagGB",props:{width:{type:[String,Number],default:24},height:{type:[String,Number],default:16}},setup:e=>(t,a)=>(v(),o("svg",{width:e.width,height:e.height,viewBox:"0 0 60 30",xmlns:"http://www.w3.org/2000/svg"},[...a[0]||(a[0]=[E('<clipPath id="s"><path d="M0,0 v30 h60 v-30 z"></path></clipPath><clipPath id="t"><path d="M30,15 h30 v15 z v15 h-30 z h-30 v-15 z v-15 h30 z"></path></clipPath><g clip-path="url(#s)"><path d="M0,0 v30 h60 v-30 z" fill="#012169"></path><path d="M0,0 L60,30 M60,0 L0,30" stroke="#fff" stroke-width="6"></path><path d="M0,0 L60,30 M60,0 L0,30" clip-path="url(#t)" stroke="#C8102E" stroke-width="4"></path><path d="M30,0 v30 M0,15 h60" stroke="#fff" stroke-width="10"></path><path d="M30,0 v30 M0,15 h60" stroke="#C8102E" stroke-width="6"></path></g>',3)])],8,ut))},dt=["width","height"],mt={__name:"FlagCN",props:{width:{type:[String,Number],default:24},height:{type:[String,Number],default:16}},setup:e=>(t,a)=>(v(),o("svg",{width:e.width,height:e.height,viewBox:"0 0 900 600",xmlns:"http://www.w3.org/2000/svg"},[...a[0]||(a[0]=[E('<defs><path id="star" d="M0,-1 L0.58778,0.80902 L-0.95106,-0.30902 L0.95106,-0.30902 L-0.58778,0.80902 z" fill="#ffde00"></path></defs><rect fill="#de2910" width="900" height="600"></rect><use href="#star" transform="translate(150,150) scale(60)"></use><use href="#star" transform="translate(240,60) scale(20) rotate(23.036243)"></use><use href="#star" transform="translate(270,120) scale(20) rotate(45.869898)"></use><use href="#star" transform="translate(270,180) scale(20) rotate(69.945396)"></use><use href="#star" transform="translate(240,240) scale(20) rotate(20.659808)"></use>',7)])],8,dt))},pt={class:"language-switcher"},vt=["title"],gt={class:"flag-display"},ft={class:"language-menu"},yt=["onClick"],ht={class:"flag-display"},bt={class:"locale-name"},wt={key:0,class:"pi pi-check check-icon"},kt=J({__name:"LanguageSwitcher",setup(t){const{locale:l}=T(),i=[{code:"ru",name:"Русский",flagComponent:rt},{code:"en",name:"English",flagComponent:ct},{code:"zh",name:"中文",flagComponent:mt}],r=a(l.value),g=a(),f=e(()=>i.find(e=>e.code===r.value)||i[0]),y=e=>{g.value.toggle(e)};return h(l,e=>{r.value=e}),(e,t)=>{const a=p("Popover");return v(),o("div",pt,[n("button",{onClick:y,class:"language-button",title:f.value.name,type:"button"},[n("span",gt,[(v(),k(N(f.value.flagComponent),{width:20,height:14}))])],8,vt),d(a,{ref_key:"op",ref:g,class:"language-popover"},{default:m(()=>[n("div",ft,[(v(),o(M,null,_(i,e=>n("button",{key:e.code,onClick:t=>((e=>{l.value=e,r.value=e,localStorage.setItem("locale",e),document.documentElement.setAttribute("lang",e)})(e.code),void g.value.hide()),class:c(["language-item",{active:r.value===e.code}]),type:"button"},[n("span",ht,[(v(),k(N(e.flagComponent),{width:20,height:14}))]),n("span",bt,u(e.name),1),r.value===e.code?(v(),o("i",wt)):s("",!0)],10,yt)),64))])]),_:1},512)])}}},[["__scopeId","data-v-0522c1ac"]]),xt=O("workspaceAgent",()=>{const t=a([]),l=e(()=>t.value.length),i=e(()=>t.value.length>0);return{runningAgents:t,runningAgentsCount:l,hasActiveAgents:i}}),St={class:"layout-topbar"},It={class:"layout-topbar-logo-container"},Mt={class:"layout-topbar-actions"},_t={class:"layout-config-menu"},Ct=["title"],At=["title"],Lt=["title"],Dt={class:"layout-topbar-menu-button layout-topbar-action"},Et={class:"layout-topbar-menu hidden lg:block"},Tt={class:"layout-topbar-menu-content"},Nt=["title"],Ot=["title"],Pt=["title"],Kt={key:1,class:"pi pi-user"},Rt=J({__name:"AppTopbar",emits:["chat-toggle"],setup(t,{emit:r}){const g=R(()=>V(()=>import("./AppConfigurator-BfPuxXqu.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),f=R(()=>V(()=>import("./Profile-D77AroWd.js"),__vite__mapDeps([12,1,2,5,6,7,3,13]))),y=R(()=>V(()=>import("./NotificationCenter-DpL_kbrR.js"),__vite__mapDeps([14,1,2,3,15]))),x=R(()=>V(()=>import("./AgentStatusPanel-BReYKwIn.js"),__vite__mapDeps([16,1,2,3,4,5,6,7,8,9,10,17]))),{t:S}=T(),{toggleMenu:M,toggleDarkMode:_,isDarkTheme:C}=F(),{unreadCount:A}={notifications:a([]),unreadCount:a(0),markAsRead:()=>{},clearAll:()=>{}},{setInterval:L}=W();let D;try{D=xt()}catch(se){D=null}const E=a(),N=a(!1),O=a(!1),j=a(!1),J=a(localStorage.getItem("currentUserPhoto")||""),$=r,z=e(()=>(null==D?void 0:D.runningAgentsCount)||0),U=e(()=>(null==D?void 0:D.hasActiveAgents)||!1),H=()=>{N.value=!N.value},B=()=>{O.value=!O.value},q=()=>{j.value=!j.value},Q=a("true"===localStorage.getItem("chat")),G=()=>{const e=!("true"===localStorage.getItem("chat"));localStorage.setItem("chat",e.toString()),Q.value=e,$("chat-toggle",e)},X=e=>{"chat"===e.key&&(Q.value="true"===e.newValue)},Y=()=>{const e=document.querySelector("link[rel*='icon']");e&&(e.href=C.value?"/app/meta/icon2.svg":"/app/meta/icon1.svg?upd")},Z=e(()=>C.value?S("theme.light","Включить светлую"):S("theme.dark","Включить тёмную")),ee=e(()=>S("theme.settings","Настройки темы")),te=e(()=>S("notifications.title","Уведомления")),ae=e(()=>S("nav.chat","Чат")),le=e(()=>S("nav.profile","Профиль")),ie=e(()=>{const e=z.value;return 0===e?S("agents.noRunning","Нет запущенных агентов"):S("agents.running","Запущено агентов")+`: ${e}`});h(C,Y);const oe=()=>{J.value=localStorage.getItem("currentUserPhoto")||""},ne=e=>{"currentUserPhoto"===e.key&&oe()};return l(()=>{Y(),window.addEventListener("storage",X),window.addEventListener("storage",ne),L(oe,3e3)}),i(()=>{window.removeEventListener("storage",X),window.removeEventListener("storage",ne)}),(e,t)=>{const a=p("router-link"),l=b("styleclass");return v(),o("div",St,[n("div",It,[n("button",{class:"layout-menu-button layout-topbar-action",onClick:t[0]||(t[0]=(...e)=>I(M)&&I(M)(...e))},[...t[9]||(t[9]=[n("i",{class:"pi pi-bars"},null,-1)])]),d(a,{to:"/",class:"layout-topbar-logo"},{default:m(()=>[d(nt,{width:"200",height:"40"})]),_:1})]),n("div",Mt,[n("div",_t,[d(kt),n("button",{type:"button",class:"layout-topbar-action relative",onClick:B,title:ie.value},[n("i",{class:c(["pi pi-bolt",{"agent-active":U.value}])},null,2),z.value>0?(v(),k(I(P),{key:0,value:z.value>99?"99+":z.value.toString(),severity:U.value?"success":"secondary",class:"agent-badge-topbar"},null,8,["value","severity"])):s("",!0)],8,Ct),n("button",{type:"button",class:"layout-topbar-action",onClick:t[1]||(t[1]=(...e)=>I(_)&&I(_)(...e)),title:Z.value},[n("i",{class:c(["pi",{"pi-moon":I(C),"pi-sun":!I(C)}])},null,2)],8,At),n("button",{type:"button",class:"layout-topbar-action layout-topbar-action-highlight",onClick:q,title:ee.value},[...t[10]||(t[10]=[n("i",{class:"pi pi-palette"},null,-1)])],8,Lt)]),w((v(),o("button",Dt,[...t[11]||(t[11]=[n("i",{class:"pi pi-ellipsis-v"},null,-1)])])),[[l,{selector:"@next",enterFromClass:"hidden",enterActiveClass:"animate-scalein",leaveToClass:"hidden",leaveActiveClass:"animate-fadeout",hideOnOutsideClick:!0}]]),n("div",Et,[n("div",Tt,[n("button",{onClick:H,type:"button",class:"layout-topbar-action relative",title:te.value},[t[12]||(t[12]=n("i",{class:"pi pi-bell"},null,-1)),I(A)>0?(v(),k(I(P),{key:0,value:I(A)>99?"99+":I(A).toString(),severity:"danger",class:"notification-badge-topbar"},null,8,["value"])):s("",!0),n("span",null,u(e.$t("notifications.title","Уведомления")),1)],8,Nt),n("button",{onClick:G,type:"button",class:c(["layout-topbar-action",{active:Q.value}]),title:ae.value},[t[13]||(t[13]=n("i",{class:"pi pi-comments"},null,-1)),n("span",null,u(e.$t("nav.chat","Чат")),1)],10,Ot),n("button",{onClick:t[2]||(t[2]=e=>{return t=e,void(E.value&&"function"==typeof E.value.toggle&&E.value.toggle(t));var t}),type:"button",class:"layout-topbar-action",title:le.value},[J.value?(v(),k(I(K),{key:0,image:J.value,shape:"circle",class:"topbar-avatar"},null,8,["image"])):(v(),o("i",Kt)),n("span",null,u(e.$t("nav.profile","Профиль")),1)],8,Pt)])])]),d(I(f),{ref_key:"profileOverlay",ref:E},null,512),d(I(y),{visible:N.value,"onUpdate:visible":t[3]||(t[3]=e=>N.value=e),onClose:t[4]||(t[4]=e=>N.value=!1)},null,8,["visible"]),d(I(x),{visible:O.value,"onUpdate:visible":t[5]||(t[5]=e=>O.value=e),onClose:t[6]||(t[6]=e=>O.value=!1)},null,8,["visible"]),d(I(g),{visible:j.value,"onUpdate:visible":t[7]||(t[7]=e=>j.value=e),onClose:t[8]||(t[8]=e=>j.value=!1)},null,8,["visible"])])}}},[["__scopeId","data-v-299355cc"]]),Vt={__name:"CookieConsentBanner",setup:e=>(e,t)=>s("",!0)},jt={class:"layout-main"},Jt={__name:"AppLayout",setup(t){const r=R(()=>V(()=>import("./Chat-BODX9HTF.js"),__vite__mapDeps([18,1,2,3,19]))),u=R(()=>V(()=>import("./ReleaseNotesModal-Bb_LJ3uA.js"),__vite__mapDeps([20,1,2]))),f=g(),{layoutConfig:y,layoutState:b,isSidebarActive:w}=F(),x=e(()=>(null==f?void 0:f.fullPath)||"/"),S=a(null),_=a(!1),C=a(parseInt(localStorage.getItem("chatWidth"))||320),L=a(!1),E=a(null),T=a(null);l(()=>{const e=window.localStorage.getItem("chat");null===e?(_.value=!("undefined"!=typeof window&&window.innerWidth<=960),window.localStorage.setItem("chat",JSON.stringify(_.value))):_.value=JSON.parse(e),T.value=e=>{"chat"===e.key&&(_.value=!!e.newValue&&JSON.parse(e.newValue)),"chatWidth"===e.key&&(C.value=parseInt(e.newValue)||320)},window.addEventListener("storage",T.value),E.value=setInterval(()=>{const e=parseInt(localStorage.getItem("chatWidth"))||320;e!==C.value&&(C.value=e)},100),setTimeout(()=>{const e=Q,t=localStorage.getItem("lastSeenVersion");t&&t===e||(L.value=!0)},1e3)}),i(()=>{E.value&&clearInterval(E.value),T.value&&window.removeEventListener("storage",T.value)}),h(w,e=>{e?S.value||(S.value=e=>{(function(e){const t=document.querySelector(".layout-sidebar"),a=document.querySelector(".layout-menu-button");return!(t.isSameNode(e.target)||t.contains(e.target)||a.isSameNode(e.target)||a.contains(e.target))})(e)&&(b.overlayMenuActive=!1,b.staticMenuMobileActive=!1,b.menuHoverActive=!1)},document.addEventListener("click",S.value)):S.value&&(document.removeEventListener("click",S.value),S.value=null)});const N=e(()=>({"layout-overlay":"overlay"===y.menuMode,"layout-static":"static"===y.menuMode,"layout-static-inactive":b.staticMenuDesktopInactive&&"static"===y.menuMode,"layout-overlay-active":b.overlayMenuActive,"layout-mobile-active":b.staticMenuMobileActive,"chat-active":_.value&&"static"===y.menuMode,"sidebar-collapsed":b.sidebarCollapsed})),O=e=>{_.value=e,window.localStorage.setItem("chat",JSON.stringify(e))},P=e(()=>(C.value+32+32)/16+"rem");return(e,t)=>{const a=p("Toast");return v(),o(M,null,[n("div",{class:c(["layout-wrapper",N.value])},[d(Rt,{onChatToggle:O}),d(We),d(A,{name:"slide-in-right"},{default:m(()=>[_.value?(v(),k(j,{key:0},{fallback:m(()=>[...t[1]||(t[1]=[n("div",{class:"chat-loading"},null,-1)])]),default:m(()=>[d(I(r))]),_:1})):s("",!0)]),_:1}),n("div",{class:"layout-main-container",style:D(_.value&&"static"===I(y).menuMode?{marginRight:P.value}:{})},[n("div",jt,[(v(),k(H,{key:x.value}))]),d(re)],4),t[2]||(t[2]=n("div",{class:"layout-mask animate-fadein"},null,-1))],2),d(a),(v(),k(j,null,{fallback:m(()=>[...t[3]||(t[3]=[n("span",null,null,-1)])]),default:m(()=>[d(I(u),{visible:L.value,"onUpdate:visible":t[0]||(t[0]=e=>L.value=e)},null,8,["visible"])]),_:1})),d(Vt)],64)}}},$t=Object.freeze(Object.defineProperty({__proto__:null,default:Jt},Symbol.toStringTag,{value:"Module"}));export{$t as A,Fe as a,xt as b,F as u};
