import{_ as S,h as y,o as a,w as v,a as t,c as l,F as k,r as C,t as d,g as w,A as B,I as f,d as x,G as z,cz as P}from"./index-BrdfL8RF.js";import{b}from"./AppLayout-DFKErA5i.js";import"./logger-CLWPjr6Q.js";import"./authStore-VcBwMo7V.js";import"./index-B9ygI19o.js";import"./unifiedAuthService-xCuNj-Bd.js";import"./integramApiClient-C3_j8SPw.js";import"./useTimer-BBbej_UZ.js";import"./SafeRouterView-ID1VOhSZ.js";const D={__name:"AgentStatusPanel",props:{visible:{type:Boolean,default:!1}},emits:["close","update:visible"],setup(c,{expose:s,emit:u}){s();const n=c,m=u,i=b(),e=f(()=>i.runningAgents||[]),g={props:n,emit:m,workspaceAgentStore:i,runningAgents:e,getStatusClass:o=>({running:"status-running",stopped:"status-stopped",error:"status-error"})[o]||"",stopAgent:async o=>{try{await i.stopAgent(o)}catch(r){console.error("Failed to stop agent:",r)}},formatTime:o=>{const r=new Date(o),_=new Date-r,p=Math.floor(_/6e4),h=Math.floor(_/36e5);return p<1?"только что":p<60?`${p} мин назад`:`${h} ч назад`},ref:x,computed:f,get useWorkspaceAgentStore(){return b},get Sidebar(){return P},get Button(){return z}};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}},F={class:"agent-status-content"},I={key:0,class:"empty-state"},T={key:1,class:"agents-list"},M={class:"agent-header"},N={class:"agent-info"},V={class:"agent-details"},W={class:"detail-item"},j={class:"detail-value"},E={class:"detail-item"},G={class:"detail-value"},L={class:"agent-actions"};function O(c,s,u,n,m,i){return a(),y(n.Sidebar,{visible:u.visible,"onUpdate:visible":s[0]||(s[0]=e=>c.$emit("update:visible",e)),position:"right",showCloseIcon:!0,class:"agent-status-sidebar"},{header:v(()=>[...s[1]||(s[1]=[t("h3",null,"Статус агентов",-1)])]),default:v(()=>[t("div",F,[n.runningAgents.length===0?(a(),l("div",I,[...s[2]||(s[2]=[t("i",{class:"pi pi-bolt",style:{"font-size":"3rem",color:"var(--text-color-secondary)"}},null,-1),t("p",null,"Нет запущенных агентов",-1)])])):(a(),l("div",T,[(a(!0),l(k,null,C(n.runningAgents,e=>(a(),l("div",{key:e.id,class:"agent-item"},[t("div",M,[s[3]||(s[3]=t("div",{class:"agent-icon"},[t("i",{class:"pi pi-bolt"})],-1)),t("div",N,[t("h4",null,d(e.name),1),t("span",{class:w(["agent-status",n.getStatusClass(e.status)])},d(e.status),3)])]),t("div",V,[t("div",W,[s[4]||(s[4]=t("span",{class:"detail-label"},"Тип:",-1)),t("span",j,d(e.type),1)]),t("div",E,[s[5]||(s[5]=t("span",{class:"detail-label"},"Запущен:",-1)),t("span",G,d(n.formatTime(e.startedAt)),1)])]),t("div",L,[B(n.Button,{label:"Остановить",icon:"pi pi-stop",size:"small",severity:"danger",outlined:"",onClick:A=>n.stopAgent(e.id)},null,8,["onClick"])])]))),128))]))])]),_:1},8,["visible"])}const st=S(D,[["render",O],["__scopeId","data-v-d1b3351d"],["__file","/home/hive/integram-standalone/src/components/AgentStatusPanel.vue"]]);export{st as default};
