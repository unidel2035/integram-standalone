import{_ as g,c as i,A as o,w as b,K as _,d as p,I as f,G as y,$ as k,a3 as T,aq as M,o as n,a as s,f as a,t as d,h as B,F as C,r as I}from"./index-B4X-KBPT.js";import{u as v,M as V,a as z}from"./MentionDisplay-C2_f0qKB.js";import"./useTimer-rFA0hy1q.js";import"./integramApiClient-C3_j8SPw.js";import"./index-B9ygI19o.js";import"./unifiedAuthService-xCuNj-Bd.js";const w={__name:"MentionTestPage",setup(x,{expose:t}){t();const m=_(),e=p(m.params.database||"my"),u=p(""),{parseMentions:c}=v(e.value),l=f(()=>c(u.value)),r={route:m,database:e,testText:u,parseMentions:c,mentions:l,ref:p,computed:f,get useRoute(){return _},get Card(){return M},get Message(){return T},get Badge(){return k},get Button(){return y},MentionAutocomplete:z,MentionDisplay:V,get useUserMentions(){return v}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},D={class:"mention-test-page p-4"},P={class:"mb-4"},U={class:"grid"},A={class:"col-12 md:col-6"},N={class:"field"},S={class:"field"},F={class:"p-3 surface-100 border-round"},R={class:"text-sm"},j={class:"col-12 md:col-6"},q={class:"field"},E={class:"p-3 surface-50 border-round border-1 surface-border"},G={key:1,class:"text-500"},K={class:"field"},L={class:"p-3 surface-100 border-round"},O={key:0,class:"text-500 text-sm"},H={key:1,class:"flex flex-column gap-2"},J={class:"text-500"},Q={class:"mt-4"},W={class:"flex flex-wrap gap-2"},X={class:"mt-4 p-3 surface-100 border-round"},Y={class:"text-sm"};function Z(x,t,m,e,u,c){return n(),i("div",D,[o(e.Card,null,{title:b(()=>[...t[5]||(t[5]=[s("div",{class:"flex align-items-center gap-2"},[s("i",{class:"pi pi-at text-primary"}),s("span",null,"Тест упоминаний пользователей (@mentions)")],-1)])]),content:b(()=>[s("div",P,[o(e.Message,{severity:"info"},{default:b(()=>[...t[6]||(t[6]=[s("p",{class:"mb-2"},[s("strong",null,"Как использовать:")],-1),s("ul",{class:"ml-3 mb-0"},[s("li",null,[a("Введите "),s("code",null,"@"),a(" в текстовом поле")]),s("li",null,"Выберите пользователя из выпадающего списка"),s("li",null,[a("Упоминание сохраняется в формате "),s("code",null,"@{'{database}'}_{'{userId}'}")]),s("li",null,"В режиме отображения упоминания показываются с фото и именем")],-1)])]),_:1})]),s("div",U,[s("div",A,[t[9]||(t[9]=s("h3",{class:"text-lg font-semibold mb-3"},[s("i",{class:"pi pi-pencil mr-2"}),a(" Режим редактирования ")],-1)),s("div",N,[t[7]||(t[7]=s("label",{for:"mention-input",class:"block mb-2"},"Текст с упоминаниями:",-1)),o(e.MentionAutocomplete,{id:"mention-input",modelValue:e.testText,"onUpdate:modelValue":t[0]||(t[0]=l=>e.testText=l),database:e.database,placeholder:"Введите текст и попробуйте @упомянуть пользователя..."},null,8,["modelValue","database"])]),s("div",S,[t[8]||(t[8]=s("label",{class:"block mb-2"},"Сырое значение:",-1)),s("div",F,[s("code",R,d(e.testText||"(пусто)"),1)])])]),s("div",j,[t[12]||(t[12]=s("h3",{class:"text-lg font-semibold mb-3"},[s("i",{class:"pi pi-eye mr-2"}),a(" Режим отображения ")],-1)),s("div",q,[t[10]||(t[10]=s("label",{class:"block mb-2"},"Отображение в таблице:",-1)),s("div",E,[e.testText?(n(),B(e.MentionDisplay,{key:0,text:e.testText,database:e.database},null,8,["text","database"])):(n(),i("span",G,"(пусто)"))])]),s("div",K,[t[11]||(t[11]=s("label",{class:"block mb-2"},"Информация об упоминаниях:",-1)),s("div",L,[e.mentions.length===0?(n(),i("div",O," Упоминаний не найдено ")):(n(),i("div",H,[(n(!0),i(C,null,I(e.mentions,(l,r)=>(n(),i("div",{key:r,class:"flex align-items-center gap-2 text-sm"},[o(e.Badge,{value:l.database,severity:"info",size:"small"},null,8,["value"]),s("span",null,"User ID: "+d(l.userId),1),s("span",J,d(l.full),1)]))),128))]))])])])]),s("div",Q,[t[13]||(t[13]=s("h3",{class:"text-lg font-semibold mb-3"},[s("i",{class:"pi pi-sparkles mr-2"}),a(" Примеры для тестирования ")],-1)),s("div",W,[o(e.Button,{label:"Простое упоминание",size:"small",outlined:"",onClick:t[1]||(t[1]=l=>e.testText="Привет, @my_1!")}),o(e.Button,{label:"Множественные упоминания",size:"small",outlined:"",onClick:t[2]||(t[2]=l=>e.testText="Команда: @my_1, @my_2 и @my_3 работают над проектом")}),o(e.Button,{label:"Смешанный текст",size:"small",outlined:"",onClick:t[3]||(t[3]=l=>e.testText="Задача назначена на @my_1. Копия для @my_2. Срок до 01.01.2025.")}),o(e.Button,{label:"Очистить",size:"small",severity:"secondary",onClick:t[4]||(t[4]=l=>e.testText="")})])]),s("div",X,[s("div",Y,[t[14]||(t[14]=s("strong",null,"Текущая БД:",-1)),t[15]||(t[15]=a()),s("code",null,d(e.database),1),t[16]||(t[16]=s("span",{class:"ml-3 text-500"}," (Пользователи загружаются из таблицы 18) ",-1))])])]),_:1})])}const os=g(w,[["render",Z],["__scopeId","data-v-ecafb7b4"],["__file","/home/hive/integram-standalone/src/views/pages/Integram/MentionTestPage.vue"]]);export{os as default};
