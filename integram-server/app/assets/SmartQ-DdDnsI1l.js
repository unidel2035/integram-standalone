import{_ as w,c,o as l,y as h,u as A,A as i,w as q,V as E,K as B,L as P,I as Q,d as _,U as x,b as L,a as d,h as M,t as y,j as F,f as K}from"./index-BrdfL8RF.js";import{I as G}from"./IntegramBreadcrumb-bt1ieLIm.js";import"./integramApiClient-C3_j8SPw.js";import"./index-B9ygI19o.js";import"./unifiedAuthService-xCuNj-Bd.js";const H={__name:"SmartQTable",setup(a,{expose:t}){t();const o={};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}};function J(a,t,o,e,b,g){return l(),c("div",null,"SmartQTable Component Placeholder")}const W=w(H,[["render",J],["__file","/home/hive/integram-standalone/src/components/SmartQTable.vue"]]),X={__name:"SmartQReportList",setup(a,{expose:t}){t();const o={};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}};function Y(a,t,o,e,b,g){return l(),c("div",null,"SmartQReportList Component Placeholder")}const Z=w(X,[["render",Y],["__file","/home/hive/integram-standalone/src/components/SmartQReportList.vue"]]),$={__name:"SmartQReportEditor",setup(a,{expose:t}){t();const o={};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}};function ee(a,t,o,e,b,g){return l(),c("div",null,"SmartQReportEditor Component Placeholder")}const te=w($,[["render",ee],["__file","/home/hive/integram-standalone/src/components/SmartQReportEditor.vue"]]),re={__name:"SmartQ",setup(a,{expose:t}){t();const{t:o}=E(),e=B(),b=P(),g=Q(()=>[{label:"Умный запрос",icon:"pi pi-search"}]),n=_("list"),p=_(null),u=_(null),I=_(null),f=_(null),m=_(0),s=Q(()=>[{label:o("smartq.nav.reports"),icon:"pi pi-list",value:"list"},{label:o("smartq.nav.editor"),icon:"pi pi-pencil",value:"editor"},{label:o("smartq.nav.designer"),icon:"pi pi-cog",value:"designer"}]);function C(){if(e.query.reportId){const r=parseInt(e.query.reportId);p.value=r,u.value=r,n.value="editor",m.value=1}else if(e.query.view){const r={viewer:"editor",editor:"designer",list:"list",designer:"designer",create:"create"};n.value=r[e.query.view]||e.query.view,v()}else n.value="list",m.value=0}function v(){const r={list:0,editor:1,designer:2,create:2};m.value=r[n.value]||0}function S(r){n.value=r,v(),R()}function R(){const r={};n.value==="editor"&&u.value?r.reportId=u.value:r.view=n.value,b.replace({query:r})}function j(){if(!p.value){f.value=o("smartq.errors.noReportId");return}f.value=null,u.value=p.value,n.value="editor",v(),R()}function T(r){p.value=r,u.value=r,n.value="editor",v(),R()}function D(r){I.value=r,n.value="designer",v(),R()}function N(){I.value=null,n.value="create",v(),R()}function O(r){r&&r.id?T(r.id):S("list")}function U(){S("list")}function z(r){f.value=typeof r=="string"?r:r.message||o("smartq.errors.unknown")}C(),x(()=>e.query,()=>{C()},{deep:!0}),x(m,r=>{const V=["list","editor","designer"][r]||"list";n.value!==V&&S(V)});const k={t:o,route:e,router:b,breadcrumbItems:g,currentView:n,reportIdInput:p,currentReportId:u,editingReportId:I,error:f,activeTab:m,navItems:s,initializeFromRoute:C,updateActiveTab:v,navigateTo:S,updateRoute:R,loadReport:j,handleViewReport:T,handleDesignReport:D,handleCreateReport:N,handleReportSaved:O,handleEditorCancelled:U,handleError:z,ref:_,computed:Q,watch:x,get useI18n(){return E},get useRoute(){return B},get useRouter(){return P},IntegramBreadcrumb:G,SmartQTable:W,SmartQReportList:Z,SmartQReportEditor:te};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}},oe={class:"smartq-page"},ne={class:"flex align-items-center justify-content-between"},ae={class:"flex gap-2 align-items-center ml-auto"},ie={key:0},le={key:1},se={class:"surface-ground border-round p-3 mb-3"},de={for:"reportId",class:"block mb-2 font-medium"},ce={class:"flex gap-2"},ue={key:2,class:"text-center py-6 surface-ground border-round"},pe={class:"m-0 mb-2"},me={class:"text-color-secondary m-0 mb-3"},ve={key:2},_e={key:3};function be(a,t,o,e,b,g){const n=h("Button"),p=h("TabMenu"),u=h("InputNumber"),I=h("Message"),f=h("Card"),m=A("tooltip");return l(),c("div",oe,[i(e.IntegramBreadcrumb,{items:e.breadcrumbItems},null,8,["items"]),i(f,null,{title:q(()=>[d("div",ne,[t[6]||(t[6]=d("span",null,"Умный запрос",-1)),d("div",ae,[i(n,{icon:"pi pi-plus",label:"Создать",onClick:t[0]||(t[0]=s=>e.navigateTo("create")),size:"small"})])])]),content:q(()=>[i(p,{model:e.navItems,activeIndex:e.activeTab,"onUpdate:activeIndex":t[1]||(t[1]=s=>e.activeTab=s),class:"mb-3"},null,8,["model","activeIndex"]),e.currentView==="list"?(l(),c("div",ie,[i(e.SmartQReportList,{onViewReport:e.handleViewReport,onEditReport:e.handleDesignReport,onCreateReport:e.handleCreateReport})])):e.currentView==="editor"?(l(),c("div",le,[d("div",se,[d("label",de,y(a.$t("smartq.selectReport")),1),d("div",ce,[i(u,{id:"reportId",modelValue:e.reportIdInput,"onUpdate:modelValue":t[2]||(t[2]=s=>e.reportIdInput=s),placeholder:a.$t("smartq.reportIdPlaceholder"),class:"flex-1"},null,8,["modelValue","placeholder"]),i(n,{label:a.$t("smartq.loadReport"),icon:"pi pi-search",onClick:e.loadReport,disabled:!e.reportIdInput},null,8,["label","disabled"]),F(i(n,{icon:"pi pi-cog",onClick:t[3]||(t[3]=s=>e.handleDesignReport(e.currentReportId)),disabled:!e.currentReportId,severity:"secondary",outlined:""},null,8,["disabled"]),[[m,a.$t("smartq.reports.design"),void 0,{top:!0}]])])]),e.error?(l(),M(I,{key:0,severity:"error",onClose:t[4]||(t[4]=s=>e.error=null),closable:"",class:"mb-3"},{default:q(()=>[K(y(e.error),1)]),_:1})):L("",!0),e.currentReportId?(l(),M(e.SmartQTable,{key:1,"report-id":e.currentReportId,onError:e.handleError},null,8,["report-id"])):(l(),c("div",ue,[t[7]||(t[7]=d("i",{class:"pi pi-table text-5xl text-color-secondary mb-3 block"},null,-1)),d("h4",pe,y(a.$t("smartq.noReportLoaded")),1),d("p",me,y(a.$t("smartq.enterReportIdToStart")),1),i(n,{label:a.$t("smartq.nav.browseReports"),icon:"pi pi-list",onClick:t[5]||(t[5]=s=>e.navigateTo("list")),outlined:""},null,8,["label"])]))])):e.currentView==="designer"?(l(),c("div",ve,[i(e.SmartQReportEditor,{"report-id":e.editingReportId,onSaved:e.handleReportSaved,onCancelled:e.handleEditorCancelled},null,8,["report-id"])])):e.currentView==="create"?(l(),c("div",_e,[i(e.SmartQReportEditor,{onSaved:e.handleReportSaved,onCancelled:e.handleEditorCancelled})])):L("",!0)]),_:1})])}const ye=w(re,[["render",be],["__scopeId","data-v-a46a3b64"],["__file","/home/hive/integram-standalone/src/views/pages/SmartQ.vue"]]);export{ye as default};
