import{d as o,I as n}from"./index-BrdfL8RF.js";import{i as e}from"./integramApiClient-C3_j8SPw.js";const a=o(!1),s=o(null),u=o(null);function A(){function r(){e.tryRestoreSession()&&(a.value=e.isAuthenticated(),s.value=e.getDatabase(),u.value=e.getAuthInfo())}async function l(t,i,v,g){try{return await e.authenticate(t,i,v,g),a.value=!0,s.value=i,u.value=e.getAuthInfo(),e.saveSession(),{success:!0}}catch(h){return{success:!1,error:h.message}}}async function c(){await e.logout(),a.value=!1,s.value=null,u.value=null,localStorage.removeItem("integram_session")}function f(t){e.switchDatabase(t),s.value=t,u.value=e.getAuthInfo()}return a.value||r(),{isAuthenticated:n(()=>a.value),currentDatabase:n(()=>s.value),userInfo:n(()=>u.value),login:l,logout:c,switchDatabase:f,initializeSession:r}}export{A as u};
