import{D as e,r as a,J as l,K as t,c as i,A as n,w as s,y as r,o,b as d,a as u,t as p,F as c,d as m,g as v,h as y,f}from"./index-UE8Rfyf2.js";import{I as b}from"./IntegramBreadcrumb-CucIfBJX.js";import{_ as h}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./integramApiClient-BsYdo77J.js";import"./index-CcrxTH1M.js";import"./unifiedAuthService-6fZILgG8.js";const g={class:"integram-form-page integram-touch-friendly"},k={key:0,class:"mb-4"},w={class:"integram-field"},x={key:1},_={class:"mb-3"},C={key:0,class:"text-500 mb-3"},I={class:"grid"},j={key:0},S={key:1},A={key:2},D=["innerHTML"],L={key:3},T={class:"text-sm bg-gray-100 p-2 border-round"},B={key:4},F={key:2,class:"integram-empty-state"},M={class:"empty-action"},Q=h({__name:"IntegramForm",props:{session:{type:Object,required:!0}},emits:["navigate"],setup(h,{emit:Q}){const V=Q,q=e(),H=a(null),J=a(null),O=a([]),P=l(()=>{var e;const a=[{label:"Формы",icon:"pi pi-file",to:J.value?"/integram/form":void 0}];return(null==(e=J.value)?void 0:e.name)&&a.push({label:J.value.name,icon:"pi pi-file"}),a});function K(){H.value&&(J.value={id:H.value,name:"Демонстрационная форма",description:"Пример формы с различными панелями",panels:[{title:"Таблица данных",type:"table",width:"col-12",paginator:!0,rows:10,columns:[{field:"id",header:"ID"},{field:"name",header:"Название"},{field:"value",header:"Значение"}],data:[{id:1,name:"Item 1",value:100},{id:2,name:"Item 2",value:200},{id:3,name:"Item 3",value:300}]},{title:"График",type:"chart",width:"col-12 md:col-6",chartType:"bar",chartData:{labels:["Jan","Feb","Mar","Apr"],datasets:[{label:"Sales",data:[65,59,80,81],backgroundColor:"#42A5F5"}]}},{title:"Текстовый блок",type:"text",width:"col-12 md:col-6",content:"<h4>Заголовок</h4><p>Это пример текстового контента в панели.</p>"}]})}function U(e){return e.width||"col-12"}function z(){J.value=null,H.value=null}function E(){V("navigate","formBuilder")}return t(()=>{O.value=[{id:"1",name:"Демо форма 1"},{id:"2",name:"Демо форма 2"}]}),(e,a)=>{const l=r("Select"),t=r("Button"),h=r("Column"),Q=r("DataTable"),V=r("Chart"),G=r("Message"),N=r("Panel"),R=r("Card");return o(),i("div",g,[n(b,{items:P.value},null,8,["items"]),n(R,null,{title:s(()=>[...a[1]||(a[1]=[u("div",{class:"flex align-items-center justify-content-between"},[u("span",null,"Формы")],-1)])]),content:s(()=>[J.value?d("",!0):(o(),i("div",k,[u("div",w,[a[2]||(a[2]=u("label",{for:"formSelect"},"Выберите форму",-1)),n(l,{id:"formSelect",modelValue:H.value,"onUpdate:modelValue":a[0]||(a[0]=e=>H.value=e),options:O.value,optionLabel:"name",optionValue:"id",placeholder:"Выберите форму",class:"w-full",onChange:K},null,8,["modelValue","options"])])])),J.value?(o(),i("div",x,[u("div",_,[n(t,{icon:"pi pi-arrow-left",label:"Назад к выбору",onClick:z,text:"","aria-label":"Вернуться к списку форм"})]),u("h4",null,p(J.value.name),1),J.value.description?(o(),i("p",C,p(J.value.description),1)):d("",!0),u("div",I,[(o(!0),i(c,null,m(J.value.panels,(e,l)=>(o(),i("div",{key:l,class:v(U(e))},[n(N,{header:e.title,toggleable:!0},{default:s(()=>["table"===e.type?(o(),i("div",j,[n(Q,{value:e.data||[],paginator:e.paginator,rows:e.rows||10},{default:s(()=>[(o(!0),i(c,null,m(e.columns,e=>(o(),y(h,{key:e.field,field:e.field,header:e.header},null,8,["field","header"]))),128))]),_:2},1032,["value","paginator","rows"])])):"chart"===e.type?(o(),i("div",S,[n(V,{type:e.chartType||"bar",data:e.chartData,options:e.chartOptions},null,8,["type","data","options"])])):"text"===e.type?(o(),i("div",A,[u("div",{innerHTML:e.content},null,8,D)])):"query"===e.type?(o(),i("div",L,[a[3]||(a[3]=u("p",{class:"mb-2"},"SQL Query:",-1)),u("pre",T,p(e.query),1),n(t,{label:"Выполнить запрос",icon:"pi pi-play",onClick:e=>{q.add({severity:"info",summary:"Выполнение запроса",detail:"Функционал будет реализован через API",life:3e3})},class:"mt-2","aria-label":"Выполнить SQL запрос"},null,8,["onClick"])])):(o(),i("div",B,[n(G,{severity:"warn"},{default:s(()=>[f(" Неизвестный тип панели: "+p(e.type),1)]),_:2},1024)]))]),_:2},1032,["header"])],2))),128))])])):d("",!0),J.value||0!==O.value.length?d("",!0):(o(),i("div",F,[a[4]||(a[4]=u("i",{class:"pi pi-inbox empty-icon"},null,-1)),a[5]||(a[5]=u("p",{class:"empty-title"},"Формы не найдены",-1)),a[6]||(a[6]=u("p",{class:"empty-description"},"Создайте первую форму для отображения данных",-1)),u("div",M,[n(t,{label:"Создать форму",icon:"pi pi-plus",onClick:E,"aria-label":"Создать новую форму"})])]))]),_:1})])}}},[["__scopeId","data-v-98958d06"]]);export{Q as default};
