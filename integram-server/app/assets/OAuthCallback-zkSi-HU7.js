import{_ as S,y as d,c as T,A as p,a as l,F as b,L as f,K as g,D as k,J as h,o as I}from"./index-B4X-KBPT.js";const y={__name:"OAuthCallback",setup(v,{expose:t}){t();const s=f(),r=g(),o=k();h(()=>{const{accessToken:e,refreshToken:c,userId:u,token:i,_xsrf:_,error:m}=r.query;m?(o.add({severity:"error",summary:"Ошибка авторизации",detail:n(m),life:5e3}),setTimeout(()=>{s.push("/login")},2e3)):e&&c?(localStorage.setItem("accessToken",e),localStorage.setItem("refreshToken",c),u&&localStorage.setItem("id",u),i&&localStorage.setItem("token",i),_&&localStorage.setItem("_xsrf",_),localStorage.setItem("session_timestamp",Date.now().toString()),o.add({severity:"success",summary:"Успешная авторизация",detail:"Вход выполнен успешно",life:3e3}),setTimeout(()=>{s.push("/welcome")},1e3)):s.push("/login")});function n(e){return{invalid_state:"Неверный токен безопасности. Попробуйте еще раз.",oauth_failed:"Не удалось выполнить вход. Попробуйте еще раз.",access_denied:"Вы отклонили запрос на авторизацию."}[e]||"Произошла ошибка при входе"}const a={router:s,route:r,toast:o,getErrorMessage:n,onMounted:h,get useRouter(){return f},get useRoute(){return g},get useToast(){return k}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},x={class:"callback-container"},A={class:"callback-content"};function C(v,t,s,r,o,n){const a=d("Toast"),e=d("ProgressSpinner");return I(),T(b,null,[p(a),l("div",x,[l("div",A,[p(e),t[0]||(t[0]=l("p",{class:"callback-message"},"Обработка авторизации...",-1))])])],64)}const R=S(y,[["render",C],["__scopeId","data-v-d732911a"],["__file","/home/hive/integram-standalone/src/views/pages/auth/OAuthCallback.vue"]]);export{R as default};
