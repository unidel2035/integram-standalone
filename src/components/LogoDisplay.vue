<script setup>
import { useLogo } from '@/composables/useLogo'
import { computed } from 'vue'

const props = defineProps({
  width: {
    type: String,
    default: '200'
  },
  height: {
    type: String,
    default: '40'
  }
})

const { getCurrentColor, getCurrentPreset, isCustomLogo, isPresetLogo, isDynamicLogo, getLogoSvg } =
  useLogo()

const logoColor = computed(() => getCurrentColor.value || 'var(--primary-color)')
</script>

<template>
  <!-- Custom SVG Logo -->
  <div v-if="isCustomLogo && getLogoSvg" v-html="getLogoSvg" class="custom-logo-container"></div>

  <!-- Preset Logo from file -->
  <img
    v-else-if="isPresetLogo && getCurrentPreset"
    :src="getCurrentPreset.file"
    :alt="getCurrentPreset.label"
    :style="{ height: height + 'px', width: 'auto' }"
    class="preset-logo"
  />

  <!-- Dynamic DronDoc Logo with color -->
  <svg
    v-else
    :width="width"
    :height="height"
    viewBox="0 0 512 60"
    xmlns="http://www.w3.org/2000/svg"
    style="overflow: visible"
  >
    <g transform="translate(0 -20)">
      <path
        d="M7.67 16.58c3.08-.62 6.22-.99 9.37-.9 8.94.14 18.1-.65 26.82 1.77 7.63 2.86 14.49 8.13 18.76 15.12 6.42 11.56 6.29 26.83-1.41 37.77-4.52 6.21-10.87 11.26-18.29 13.5-2.86.96-5.83 1.72-8.88 1.65-8.82-.05-17.64.05-26.46-.14-.06-4.25-.05-8.5-.03-12.74 7.81-.08 15.62.02 23.43.01 9.06.55 17.61-5.5 21.44-13.51.11-.52.31-1.58.42-2.11 1.44-5.52 1.18-11.77-1.68-16.82-2.57-4.85-7.06-8.47-12.1-10.53-10.38-1.97-20.99-.41-31.48-1.08.09-4 .1-8 .09-11.99z"
        :fill="logoColor"
      />
      <path
        d="M78.36 16.41c10.56.19 21.15-.38 31.69.36 1.32.4 2.65.73 4 1.06 7.81 2.09 14.51 8.11 16.31 16.16 1.08 7.14-1.82 14.45-7.12 19.27-1.72 1.67-4.5 2.86-3.99 5.71 4.92 3.24 7.89 8.65 9.92 14.03.32.97.64 1.94.97 2.9 1.36 3.15 2.86 6.25 3.76 9.57-5.04.03-10.07.01-15.11-.05-.84-2.52-1.69-5.04-2.53-7.56-.48-1.27-.94-2.54-1.39-3.81-1.81-4.52-5.3-8.04-9.51-10.37-8.86-2-17.8.17-26.74-.3-.27-1.1-.52-2.2-.78-3.29.67-3.17.48-6.42.44-9.63 5.82-1.29 11.86-.77 17.76-.35 3.65-.23 7.29-.56 10.94-.86 1.1-.35 2.21-.67 3.32-.96 1.74-1.3 3.37-2.73 4.91-4.26.38-.99.77-1.98 1.17-2.95.04-1.81.06-3.61.1-5.41-1.78-2.31-3.88-4.35-6.2-6.1-10.63-.51-21.27-.12-31.9-.15-.11-4.34-.09-8.68-.02-13.01z"
        :fill="logoColor"
      />
      <path
        d="M158.05 19.37c7.46-4.61 16.58-4.51 25.01-3.68 9.98 1.95 19.03 8.35 23.97 17.27 4.9 8.53 5.81 19.07 3.22 28.47-5.47 19.22-28.89 30.28-47.37 22.84-9.98-3.86-18.62-11.81-22.2-22.02-1.83-5.57-2.89-11.63-1.36-17.39 2.03-10.78 9.53-19.9 18.73-25.49z"
        :fill="logoColor"
      />
      <path
        class="pulsing-path"
        d="m 169.00438,40.595867 c 2.62405,-1.508147 5.83199,-1.475432 8.79723,-1.2039 3.51045,0.637936 6.69378,2.731675 8.43141,5.649823 1.72357,2.790562 2.04366,6.238688 1.13263,9.313867 -1.92406,6.28776 -10.16201,9.906002 -16.66232,7.472031 -3.51045,-1.262787 -6.54956,-3.863603 -7.80882,-7.203771 -0.6437,-1.822207 -1.01655,-3.804716 -0.47838,-5.689081 0.71405,-3.526641 3.35217,-6.510219 6.58825-8.338969 z"
        fill="var(--surface-card)"
        id="svg_5-3"
        opacity="1"
        style="fill: var(--surface-card)"
      />
      <path
        d="M267.64 16.52c4.57-.23 9.15-.21 13.72.01.12 22.65.09 45.3-.02 67.94-2.92 2.07-7.22.39-10.68.97-8.66-10.49-16.56-21.59-24.86-32.37-2.59-3.69-5.78-6.94-8.14-10.8-.45 1.87-1.02 3.75-.96 5.7-.1 12.48.11 24.96-.15 37.44-4.33-.26-8.84.58-13.02-.9.26-22.66-.03-45.34-.01-68 3.22-.04 6.43-.05 9.65-.03 11.62 13.06 21.97 27.18 32.72 40.96.37.02 1.1.07 1.46.09.27-13.67.16-27.34.29-41.01z"
        :fill="logoColor"
      />
      <path
        d="M293.62 16.46c6.13-.2 12.26-.07 18.39-.09 5.69.11 11.53-.44 17.02 1.42 9.76 3.45 17.85 11.27 21.28 21.08 2.57 10.12 2.65 21.91-3.73 30.7-5.37 8.13-14.08 13.67-23.55 15.72-9.56.39-19.13.01-28.7.18-.12-4.32-.11-8.64.02-12.95 7.9.04 15.8.12 23.7.04 2.12.04 4.14-.61 6.15-1.2 5.82-2.2 10.64-6.52 13.23-12.21 1.82-4.87 1.35-10.15.91-15.22-2.43-6.84-7.88-12.76-15.2-14.21-9.8-1.43-19.87.65-29.61-1.16.14-4.03.12-8.07.09-12.1z"
        :fill="logoColor"
      />
      <path
        d="M378.34 21.17c8.25-5.8 18.94-6.86 28.64-5.05 2.04.52 4.04 1.2 5.98 2.04 8.24 3.7 15.46 10.43 18.87 18.88.47 1.3.93 2.6 1.42 3.9 2.1 8.33 2.07 17.47-1.86 25.28-4.18 7.91-10.89 14.7-19.28 18.06-7.69 2.85-16.26 3.08-24.16.97-8.75-2.63-16.01-8.89-20.97-16.42-4.96-7.93-5.63-17.83-3.82-26.8.12-.53.38-1.59.5-2.12 2.63-7.67 8.27-13.96 14.68-18.74z"
        :fill="logoColor"
      />
      <path
        d="M445.77 39.99c5.84-14.09 20.79-24.4 36.22-23.48 6.96 0 13.92.02 20.89-.06.47 4.3 1.12 8.81-.21 13.02-9.19-.09-18.44-.54-27.6.28-1.04.37-2.09.73-3.13 1.06-6.94 2.86-12.34 8.88-14.28 16.15-.46 4.42-.51 8.96.97 13.21 1.33 2.33 2.8 4.59 4.39 6.76 2.69 2.22 5.59 4.18 8.87 5.41 10.31.32 20.62.17 30.93.11.59 4.32.88 8.79-.15 13.07-7.87-.13-15.75-.26-23.62-.2-4.36.06-8.79-.38-12.9-1.86-10.09-4.25-17.46-13.34-21.03-23.53-2.11-6.57-1.41-13.47.65-19.94z"
        :fill="logoColor"
      />
    </g>
  </svg>
</template>

<style scoped>
.custom-logo-container {
  display: inline-flex;
  align-items: center;
  max-width: 100%;
  max-height: 100%;
}

.custom-logo-container :deep(svg) {
  max-width: 100%;
  max-height: 100%;
}

.preset-logo {
  display: block;
  object-fit: contain;
}
</style>
