<template>
  <div class="welcome-page">
    <!-- Onboarding Wizard for NEW users (comprehensive flow) -->
    <OnboardingWizard v-if="!hasSeenWelcome" />

    <!-- Welcome Screen Modal (alternative, legacy) -->
    <!-- <WelcomeScreen v-if="!hasSeenWelcome" /> -->

    <!-- Main Welcome Content -->
    <div class="editor-container">
      <!-- 1. Welcome Section -->
      <div class="editor-title">
        <h1 contenteditable="false" class="title-editable">
          üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Integram!
        </h1>
      </div>

      <div class="editor-subtitle">
        <p contenteditable="false" class="value-proposition">
          –ò–ù–¢–ï–ì–†–ê–ú ‚Äî —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∏ —É–¥–æ–±–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏.
        </p>
        <p contenteditable="false" class="value-subtext">
          –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –≤–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏: –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–π—Ç–µ —É—á—ë—Ç, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å, –Ω–µ –¥–æ–≤–µ—Ä—è—è –¥–∞–Ω–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º.
        </p>
        <p contenteditable="false" class="value-tagline">
          100% –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ. –í–∞—à–∏ —Å–µ—Ä–≤–µ—Ä—ã. –í–∞—à –∫–æ–Ω—Ç—Ä–æ–ª—å.
        </p>
      </div>

      <div class="editor-divider"></div>

      <!-- 2. Learning & Tutorials Section -->
      <div class="editor-section">
        <h2 class="section-heading">
          <span class="heading-icon">üéì</span>
          –û–±—É—á–µ–Ω–∏–µ –∏ –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
        </h2>
        <p class="section-subtitle">–û—Å–≤–æ–π—Ç–µ Integram –∑–∞ 7 –¥–Ω–µ–π —Å –Ω–∞—à–∏–º–∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ —É—Ä–æ–∫–∞–º–∏</p>
      </div>

      <div class="lessons-container">
        <Card class="lesson-card featured-lesson">
          <template #content>
            <div class="lesson-badge">–ù–æ–≤–∏—á–∫–∞–º</div>
            <div class="lesson-icon">üöÄ</div>
            <h3 class="lesson-title">–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç - 15 –º–∏–Ω—É—Ç</h3>
            <p class="lesson-description">
              –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ—é –ø–µ—Ä–≤—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–∞—É—á–∏—Ç–µ—Å—å –æ—Å–Ω–æ–≤–∞–º —Ä–∞–±–æ—Ç—ã —Å Integram
            </p>
            <div class="lesson-steps">
              <div class="lesson-step">‚úì –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</div>
              <div class="lesson-step">‚úì –ü–µ—Ä–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∏ –¥–∞–Ω–Ω—ã–µ</div>
              <div class="lesson-step">‚úì –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å</div>
            </div>
            <Button
              label="–ù–∞—á–∞—Ç—å –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç"
              icon="pi pi-play"
              class="p-button-lg w-full mt-3"
              @click="startQuickTutorial"
            />
          </template>
        </Card>

        <Card class="lesson-card">
          <template #content>
            <div class="lesson-badge">7 –¥–Ω–µ–π</div>
            <div class="lesson-icon">üìö</div>
            <h3 class="lesson-title">–ü–æ–ª–Ω—ã–π –∫—É—Ä—Å –æ–±—É—á–µ–Ω–∏—è</h3>
            <p class="lesson-description">
              –ü—Ä–æ–π–¥–∏—Ç–µ 7-–¥–Ω–µ–≤–Ω—ã–π –∫—É—Ä—Å –∏ —Å—Ç–∞–Ω—å—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–º –≤ —Ä–∞–±–æ—Ç–µ —Å Integram
            </p>
            <div class="lesson-progress">
              <div class="progress-info">
                <span>–î–µ–Ω—å 1: –û—Å–Ω–æ–≤—ã</span>
                <span class="progress-badge">–î–æ—Å—Ç—É–ø–Ω–æ</span>
              </div>
              <div class="progress-info">
                <span>–î–µ–Ω—å 2: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö</span>
                <span class="progress-badge locked">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ</span>
              </div>
              <div class="progress-info">
                <span>–î–µ–Ω—å 3: –ó–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç—á—ë—Ç—ã</span>
                <span class="progress-badge locked">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ</span>
              </div>
            </div>
            <Button
              label="–ù–∞—á–∞—Ç—å –∫—É—Ä—Å"
              icon="pi pi-book"
              class="p-button-lg p-button-outlined w-full mt-3"
              @click="startFullCourse"
            />
          </template>
        </Card>

        <Card class="lesson-card">
          <template #content>
            <div class="lesson-badge">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ</div>
            <div class="lesson-icon">üéØ</div>
            <h3 class="lesson-title">–í–∏–¥–µ–æ-—É—Ä–æ–∫–∏</h3>
            <p class="lesson-description">
              –°–º–æ—Ç—Ä–∏—Ç–µ –∫–æ—Ä–æ—Ç–∫–∏–µ –≤–∏–¥–µ–æ-—É—Ä–æ–∫–∏ –ø–æ —Ä–∞–±–æ—Ç–µ —Å –∫–ª—é—á–µ–≤—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
            </p>
            <div class="video-list">
              <div class="video-item">
                <i class="pi pi-play-circle"></i>
                <span>–°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü (5:30)</span>
              </div>
              <div class="video-item">
                <i class="pi pi-play-circle"></i>
                <span>–†–∞–±–æ—Ç–∞ —Å SQL (7:15)</span>
              </div>
              <div class="video-item">
                <i class="pi pi-play-circle"></i>
                <span>–û—Ç—á—ë—Ç—ã –∏ —Ñ–æ—Ä–º—ã (6:45)</span>
              </div>
            </div>
            <Button
              label="–°–º–æ—Ç—Ä–µ—Ç—å —É—Ä–æ–∫–∏"
              icon="pi pi-video"
              class="p-button-lg p-button-outlined w-full mt-3"
              @click="openVideoLessons"
            />
          </template>
        </Card>
      </div>

      <div class="editor-divider"></div>

      <!-- 3. Invite Friends & Create Databases Section -->
      <div class="editor-section">
        <h2 class="section-heading">
          <span class="heading-icon">ü§ù</span>
          –†–∞—Å—Ç–∏—Ç–µ –≤–º–µ—Å—Ç–µ —Å –¥—Ä—É–∑—å—è–º–∏
        </h2>
        <p class="section-subtitle">–ü—Ä–∏–≥–ª–∞—Å–∏—Ç–µ –∫–æ–ª–ª–µ–≥ –∏ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –Ω–æ–≤—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤</p>
      </div>

      <div class="collaboration-grid">
        <Card class="collaboration-card invite-card">
          <template #content>
            <div class="collab-icon">üë•</div>
            <h3>–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–∑–µ–π</h3>
            <p class="collab-description">
              –†–∞–±–æ—Ç–∞–π—Ç–µ –Ω–∞–¥ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –≤–º–µ—Å—Ç–µ —Å –∫–æ–º–∞–Ω–¥–æ–π. –ü—Ä–∏–≥–ª–∞—à–∞–π—Ç–µ –∫–æ–ª–ª–µ–≥ –∏ –¥–µ–ª–∏—Ç–µ—Å—å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö.
            </p>
            <div class="invite-benefits">
              <div class="benefit-item">
                <i class="pi pi-check-circle"></i>
                <span>–°–æ–≤–º–µ—Å—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–∞–¥ –ø—Ä–æ–µ–∫—Ç–∞–º–∏</span>
              </div>
              <div class="benefit-item">
                <i class="pi pi-check-circle"></i>
                <span>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π –∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞</span>
              </div>
              <div class="benefit-item">
                <i class="pi pi-check-circle"></i>
                <span>–û–±—â–∏–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π</span>
              </div>
            </div>
            <Button
              label="–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–∑–µ–π"
              icon="pi pi-users"
              class="p-button-lg p-button-success w-full mt-3"
              @click="inviteFriends"
            />
          </template>
        </Card>

        <Card class="collaboration-card database-card">
          <template #content>
            <div class="collab-icon">üóÑÔ∏è</div>
            <h3>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö</h3>
            <p class="collab-description">
              –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞—Ç—å –¥–æ 3 –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö. –ö–∞–∂–¥–∞—è –¥–ª—è —Å–≤–æ–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –∏–ª–∏ –∫–æ–º–∞–Ω–¥—ã.
            </p>
            <div class="database-stats">
              <div class="stat-box">
                <div class="stat-number">0/3</div>
                <div class="stat-label">–°–æ–∑–¥–∞–Ω–Ω—ã—Ö –ë–î</div>
              </div>
              <div class="stat-box">
                <div class="stat-number">500M</div>
                <div class="stat-label">–ó–∞–ø–∏—Å–µ–π –Ω–∞ –ë–î</div>
              </div>
            </div>
            <Button
              label="–°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö"
              icon="pi pi-database"
              class="p-button-lg p-button-primary w-full mt-3"
              @click="createNewDatabase"
            />
          </template>
        </Card>
      </div>

      <div class="editor-divider"></div>

      <!-- 4. Ready Solutions Section -->
      <div class="editor-section">
        <h2 class="section-heading">
          <span class="heading-icon">üíº</span>
          –ì–æ—Ç–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞
        </h2>
        <p class="section-subtitle">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ—à–µ–Ω–∏–µ –ø–æ–¥ –≤–∞—à—É –∑–∞–¥–∞—á—É ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞ 1 –¥–µ–Ω—å</p>
      </div>

      <div class="solutions-single-row">
        <!-- IT Companies Solution -->
        <Card
          class="solution-card premium"
          @click="navigateToSolution('it-companies')"
        >
          <template #header>
            <div class="solution-badge">ü•á –•–∏—Ç –ø—Ä–æ–¥–∞–∂</div>
          </template>
          <template #content>
            <div class="solution-icon">üíª</div>
            <h3 class="solution-title">–î–ª—è IT-–∫–æ–º–ø–∞–Ω–∏–π</h3>
            <p class="solution-description">
              –ó–∞–º–µ–Ω–∏—Ç–µ –∞—É—Ç—Å—Ç–∞—Ñ—Ñ –Ω–∞ —Ü–∏—Ñ—Ä–æ–≤—É—é –∫–æ–º–∞–Ω–¥—É. –ü–µ—Ä–≤–∏—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞, —Å–±–æ—Ä —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏.
            </p>
            <div class="solution-features">
              <div class="feature-item">‚úì –ü–µ—Ä–≤–∏—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤</div>
              <div class="feature-item">‚úì –°–±–æ—Ä —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –ø—Ä–æ–µ–∫—Ç–∞–º</div>
              <div class="feature-item">‚úì –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏</div>
              <div class="feature-item">‚úì –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</div>
            </div>
            <div class="solution-stats">
              <div class="stat-item">
                <strong>-70%</strong>
                <span>–∑–∞—Ç—Ä–∞—Ç –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É</span>
              </div>
              <div class="stat-item">
                <strong>24/7</strong>
                <span>–±–µ–∑ –≤—ã—Ö–æ–¥–Ω—ã—Ö</span>
              </div>
            </div>
            <Button
              label="–ü–æ–¥–∫–ª—é—á–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ"
              icon="pi pi-arrow-right"
              class="p-button-lg w-full mt-3"
              @click.stop="navigateToSolution('it-companies')"
            />
          </template>
        </Card>

        <!-- Micro Business Solution -->
        <Card
          class="solution-card"
          @click="navigateToSolution('micro-business')"
        >
          <template #header>
            <div class="solution-badge">ü•à –ü–æ–ø—É–ª—è—Ä–Ω–æ</div>
          </template>
          <template #content>
            <div class="solution-icon">üè™</div>
            <h3 class="solution-title">–î–ª—è –º–∞–ª–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞</h3>
            <p class="solution-description">
              –ü–µ—Ä–≤—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –∑–∞ 1/10 –∑–∞—Ä–ø–ª–∞—Ç—ã. –ü—Ä–∏–µ–º –∑–∞–∫–∞–∑–æ–≤, –∑–∞–ø–∏—Å—å –∫–ª–∏–µ–Ω—Ç–æ–≤, –ø–æ–¥–¥–µ—Ä–∂–∫–∞.
            </p>
            <div class="solution-features">
              <div class="feature-item">‚úì –ü—Ä–∏–µ–º –∑–∞–∫–∞–∑–æ–≤ 24/7</div>
              <div class="feature-item">‚úì –ó–∞–ø–∏—Å—å –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏</div>
              <div class="feature-item">‚úì –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤</div>
              <div class="feature-item">‚úì –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —É—Å–ª—É–≥</div>
            </div>
            <div class="solution-stats">
              <div class="stat-item">
                <strong>150 000‚ÇΩ</strong>
                <span>—ç–∫–æ–Ω–æ–º–∏—è –≤ –º–µ—Å—è—Ü</span>
              </div>
              <div class="stat-item">
                <strong>100%</strong>
                <span>–æ—Ç–≤–µ—Ç–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞–º</span>
              </div>
            </div>
            <Button
              label="–ü–æ–¥–∫–ª—é—á–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ"
              icon="pi pi-arrow-right"
              class="p-button-lg p-button-outlined w-full mt-3"
              @click.stop="navigateToSolution('micro-business')"
            />
          </template>
        </Card>

        <!-- Telecom Solution -->
        <Card
          class="solution-card"
          @click="navigateToSolution('telecom')"
        >
          <template #header>
            <div class="solution-badge">ü•â Enterprise</div>
          </template>
          <template #content>
            <div class="solution-icon">üìû</div>
            <h3 class="solution-title">–î–ª—è —Ç–µ–ª–µ–∫–æ–º</h3>
            <p class="solution-description">
              –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏.
            </p>
            <div class="solution-features">
              <div class="feature-item">‚úì –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ —Ç–∞—Ä–∏—Ñ–∞–º</div>
              <div class="feature-item">‚úì –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞—è–≤–æ–∫ –Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</div>
              <div class="feature-item">‚úì –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞</div>
              <div class="feature-item">‚úì –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –∫–æ–ª–ª-—Ü–µ–Ω—Ç—Ä</div>
            </div>
            <div class="solution-stats">
              <div class="stat-item">
                <strong>-60%</strong>
                <span>–∑–≤–æ–Ω–∫–æ–≤ –≤ –∫–æ–ª–ª-—Ü–µ–Ω—Ç—Ä</span>
              </div>
              <div class="stat-item">
                <strong>+25%</strong>
                <span>–∫–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –ø—Ä–æ–¥–∞–∂–∏</span>
              </div>
            </div>
            <Button
              label="–ü–æ–¥–∫–ª—é—á–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ"
              icon="pi pi-arrow-right"
              class="p-button-lg p-button-outlined w-full mt-3"
              @click.stop="navigateToSolution('telecom')"
            />
          </template>
        </Card>
      </div>

      <div class="editor-divider"></div>

      <!-- 4. Learning Resources -->
      <div class="editor-section">
        <h2 class="section-heading">
          <span class="heading-icon">üìö</span>
          –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
        </h2>
        <p class="section-subtitle">–í—Å—ë, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞</p>
      </div>

      <div class="resources-container">
        <!-- Video Tours -->
        <div class="resource-section">
          <h3>üìπ –í–∏–¥–µ–æ-—Ç—É—Ä—ã</h3>
          <div class="video-grid">
            <Card
              v-for="video in videos"
              :key="video.id"
              class="video-card"
              @click="playVideo(video)"
            >
              <template #header>
                <img :src="video.thumbnail" :alt="video.title" class="video-thumbnail" />
                <div class="play-overlay">
                  <i class="pi pi-play-circle"></i>
                </div>
              </template>
              <template #content>
                <h4>{{ video.title }}</h4>
                <p class="video-duration">{{ video.duration }}</p>
              </template>
            </Card>
          </div>
        </div>

        <!-- Documentation -->
        <div class="resource-section">
          <h3>üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</h3>
          <div class="docs-list">
            <a
              v-for="doc in documentation"
              :key="doc.id"
              :href="doc.url"
              class="doc-item"
              @click.prevent="openDocumentation(doc)"
            >
              <i :class="doc.icon"></i>
              <div class="doc-content">
                <h4>{{ doc.title }}</h4>
                <p>{{ doc.description }}</p>
              </div>
              <i class="pi pi-external-link"></i>
            </a>
          </div>
        </div>

        <!-- Community -->
        <div class="resource-section">
          <h3>üí¨ –°–æ–æ–±—â–µ—Å—Ç–≤–æ</h3>
          <div class="community-grid">
            <Card
              class="community-card"
              @click="openCommunity({ id: 'telegram', url: 'https://t.me/agent2b' })"
            >
              <template #content>
                <i class="pi pi-send community-icon"></i>
                <h4>Telegram-–≥—Ä—É–ø–ø–∞</h4>
                <p>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –Ω–∞—à–µ–º—É —Å–æ–æ–±—â–µ—Å—Ç–≤—É</p>
                <div class="community-stats">
                  <span>t.me/agent2b</span>
                </div>
              </template>
            </Card>
          </div>
        </div>
      </div>

      <div class="editor-divider"></div>

      <!-- 5. Support Section -->
      <div class="editor-section">
        <h2 class="section-heading">
          <span class="heading-icon">üí¨</span>
          –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?
        </h2>
        <p class="section-subtitle">–ú—ã –≤—Å–µ–≥–¥–∞ –Ω–∞ —Å–≤—è–∑–∏</p>
      </div>

      <div class="support-grid">
        <Card class="support-card" @click="openChat">
          <template #content>
            <i class="pi pi-comments support-icon"></i>
            <h3>–ß–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏</h3>
            <div class="status-badge online">–û–Ω–ª–∞–π–Ω 24/7</div>
            <p>–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: &lt;5 –º–∏–Ω—É—Ç</p>
            <Button
              label="–û—Ç–∫—Ä—ã—Ç—å —á–∞—Ç"
              icon="pi pi-comments"
              class="p-button-primary mt-3"
            />
          </template>
        </Card>

        <Card class="support-card" @click="openEmail">
          <template #content>
            <i class="pi pi-envelope support-icon"></i>
            <h3>Email</h3>
            <div class="email-address">support@drondoc.ru</div>
            <p>–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: &lt;2 —á–∞—Å–∞</p>
            <Button
              label="–ù–∞–ø–∏—Å–∞—Ç—å –ø–∏—Å—å–º–æ"
              icon="pi pi-envelope"
              class="p-button-primary mt-3"
            />
          </template>
        </Card>

        <Card class="support-card" @click="openPhone">
          <template #content>
            <i class="pi pi-phone support-icon"></i>
            <h3>–¢–µ–ª–µ—Ñ–æ–Ω</h3>
            <div class="phone-number">+7 (XXX) XXX-XX-XX</div>
            <p>–ü–Ω-–ü—Ç 9:00-18:00 –ú–°–ö</p>
            <Button
              label="–ü–æ–∑–≤–æ–Ω–∏—Ç—å"
              icon="pi pi-phone"
              class="p-button-primary mt-3"
            />
          </template>
        </Card>

        <Card class="support-card" @click="scheduleDemo">
          <template #content>
            <i class="pi pi-calendar support-icon"></i>
            <h3>–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –¥–µ–º–æ</h3>
            <div class="demo-info">–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è</div>
            <p>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 30 –º–∏–Ω—É—Ç</p>
            <Button
              label="–í—ã–±—Ä–∞—Ç—å –≤—Ä–µ–º—è"
              icon="pi pi-calendar"
              class="p-button-primary mt-3"
            />
          </template>
        </Card>
      </div>

      <div class="editor-divider"></div>

      <!-- 7. Personalization Section -->
      <div v-if="selectedRole" class="editor-section">
        <h2 class="section-heading">
          <span class="heading-icon">‚ú®</span>
          –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
        </h2>
        <p class="section-subtitle">–ù–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è</p>
      </div>

      <Card v-if="selectedRole" class="personalization-card">
        <template #content>
          <div class="personalization-content">
            <div class="role-badge">
              <i :class="getRoleIcon(selectedRole)"></i>
              <span>{{ getRoleLabel(selectedRole) }}</span>
            </div>
            <p class="recommendation-text">{{ getPersonalizedMessage() }}</p>
            <div class="recommended-templates">
              <h4>–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–æ–¥—É–ª–∏ –¥–ª—è –≤–∞—Å:</h4>
              <div class="modules-grid mt-3">
                <div
                  v-for="module in getRecommendedModules()"
                  :key="module.id"
                  class="module-card"
                  @click="navigateToModule(module.path)"
                >
                  <div class="module-icon">{{ module.icon }}</div>
                  <div class="module-content">
                    <h3 class="module-title">{{ module.name }}</h3>
                    <p class="module-description">{{ module.description }}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </template>
      </Card>

      <!-- Quick Actions -->
      <div class="editor-section mt-6">
        <h2 class="section-heading">
          <span class="heading-icon">üöÄ</span>
          –ù–∞—á–Ω–∏—Ç–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å
        </h2>
        <p class="section-subtitle">–¢—Ä–∏ –ø—Ä–æ—Å—Ç—ã—Ö —Å–ø–æ—Å–æ–±–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤–∞—à –±–∏–∑–Ω–µ—Å</p>
      </div>

      <div class="quick-actions">
        <Card class="action-card primary-action" @click="trackAndNavigate('/organization/ready-solutions', 'view_ready_solutions')">
          <template #content>
            <div class="action-icon">üíº</div>
            <h3>–ì–æ—Ç–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è</h3>
            <p>–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ç–æ–≤—ã–π –ø–∞–∫–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –ø–æ–¥ –≤–∞—à—É –æ—Ç—Ä–∞—Å–ª—å</p>
            <Button
              label="–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ—à–µ–Ω–∏—è"
              icon="pi pi-arrow-right"
              class="p-button-lg p-button-primary w-full mt-3"
            />
          </template>
        </Card>
        <Card class="action-card" @click="trackAndNavigate('/organization', 'view_my_organization')">
          <template #content>
            <div class="action-icon">üè¢</div>
            <h3>–ú–æ—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è</h3>
            <p>–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∏ —É–ø—Ä–∞–≤–ª—è–π—Ç–µ –≤–∞—à–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–µ–π</p>
            <Button
              label="–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏"
              icon="pi pi-building"
              class="p-button-lg p-button-outlined w-full mt-3"
            />
          </template>
        </Card>
        <Card class="action-card" @click="trackAndNavigate('/agents/constructor', 'create_custom_agent')">
          <template #content>
            <div class="action-icon">üõ†Ô∏è</div>
            <h3>–°–æ–±—Ä–∞—Ç—å —Å –Ω—É–ª—è</h3>
            <p>–°–æ–∑–¥–∞–π—Ç–µ –º–æ–¥—É–ª—å –ø–æ–¥ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—É—é –∑–∞–¥–∞—á—É</p>
            <Button
              label="–û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä"
              icon="pi pi-plus"
              class="p-button-lg p-button-outlined w-full mt-3"
            />
          </template>
        </Card>
      </div>

      <!-- Footer -->
      <div class="editor-footer">
        <p class="footer-hint">
          <i class="pi pi-lightbulb"></i>
          <strong>Integram:</strong> –°–æ–±–∏—Ä–∞–π—Ç–µ –≤–∞—à—É —Ü–∏—Ñ—Ä–æ–≤—É—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –∑–∞ 1 –¥–µ–Ω—å. –ù–µ –º–µ—Å—è—Ü—ã –Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É ‚Äî —á–∞—Å—ã –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫—É.
        </p>
      </div>
    </div>

    <!-- Ensemble Deployment Dialog -->
    <EnsembleDeploymentDialog
      v-if="selectedEnsemble"
      v-model:visible="deploymentDialogVisible"
      :ensemble="selectedEnsemble"
      :organization-id="userOrganizationId"
      @deployment-complete="handleDeploymentComplete"
    />
  </div>
</template>

<script setup>
import { ref, computed, onMounted } from 'vue'
import { useRouter } from 'vue-router'
import { useOnboardingStore } from '@/stores/onboardingStore'
import OnboardingWizard from '@/components/onboarding/OnboardingWizard.vue'
import EnsembleDeploymentDialog from '@/components/ensembles/EnsembleDeploymentDialog.vue'

import { getAllEnsembles, getEnsemble } from '@/services/ensembleService'

const router = useRouter()
const onboardingStore = useOnboardingStore()

// Ensemble deployment state
const deploymentDialogVisible = ref(false)
const selectedEnsemble = ref(null)
const userOrganizationId = ref('00000000-0000-0000-0000-000000000000') // TODO: Get from auth/organization store

// Initialize onboarding
onMounted(() => {
  onboardingStore.initFromLocalStorage()
  onboardingStore.markWelcomeSeen()

  // Track page view
  onboardingStore.trackFeatureInteraction('welcome_page_viewed')
})

// User data
const userName = computed(() => onboardingStore.selectedRole ? '–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å' : '–¥—Ä—É–≥')
const hasSeenWelcome = computed(() => onboardingStore.hasSeenWelcome)
const selectedRole = computed(() => onboardingStore.selectedRole)

// Onboarding progress
const hasCreatedAgent = computed(() =>
  onboardingStore.checklistItems.find(item => item.id === 'first_agent')?.completed || false
)
const hasTestedAgent = computed(() =>
  onboardingStore.checklistItems.find(item => item.id === 'explore_dashboard')?.completed || false
)
const onboardingProgress = computed(() => {
  let progress = 33 // Account created
  if (hasCreatedAgent.value) progress += 34
  if (hasTestedAgent.value) progress += 33
  return progress
})

// Progress steps
const progressSteps = computed(() => [
  {
    id: 'registration',
    title: '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è',
    description: '–ê–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞–Ω',
    completed: true,
    current: false
  },
  {
    id: 'create_agent',
    title: '–°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥—É–ª—è',
    description: '–í—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Å –Ω—É–ª—è',
    completed: hasCreatedAgent.value,
    current: !hasCreatedAgent.value
  },
  {
    id: 'test_agent',
    title: '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ',
    description: '–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –º–æ–¥—É–ª—è',
    completed: hasTestedAgent.value,
    current: hasCreatedAgent.value && !hasTestedAgent.value
  },
  {
    id: 'integration',
    title: '–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è',
    description: '–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã',
    completed: false,
    current: false
  },
  {
    id: 'production',
    title: '–ó–∞–ø—É—Å–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω',
    description: '–ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ –º–æ–¥—É–ª—å –≤ —Ä–∞–±–æ—á–∏–π —Ä–µ–∂–∏–º',
    completed: false,
    current: false
  }
])

// Templates by category
const supportTemplates = ref([
  {
    id: 'first-line-support',
    name: '–ú–æ–¥—É–ª—å –ø–µ—Ä–≤–æ–π –ª–∏–Ω–∏–∏',
    description: '–û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ —Ç–∏–ø–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∫–ª–∏–µ–Ω—Ç–æ–≤ 24/7',
    icon: 'üí¨',
    path: '/agents/constructor',
    category: 'support'
  },
  {
    id: 'faq-bot',
    name: 'FAQ-–±–æ—Ç',
    description: '–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π —Å –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç–∞–º–∏ –Ω–∞ —á–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã',
    icon: '‚ùì',
    path: '/knowledge-management',
    category: 'support'
  },
  {
    id: 'feedback-collector',
    name: '–°–±–æ—Ä –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏',
    description: '–û–ø—Ä–æ—Å—ã –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ —Å–±–æ—Ä –æ—Ü–µ–Ω–æ–∫',
    icon: '‚≠ê',
    path: '/agents/constructor',
    category: 'support'
  }
])

const salesTemplates = ref([
  {
    id: 'lead-qualification',
    name: '–ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è –ª–∏–¥–æ–≤',
    description: '–û—Ü–µ–Ω–∫–∞ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é AI',
    icon: 'üéØ',
    path: '/lead-scorer',
    category: 'sales'
  },
  {
    id: 'appointment-booking',
    name: '–ó–∞–ø–∏—Å—å –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é',
    description: '–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å—Ç—Ä–µ—á –∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π',
    icon: 'üìÖ',
    path: '/agents/constructor',
    category: 'sales'
  },
  {
    id: 'upsell-agent',
    name: 'Upsell-–º–æ–¥—É–ª—å',
    description: '–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Å–ª—É–≥ –∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤',
    icon: 'üí∞',
    path: '/agents/constructor',
    category: 'sales'
  }
])

const operationsTemplates = ref([
  {
    id: 'order-processing',
    name: '–ü—Ä–∏–µ–º –∑–∞–∫–∞–∑–æ–≤',
    description: '–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–æ–≤ 24/7 –±–µ–∑ –≤—ã—Ö–æ–¥–Ω—ã—Ö',
    icon: 'üõí',
    path: '/marketplace-analytics',
    category: 'operations'
  },
  {
    id: 'request-handling',
    name: '–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞—è–≤–æ–∫',
    description: '–°–±–æ—Ä –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤',
    icon: 'üìã',
    path: '/agents/constructor',
    category: 'operations'
  },
  {
    id: 'reminders',
    name: '–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è',
    description: '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ —Å–æ–±—ã—Ç–∏—è—Ö',
    icon: 'üîî',
    path: '/agents/constructor',
    category: 'operations'
  }
])

const hrTemplates = ref([
  {
    id: 'resume-screening',
    name: '–°–∫—Ä–∏–Ω–∏–Ω–≥ —Ä–µ–∑—é–º–µ',
    description: '–ü–µ—Ä–≤–∏—á–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é AI',
    icon: 'üìÑ',
    path: '/agents/constructor',
    category: 'hr'
  },
  {
    id: 'interview-scheduling',
    name: '–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–π',
    description: '–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –≤—Å—Ç—Ä–µ—á —Å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º–∏',
    icon: 'üìÖ',
    path: '/agents/constructor',
    category: 'hr'
  },
  {
    id: 'employee-onboarding',
    name: '–û–Ω–±–æ—Ä–¥–∏–Ω–≥ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤',
    description: '–í–≤–µ–¥–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –≤ –∫—É—Ä—Å –¥–µ–ª–∞',
    icon: 'üëã',
    path: '/agents/constructor',
    category: 'hr'
  }
])

// Learning resources
const videos = ref([
  {
    id: 'create-agent-5min',
    title: '–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å –∑–∞ 5 –º–∏–Ω—É—Ç',
    duration: '5:00',
    thumbnail: '/placeholder-video-1.jpg',
    url: 'https://youtube.com/watch?v=example1'
  },
  {
    id: 'setup-integrations',
    title: '–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π',
    duration: '3:00',
    thumbnail: '/placeholder-video-2.jpg',
    url: 'https://youtube.com/watch?v=example2'
  },
  {
    id: 'analytics-monitoring',
    title: '–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥',
    duration: '4:00',
    thumbnail: '/placeholder-video-3.jpg',
    url: 'https://youtube.com/watch?v=example3'
  }
])

const documentation = ref([
  {
    id: 'quick-start',
    title: '–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç',
    description: '–ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö',
    icon: 'pi pi-bolt',
    url: '/docs/getting-started'
  },
  {
    id: 'best-practices',
    title: '–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏',
    description: '–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏',
    icon: 'pi pi-star',
    url: '/docs/best-practices'
  },
  {
    id: 'api-reference',
    title: 'API Reference',
    description: '–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤',
    icon: 'pi pi-code',
    url: '/developers'
  }
])

const communityLinks = ref([
  {
    id: 'telegram',
    name: 'Telegram-—á–∞—Ç',
    description: '–û–±—â–∞–π—Ç–µ—Å—å —Å –¥—Ä—É–≥–∏–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏',
    icon: 'pi pi-send',
    members: '2,500+ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤',
    url: 'https://t.me/integram'
  },
  {
    id: 'forum',
    name: '–§–æ—Ä—É–º',
    description: '–í–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã —Å–æ–æ–±—â–µ—Å—Ç–≤–∞',
    icon: 'pi pi-comments',
    members: '1,200+ –ø–æ—Å—Ç–æ–≤',
    url: '/forum'
  },
  {
    id: 'blog',
    name: '–ë–ª–æ–≥ –∏ –∫–µ–π—Å—ã',
    description: '–ò—Å—Ç–æ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ –∏ –Ω–æ–≤–æ—Å—Ç–∏',
    icon: 'pi pi-book',
    members: '150+ —Å—Ç–∞—Ç–µ–π',
    url: '/blog'
  }
])

// Functions
function useTemplate(template) {
  onboardingStore.trackFeatureInteraction('template_selected')
  onboardingStore.trackFeatureInteraction(`template_${template.category}_${template.id}`)
  router.push(template.path)
}

function navigateToModule(path) {
  router.push(path)
}

function trackAndNavigate(path, eventName) {
  onboardingStore.trackFeatureInteraction(eventName)
  router.push(path)
}

function playVideo(video) {
  onboardingStore.trackFeatureInteraction('video_watched')
  onboardingStore.trackFeatureInteraction(`video_${video.id}`)
  window.open(video.url, '_blank')
}

function openDocumentation(doc) {
  onboardingStore.trackFeatureInteraction('documentation_viewed')
  router.push(doc.url)
}

function openCommunity(community) {
  onboardingStore.trackFeatureInteraction('community_accessed')
  onboardingStore.trackFeatureInteraction(`community_${community.id}`)
  if (community.url.startsWith('http')) {
    window.open(community.url, '_blank')
  } else {
    router.push(community.url)
  }
}

function openChat() {
  onboardingStore.trackFeatureInteraction('support_contacted')
  onboardingStore.trackFeatureInteraction('support_chat_opened')
  // TODO: Integrate with actual chat system (Intercom/Telegram)
  alert('–§—É–Ω–∫—Ü–∏—è —á–∞—Ç–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –ü–æ–∫–∞ –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º –Ω–∞ support@drondoc.ru')
}

function openEmail() {
  onboardingStore.trackFeatureInteraction('support_contacted')
  onboardingStore.trackFeatureInteraction('support_email_clicked')
  window.location.href = 'mailto:support@drondoc.ru'
}

function openPhone() {
  onboardingStore.trackFeatureInteraction('support_contacted')
  onboardingStore.trackFeatureInteraction('support_phone_clicked')
  // TODO: Add actual phone number
  alert('–¢–µ–ª–µ—Ñ–æ–Ω: +7 (XXX) XXX-XX-XX')
}

function scheduleDemo() {
  onboardingStore.trackFeatureInteraction('support_contacted')
  onboardingStore.trackFeatureInteraction('demo_scheduled')
  // TODO: Integrate with Calendly or similar
  alert('–§—É–Ω–∫—Ü–∏—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–µ–º–æ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º –Ω–∞ support@drondoc.ru')
}

// New solution-focused functions
function navigateToSolution(solutionType) {
  onboardingStore.trackFeatureInteraction('solution_selected')
  onboardingStore.trackFeatureInteraction(`solution_${solutionType}`)
  // Navigate to organization ready-solutions page filtered by solution type
  router.push(`/organization/ready-solutions?solution=${solutionType}`)
}

function navigateToAgent(path) {
  onboardingStore.trackFeatureInteraction('agent_selected')
  router.push(path)
}

async function activateEnsemble(ensembleType) {
  onboardingStore.trackFeatureInteraction('ensemble_activated')
  onboardingStore.trackFeatureInteraction(`ensemble_${ensembleType}`)

  try {
    // Fetch ensemble details
    const ensemble = await getEnsemble(ensembleType)
    selectedEnsemble.value = ensemble

    // Show deployment dialog
    deploymentDialogVisible.value = true
  } catch (error) {
    console.error('Failed to load ensemble:', error)
    alert(`–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∞–Ω—Å–∞–º–±–ª—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ –∏–ª–∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å support@drondoc.ru`)
  }
}

function handleDeploymentComplete(result) {
  onboardingStore.trackFeatureInteraction('ensemble_deployed_success')
  deploymentDialogVisible.value = false

  // Navigate to organization page to see deployed agents
  if (result.success) {
    setTimeout(() => {
      router.push('/organization')
    }, 1000)
  }
}

// Personalization functions
function getRoleIcon(role) {
  const roleIcons = {
    developer: 'pi pi-code',
    manager: 'pi pi-users',
    analyst: 'pi pi-chart-bar',
    operator: 'pi pi-cog'
  }
  return roleIcons[role] || 'pi pi-user'
}

function getRoleLabel(role) {
  const roleLabels = {
    developer: '–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫',
    manager: '–ú–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞',
    analyst: '–ê–Ω–∞–ª–∏—Ç–∏–∫',
    operator: '–û–ø–µ—Ä–∞—Ç–æ—Ä'
  }
  return roleLabels[role] || role
}

function getPersonalizedMessage() {
  const role = selectedRole.value
  const messages = {
    developer: '–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –º—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –Ω–∞—á–∞—Ç—å —Å API-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –º–æ–¥—É–ª–µ–π',
    manager: '–î–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –ø—Ä–æ–µ–∫—Ç–æ–≤ –º—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–æ—Ä–∫—Ñ–ª–æ—É –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫—É',
    analyst: '–î–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–≤ —É –Ω–∞—Å –µ—Å—Ç—å –º–æ—â–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å–±–æ—Ä–∞ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö',
    operator: '–î–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –¥—Ä–æ–Ω–æ–≤ –¥–æ—Å—Ç—É–ø–Ω—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª–µ—Ç–∞–º–∏ –∏ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–µ–π'
  }
  return messages[role] || '–ú—ã –ø–æ–¥–æ–±—Ä–∞–ª–∏ –¥–ª—è –≤–∞—Å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –º–æ–¥—É–ª–∏ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã'
}

function getRecommendedModules() {
  const role = selectedRole.value
  const allModules = [
    {
      id: 'agent-constructor',
      name: '–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –º–æ–¥—É–ª–µ–π (3 –≤ 1)',
      description: 'No-Code –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, Workflow Builder –∏ AI-—Å–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥—É–ª–µ–π',
      icon: 'ü§ñ',
      path: '/agents/constructor',
      roles: ['developer', 'manager']
    },
    {
      id: 'youtube-analytics',
      name: '–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ YouTube',
      description: '–°–æ–±–∏—Ä–∞–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Ç—Ä–µ–Ω–¥—ã',
      icon: 'üì∫',
      path: '/youtube-analytics',
      roles: ['analyst', 'manager']
    },
    {
      id: 'drone-control',
      name: '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥—Ä–æ–Ω–∞–º–∏',
      description: '–£–ø—Ä–∞–≤–ª—è–π—Ç–µ –¥—Ä–æ–Ω–∞–º–∏ —á–µ—Ä–µ–∑ MAVLink',
      icon: 'üöÅ',
      path: '/drone',
      roles: ['operator', 'developer']
    },
    {
      id: 'web-scraper',
      name: '–ü–∞—Ä—Å–∏–Ω–≥ —Å–∞–π—Ç–æ–≤',
      description: '–ò–∑–≤–ª–µ–∫–∞–π—Ç–µ –¥–∞–Ω–Ω—ã–µ —Å –≤–µ–±-—Å–∞–π—Ç–æ–≤',
      icon: 'üï∑Ô∏è',
      path: '/web-scraper',
      roles: ['developer', 'analyst']
    },
    {
      id: 'api-sandbox',
      name: '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API',
      description: '–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ API endpoints',
      icon: 'üß™',
      path: '/api',
      roles: ['developer']
    }
  ]

  return allModules.filter(module =>
    !role || module.roles.includes(role)
  ).slice(0, 3)
}

// New functions for Learning section
function startQuickTutorial() {
  onboardingStore.trackFeatureInteraction('quick_tutorial_started')
  // TODO: Navigate to quick tutorial or show interactive guide
  router.push('/tutorials/quick-start')
}

function startFullCourse() {
  onboardingStore.trackFeatureInteraction('full_course_started')
  // TODO: Navigate to 7-day course
  router.push('/tutorials/7-day-course')
}

function openVideoLessons() {
  onboardingStore.trackFeatureInteraction('video_lessons_opened')
  // TODO: Navigate to video lessons page
  router.push('/tutorials/videos')
}

// New functions for Invite Friends & Create Databases
function inviteFriends() {
  onboardingStore.trackFeatureInteraction('invite_friends_clicked')
  // TODO: Show invite dialog with email/link sharing options
  alert('–§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –¥—Ä—É–∑–µ–π –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –í—ã –º–æ–∂–µ—Ç–µ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é —Å –∫–æ–ª–ª–µ–≥–∞–º–∏ —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è.')
}

function createNewDatabase() {
  onboardingStore.trackFeatureInteraction('create_database_clicked')
  // TODO: Navigate to database creation page or show dialog
  router.push('/databases/create')
}
</script>

<style scoped>
.welcome-page {
  min-height: 100vh;
  background: var(--surface-0);
  padding: 2rem 1rem;
  display: flex;
  justify-content: center;
}

.editor-container {
  max-width: 1000px;
  width: 100%;
  background: var(--surface-0);
  padding: 3rem 2rem;
}

/* Title Section */
.editor-title {
  margin-bottom: 1rem;
}

.title-editable {
  font-size: 2.5rem;
  font-weight: 700;
  color: var(--text-color);
  border: none;
  outline: none;
  padding: 0.5rem 0;
  line-height: 1.2;
  margin: 0;
}

.editor-subtitle {
  margin-bottom: 2rem;
}

.editor-subtitle p {
  font-size: 1.25rem;
  color: var(--text-color-secondary);
  margin: 0;
  padding: 0.5rem 0;
}

.editor-divider {
  height: 1px;
  background: var(--surface-border);
  margin: 2rem 0;
}

/* Section Headings */
.editor-section {
  margin: 2rem 0 1rem 0;
}

.section-heading {
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--text-color);
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin: 0 0 0.5rem 0;
}

.heading-icon {
  font-size: 1.5rem;
}

.section-subtitle {
  color: var(--text-color-secondary);
  font-size: 1rem;
  margin: 0.5rem 0;
}

/* Value Proposition */
.value-proposition {
  font-size: 1.4rem !important;
  font-weight: 600;
  color: var(--primary-color) !important;
  line-height: 1.4;
}

.value-subtext {
  font-size: 1.1rem !important;
  color: var(--text-color) !important;
  margin-top: 0.5rem !important;
}

/* Solutions Single Row */
.solutions-single-row {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.solution-card {
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid var(--surface-border);
  position: relative;
  overflow: visible;
}

.solution-card:hover {
  border-color: var(--primary-color);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
  transform: translateY(-4px);
}

.solution-card.premium {
  border-color: var(--primary-color);
  background: linear-gradient(135deg, var(--primary-50) 0%, var(--surface-0) 100%);
}

.solution-badge {
  position: absolute;
  top: -12px;
  right: 16px;
  background: var(--primary-color);
  color: white;
  padding: 0.25rem 0.75rem;
  border-radius: 12px;
  font-size: 0.75rem;
  font-weight: 600;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.solution-icon {
  font-size: 3.5rem;
  text-align: center;
  margin-bottom: 1rem;
}

.solution-title {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--text-color);
  margin: 0 0 0.75rem 0;
}

.solution-description {
  font-size: 1rem;
  color: var(--text-color-secondary);
  line-height: 1.6;
  margin-bottom: 1rem;
}

.solution-features {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  margin-bottom: 1rem;
  padding: 1rem;
  background: var(--surface-50);
  border-radius: 8px;
}

.feature-item {
  font-size: 0.9rem;
  color: var(--text-color);
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.solution-stats {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
  margin-bottom: 1rem;
}

.stat-item {
  text-align: center;
  padding: 0.75rem;
  background: var(--surface-0);
  border-radius: 8px;
  border: 1px solid var(--surface-border);
}

.stat-item strong {
  display: block;
  font-size: 1.5rem;
  color: var(--primary-color);
  margin-bottom: 0.25rem;
}

.stat-item span {
  font-size: 0.75rem;
  color: var(--text-color-secondary);
}

/* Ensembles Section */
.ensembles-accordion {
  margin: 1.5rem 0;
}

.ensemble-description {
  background: var(--surface-50);
  padding: 1rem;
  border-radius: 8px;
  margin-bottom: 1.5rem;
}

.ensemble-description p {
  margin: 0.5rem 0;
  color: var(--text-color);
}

.agents-ensemble {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.agent-card {
  cursor: pointer;
  transition: all 0.2s ease;
  border: 1px solid var(--surface-border);
  text-align: center;
}

.agent-card:hover {
  border-color: var(--primary-color);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  transform: translateY(-2px);
}

.agent-icon {
  font-size: 2.5rem;
  margin-bottom: 0.5rem;
}

.agent-card h4 {
  font-size: 1rem;
  font-weight: 600;
  margin: 0 0 0.5rem 0;
  color: var(--text-color);
}

.agent-card p {
  font-size: 0.875rem;
  color: var(--text-color-secondary);
  margin: 0 0 0.75rem 0;
  line-height: 1.4;
}

.agent-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  justify-content: center;
}

.tag {
  background: var(--primary-100);
  color: var(--primary-700);
  padding: 0.25rem 0.5rem;
  border-radius: 12px;
  font-size: 0.7rem;
  font-weight: 500;
}

/* Quick Actions Cards */
.quick-actions {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.action-card {
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid var(--surface-border);
  text-align: center;
}

.action-card:hover {
  border-color: var(--primary-color);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
  transform: translateY(-4px);
}

.action-card.primary-action {
  border-color: var(--primary-color);
  background: linear-gradient(135deg, var(--primary-50) 0%, var(--surface-0) 100%);
}

.action-icon {
  font-size: 3rem;
  margin-bottom: 1rem;
}

.action-card h3 {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--text-color);
  margin: 0 0 0.5rem 0;
}

.action-card p {
  font-size: 0.95rem;
  color: var(--text-color-secondary);
  line-height: 1.5;
  margin-bottom: 1rem;
}

/* Onboarding Checklist */
.onboarding-checklist {
  background: var(--surface-card);
  border: 1px solid var(--surface-border);
  border-radius: 8px;
  padding: 2rem;
  margin: 1.5rem 0;
}

.progress-container {
  margin-bottom: 2rem;
}

.progress-text {
  text-align: center;
  color: var(--text-color-secondary);
  margin-top: 0.5rem;
  font-size: 0.875rem;
}

.checklist-items {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.checklist-item {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  padding: 1.5rem;
  background: var(--surface-0);
  border: 2px solid var(--surface-border);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.checklist-item:hover {
  border-color: var(--primary-color);
  transform: translateX(4px);
}

.checklist-item.completed {
  border-color: var(--green-500);
  background: var(--green-50);
}

.check-icon {
  font-size: 2rem;
  flex-shrink: 0;
  margin-top: 0.25rem;
}

.check-icon.inactive {
  color: var(--surface-400);
}

.checklist-item.completed .check-icon {
  color: var(--green-500);
}

.item-content {
  flex: 1;
}

.item-content h4 {
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--text-color);
  margin: 0 0 0.5rem 0;
}

.item-content p {
  font-size: 0.875rem;
  color: var(--text-color-secondary);
  margin: 0;
}

.reward-message {
  margin-top: 1.5rem;
}

/* Templates Section */
.templates-accordion {
  margin: 1.5rem 0;
}

.templates-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 1rem;
  margin-top: 1rem;
}

.template-card {
  cursor: pointer;
  transition: all 0.2s ease;
  border: 1px solid var(--surface-border);
}

.template-card:hover {
  border-color: var(--primary-color);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  transform: translateY(-2px);
}

.template-icon {
  font-size: 3rem;
  text-align: center;
  padding: 1rem;
  background: var(--surface-50);
}

.template-card h4 {
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--text-color);
  margin: 0 0 0.5rem 0;
}

.template-card p {
  font-size: 0.875rem;
  color: var(--text-color-secondary);
  line-height: 1.5;
}

/* Resources Section */
.resources-container {
  margin: 1.5rem 0;
}

.resource-section {
  margin-bottom: 2rem;
}

.resource-section h3 {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--text-color);
  margin-bottom: 1rem;
}

.video-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 1rem;
}

.video-card {
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
}

.video-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.video-thumbnail {
  width: 100%;
  height: 150px;
  object-fit: cover;
  background: var(--surface-200);
  border-radius: 8px 8px 0 0;
}

.play-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.3);
  border-radius: 8px 8px 0 0;
}

.play-overlay i {
  font-size: 3rem;
  color: white;
  opacity: 0.9;
}

.video-card h4 {
  font-size: 1rem;
  font-weight: 600;
  margin: 0 0 0.25rem 0;
}

.video-duration {
  font-size: 0.75rem;
  color: var(--text-color-secondary);
  margin: 0;
}

.docs-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.doc-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem;
  background: var(--surface-card);
  border: 1px solid var(--surface-border);
  border-radius: 8px;
  text-decoration: none;
  color: var(--text-color);
  transition: all 0.2s ease;
}

.doc-item:hover {
  border-color: var(--primary-color);
  background: var(--primary-50);
  transform: translateX(4px);
}

.doc-item > i:first-child {
  font-size: 1.5rem;
  color: var(--primary-color);
  flex-shrink: 0;
}

.doc-content {
  flex: 1;
}

.doc-content h4 {
  font-size: 1rem;
  font-weight: 600;
  margin: 0 0 0.25rem 0;
}

.doc-content p {
  font-size: 0.875rem;
  color: var(--text-color-secondary);
  margin: 0;
}

.doc-item > i:last-child {
  color: var(--text-color-secondary);
  font-size: 1rem;
  flex-shrink: 0;
}

.community-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 1rem;
}

.community-card {
  cursor: pointer;
  text-align: center;
  transition: all 0.2s ease;
  border: 1px solid var(--surface-border);
}

.community-card:hover {
  border-color: var(--primary-color);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  transform: translateY(-2px);
}

.community-icon {
  font-size: 2.5rem;
  color: var(--primary-color);
  margin-bottom: 0.5rem;
}

.community-card h4 {
  font-size: 1rem;
  font-weight: 600;
  margin: 0 0 0.5rem 0;
}

.community-card p {
  font-size: 0.875rem;
  color: var(--text-color-secondary);
  margin: 0 0 0.5rem 0;
}

.community-stats {
  font-size: 0.75rem;
  color: var(--text-color-secondary);
  font-weight: 600;
}

/* Support Section */
.support-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap: 1rem;
  margin: 1.5rem 0;
}

.support-card {
  text-align: center;
  cursor: pointer;
  transition: all 0.2s ease;
  border: 1px solid var(--surface-border);
}

.support-card:hover {
  border-color: var(--primary-color);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  transform: translateY(-2px);
}

.support-icon {
  font-size: 3rem;
  color: var(--primary-color);
  margin-bottom: 1rem;
}

.support-card h3 {
  font-size: 1.25rem;
  font-weight: 600;
  margin: 0 0 0.5rem 0;
}

.status-badge {
  display: inline-block;
  padding: 0.25rem 0.75rem;
  border-radius: 16px;
  font-size: 0.75rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
}

.status-badge.online {
  background: var(--green-100);
  color: var(--green-700);
}

.email-address,
.phone-number,
.demo-info {
  font-weight: 600;
  color: var(--primary-color);
  margin: 0.5rem 0;
}

.support-card p {
  font-size: 0.875rem;
  color: var(--text-color-secondary);
  margin: 0.5rem 0;
}

/* Progress Card */
.progress-card {
  margin: 1.5rem 0;
}

.detailed-progress {
  padding: 1rem 0;
}

.progress-steps {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.progress-step {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  position: relative;
}

.progress-step::before {
  content: '';
  position: absolute;
  left: 19px;
  top: 40px;
  bottom: -24px;
  width: 2px;
  background: var(--surface-300);
}

.progress-step:last-child::before {
  display: none;
}

.progress-step.completed::before {
  background: var(--primary-color);
}

.step-number {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: var(--surface-200);
  color: var(--text-color-secondary);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  flex-shrink: 0;
  z-index: 1;
}

.progress-step.completed .step-number {
  background: var(--primary-color);
  color: white;
}

.progress-step.current .step-number {
  background: var(--primary-100);
  color: var(--primary-color);
  border: 2px solid var(--primary-color);
}

.step-info {
  flex: 1;
  padding-top: 0.25rem;
}

.step-info h4 {
  font-size: 1rem;
  font-weight: 600;
  color: var(--text-color);
  margin: 0 0 0.25rem 0;
}

.step-info p {
  font-size: 0.875rem;
  color: var(--text-color-secondary);
  margin: 0;
}

/* Personalization Section */
.personalization-card {
  margin: 1.5rem 0;
}

.personalization-content {
  padding: 1rem 0;
}

.role-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  background: var(--primary-100);
  color: var(--primary-700);
  border-radius: 20px;
  font-weight: 600;
  margin-bottom: 1rem;
}

.role-badge i {
  font-size: 1.25rem;
}

.recommendation-text {
  font-size: 1rem;
  color: var(--text-color-secondary);
  margin: 1rem 0;
  line-height: 1.6;
}

.recommended-templates h4 {
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--text-color);
  margin: 1.5rem 0 0.5rem 0;
}

/* Modules Grid */
.modules-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 1rem;
}

.module-card {
  background: var(--surface-card);
  border: 1px solid var(--surface-border);
  border-radius: 8px;
  padding: 1.5rem;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.module-card:hover {
  border-color: var(--primary-color);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  transform: translateY(-2px);
}

.module-icon {
  font-size: 2.5rem;
}

.module-content {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.module-title {
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--text-color);
  margin: 0;
}

.module-description {
  font-size: 0.875rem;
  color: var(--text-color-secondary);
  line-height: 1.5;
  margin: 0;
}

/* Quick Actions */
/* –°—Ç–∏–ª–∏ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ —Å–µ–∫—Ü–∏—é "Quick Actions Cards" –≤—ã—à–µ */

/* Footer */
.editor-footer {
  margin-top: 3rem;
  padding-top: 2rem;
  border-top: 1px solid var(--surface-border);
}

.footer-hint {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.875rem;
  color: var(--text-color-secondary);
  margin: 0;
}

.footer-hint i {
  color: var(--primary-color);
}

/* Utility Classes */
.mt-2 {
  margin-top: 0.5rem;
}

.mt-3 {
  margin-top: 0.75rem;
}

.mt-4 {
  margin-top: 1rem;
}

.mt-6 {
  margin-top: 3rem;
}

.mb-3 {
  margin-bottom: 0.75rem;
}

.mb-4 {
  margin-bottom: 1rem;
}

/* Value Tagline */
.value-tagline {
  font-size: 1.15rem !important;
  font-weight: 600;
  color: var(--primary-color) !important;
  margin-top: 0.75rem !important;
}

/* Lessons Section */
.lessons-container {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.lesson-card {
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid var(--surface-border);
  position: relative;
}

.lesson-card:hover {
  border-color: var(--primary-color);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
  transform: translateY(-4px);
}

.lesson-card.featured-lesson {
  border-color: var(--primary-color);
  background: linear-gradient(135deg, var(--primary-50) 0%, var(--surface-0) 100%);
}

.lesson-badge {
  position: absolute;
  top: -12px;
  right: 16px;
  background: var(--primary-color);
  color: white;
  padding: 0.25rem 0.75rem;
  border-radius: 12px;
  font-size: 0.75rem;
  font-weight: 600;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.lesson-icon {
  font-size: 3.5rem;
  text-align: center;
  margin-bottom: 1rem;
}

.lesson-title {
  font-size: 1.35rem;
  font-weight: 700;
  color: var(--text-color);
  margin: 0 0 0.75rem 0;
  text-align: center;
}

.lesson-description {
  font-size: 1rem;
  color: var(--text-color-secondary);
  line-height: 1.6;
  margin-bottom: 1rem;
  text-align: center;
}

.lesson-steps {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  margin-bottom: 1rem;
  padding: 1rem;
  background: var(--surface-50);
  border-radius: 8px;
}

.lesson-step {
  font-size: 0.9rem;
  color: var(--text-color);
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.lesson-progress {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  margin-bottom: 1rem;
}

.progress-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.75rem;
  background: var(--surface-50);
  border-radius: 6px;
}

.progress-badge {
  font-size: 0.7rem;
  padding: 0.25rem 0.5rem;
  border-radius: 10px;
  font-weight: 600;
  background: var(--green-100);
  color: var(--green-700);
}

.progress-badge.locked {
  background: var(--surface-200);
  color: var(--surface-600);
}

.video-list {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  margin-bottom: 1rem;
}

.video-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem;
  background: var(--surface-50);
  border-radius: 6px;
  font-size: 0.9rem;
  color: var(--text-color);
}

.video-item i {
  color: var(--primary-color);
  font-size: 1.25rem;
}

/* Collaboration Section */
.collaboration-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.collaboration-card {
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid var(--surface-border);
  text-align: center;
}

.collaboration-card:hover {
  border-color: var(--primary-color);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
  transform: translateY(-4px);
}

.collab-icon {
  font-size: 4rem;
  margin-bottom: 1rem;
}

.collaboration-card h3 {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--text-color);
  margin: 0 0 0.75rem 0;
}

.collab-description {
  font-size: 1rem;
  color: var(--text-color-secondary);
  line-height: 1.6;
  margin-bottom: 1rem;
}

.invite-benefits {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  margin-bottom: 1rem;
  text-align: left;
}

.benefit-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  font-size: 0.95rem;
  color: var(--text-color);
}

.benefit-item i {
  color: var(--green-500);
  font-size: 1.25rem;
}

.database-stats {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
  margin-bottom: 1rem;
}

.stat-box {
  padding: 1rem;
  background: var(--surface-50);
  border-radius: 8px;
  border: 1px solid var(--surface-border);
}

.stat-number {
  font-size: 2rem;
  font-weight: 700;
  color: var(--primary-color);
  margin-bottom: 0.25rem;
}

.stat-label {
  font-size: 0.8rem;
  color: var(--text-color-secondary);
}

/* Responsive Design */
@media (max-width: 768px) {
  .editor-container {
    padding: 2rem 1rem;
  }

  .title-editable {
    font-size: 2rem;
  }

  .editor-subtitle p {
    font-size: 1rem;
  }

  .solutions-single-row {
    grid-template-columns: 1fr;
  }

  .templates-grid,
  .modules-grid {
    grid-template-columns: 1fr;
  }

  .support-grid {
    grid-template-columns: 1fr;
  }

  .video-grid {
    grid-template-columns: 1fr;
  }

  .community-grid {
    grid-template-columns: 1fr;
  }

  .quick-actions {
    grid-template-columns: 1fr;
  }

  .checklist-item {
    flex-direction: column;
  }

  .progress-step {
    flex-direction: row;
  }

  .lessons-container {
    grid-template-columns: 1fr;
  }

  .collaboration-grid {
    grid-template-columns: 1fr;
  }
}
</style>
